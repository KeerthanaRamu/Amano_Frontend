(self.webpackChunksmart=self.webpackChunksmart||[]).push([[7278],{47278:function(e,t,i){"use strict";i.r(t),i.d(t,{ProfileModule:function(){return y}});var s=i(61116),r=i(35729),a=i(529),u=i(31041),o=i(35366),l=i(28086),n=i(50518),Z=i(31269),c=i(57173),g=i(13070),d=i(9550),m=i(84369),p=i(1325),h=i(77307);function q(e,t){1&e&&(o.TgZ(0,"mat-icon",48),o._uU(1,"face"),o.qZA(),o._uU(2," About Me "))}function A(e,t){1&e&&(o.TgZ(0,"div",25),o.TgZ(1,"h2"),o.TgZ(2,"strong"),o._uU(3,"Update Logo"),o.qZA(),o.qZA(),o.qZA())}function f(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",26),o.TgZ(1,"div",32),o.TgZ(2,"mat-form-field",44),o.TgZ(3,"ngx-mat-file-input",49),o.NdJ("change",function(t){return o.CHM(e),o.oxw().onFileChange(t)}),o.qZA(),o.TgZ(4,"mat-icon",46),o._uU(5,"cloud_upload"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(6,"button",47),o.NdJ("click",function(){return o.CHM(e),o.oxw().updateClientLogo()}),o._uU(7,"Save"),o.qZA(),o.qZA()}}function T(e,t){1&e&&(o.TgZ(0,"mat-icon",48),o._uU(1,"settings"),o.qZA(),o._uU(2," Settings "))}const _=[{path:"",component:(()=>{class e{constructor(e,t,i,s){this.fb=e,this.authService=t,this.toastrService=i,this.spinner=s,this.apiURL=a.N.apiUrl}ngOnInit(){this.securityForm=this.fb.group({user_name:["",u.kI.required],new_username:["",u.kI.required],password:["",u.kI.required],current_password:["",u.kI.required],new_password:["",u.kI.required]}),this.accountsForm=this.fb.group({name:["",u.kI.required],mobile_no:["",u.kI.required],email_id:["",u.kI.required],profile:[""],profile_type:[""]}),this.authService.checkUserLoggedIn().subscribe(e=>{this.userDetails=e.data,this.userImg=e.data.img,this.securityForm.patchValue({user_name:this.userDetails.user_name,new_username:this.userDetails.user_name,password:this.userDetails.password}),this.accountsForm.patchValue({name:this.userDetails.name,mobile_no:this.userDetails.mobile_no,email_id:this.userDetails.email_id,profile:this.userDetails.img})})}onFileChange(e){if(new FileReader,e.target.files&&e.target.files.length){const[t]=e.target.files;this.newLogo=t,this.newLogoType=e.target.files[0].type}}onFileChangeProfile(e){if(new FileReader,e.target.files&&e.target.files.length){const[t]=e.target.files;this.accountsForm.patchValue({profile:t,profile_type:e.target.files[0].type})}}updateClientLogo(){if(this.newLogo){var e=new FormData;e.append("newLogo",this.newLogo),e.append("newLogoType",this.newLogoType),this.authService.updateClientLogo(e).subscribe(e=>{this.authService.currentUserSubject.next(!0),this.toastrService.success("Updated Successfully!!!")})}}updateUserCredentials(){this.spinner.show(),this.securityForm.value.password==this.securityForm.value.current_password?this.authService.updateUserCredentials(this.securityForm.value).subscribe(e=>{this.spinner.hide(),"Success"==e.status?(this.authService.currentUserSubject.next(!0),this.toastrService.success("Updated Successfully!!!")):this.toastrService.error("User Name Already Exists!!")}):this.toastrService.error("Current Password is not Correct!!")}updateAccountDetails(){this.spinner.show();var e=new FormData;e.append("baseRoot","root/Employee/"+this.securityForm.value.new_username),e.append("accountData",JSON.stringify(this.accountsForm.value)),e.append("file",this.accountsForm.value.profile),this.authService.updateAccountDetails(e).subscribe(e=>{this.spinner.hide(),this.authService.currentUserSubject.next(!0),this.toastrService.success("Updated Successfully!!!"),this.authService.checkUserLoggedIn().subscribe(e=>{this.userDetails=e.data,this.securityForm.patchValue({user_name:this.userDetails.user_name,new_username:this.userDetails.user_name,password:this.userDetails.password}),this.accountsForm.patchValue({name:this.userDetails.name,mobile_no:this.userDetails.mobile_no,email_id:this.userDetails.email_id,profile:this.userDetails.img})})})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(u.qu),o.Y36(l.e),o.Y36(n._W),o.Y36(Z.t2))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-profile"]],decls:125,vars:13,consts:[["bdColor","rgba(51,51,51,0.8)","size","medium","color","#fff","type","ball-scale-multiple"],[2,"font-size","20px","color","white"],[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"row","clearfix"],[1,"col-lg-4","col-md-12"],[1,"card"],[1,"m-b-20"],[1,"contact-grid"],[1,"profile-header","bg-dark"],[1,"user-name"],[1,"name-center"],["alt","",1,"user-img",2,"width","100%","height","100px",3,"src"],[1,"phone"],[1,"material-icons"],[1,"col-lg-8","col-md-12"],["mat-tab-label",""],[1,"col-lg-12","col-md-12","col-sm-12"],[1,"project_widget"],[1,"header"],[1,"body"],[1,"col-md-3","col-6","b-r"],[1,"text-muted"],["class","header",4,"ngIf"],["class","body",4,"ngIf"],[3,"formGroup"],[1,"example-container"],["appearance","fill",1,"example-full-width"],["matInput","","formControlName","new_username"],["matInput","","type","password","formControlName","current_password"],["matInput","","type","password","formControlName","new_password"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"col-md-12"],[1,"form-group"],["matInput","","formControlName","name"],[1,"col-lg-6","col-md-12"],["matInput","","formControlName","mobile_no"],["matInput","","formControlName","email_id"],[1,"example-full-width"],["placeholder","Profile",3,"change"],["matSuffix",""],["mat-raised-button","","color","primary",3,"click"],[1,"example-tab-icon","msr-2"],["placeholder","Company Logo",3,"change"]],template:function(e,t){1&e&&(o.TgZ(0,"ngx-spinner",0),o.TgZ(1,"p",1),o._uU(2,"Loading..."),o.qZA(),o.qZA(),o.TgZ(3,"section",2),o.TgZ(4,"div",3),o.TgZ(5,"div",4),o.TgZ(6,"div",5),o.TgZ(7,"div",6),o.TgZ(8,"ul",7),o.TgZ(9,"li",8),o.TgZ(10,"h4",9),o._uU(11,"Profile"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(12,"div",10),o.TgZ(13,"div",11),o.TgZ(14,"div",12),o.TgZ(15,"div",13),o.TgZ(16,"div",14),o.TgZ(17,"div",15),o.TgZ(18,"div",16),o._uU(19),o.qZA(),o.TgZ(20,"div",17),o._uU(21),o.qZA(),o.qZA(),o._UZ(22,"img",18),o.TgZ(23,"div"),o.TgZ(24,"span",19),o.TgZ(25,"i",20),o._uU(26,"phone"),o.qZA(),o._uU(27),o.qZA(),o.qZA(),o.TgZ(28,"div"),o.TgZ(29,"span",19),o.TgZ(30,"i",20),o._uU(31,"email"),o.qZA(),o._uU(32),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(33,"div",21),o.TgZ(34,"div",12),o.TgZ(35,"mat-tab-group"),o.TgZ(36,"mat-tab"),o.YNc(37,q,3,0,"ng-template",22),o.TgZ(38,"div",23),o.TgZ(39,"div",24),o.TgZ(40,"div",25),o.TgZ(41,"h2"),o.TgZ(42,"strong"),o._uU(43,"About"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(44,"div",26),o.TgZ(45,"div",5),o.TgZ(46,"div",27),o.TgZ(47,"strong"),o._uU(48,"Full Name"),o.qZA(),o._UZ(49,"br"),o.TgZ(50,"p",28),o._uU(51),o.qZA(),o.qZA(),o.TgZ(52,"div",27),o.TgZ(53,"strong"),o._uU(54,"Mobile"),o.qZA(),o._UZ(55,"br"),o.TgZ(56,"p",28),o._uU(57),o.qZA(),o.qZA(),o.TgZ(58,"div",27),o.TgZ(59,"strong"),o._uU(60,"Email"),o.qZA(),o._UZ(61,"br"),o.TgZ(62,"p",28),o._uU(63),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.YNc(64,A,4,0,"div",29),o.YNc(65,f,8,0,"div",30),o.qZA(),o.qZA(),o.qZA(),o.TgZ(66,"mat-tab"),o.YNc(67,T,3,0,"ng-template",22),o.TgZ(68,"div",25),o.TgZ(69,"h2"),o.TgZ(70,"strong"),o._uU(71,"Security"),o.qZA(),o._uU(72," Settings"),o.qZA(),o.qZA(),o.TgZ(73,"div",26),o.TgZ(74,"form",31),o.TgZ(75,"div",32),o.TgZ(76,"mat-form-field",33),o.TgZ(77,"mat-label"),o._uU(78,"Username"),o.qZA(),o._UZ(79,"input",34),o.qZA(),o.TgZ(80,"mat-form-field",33),o.TgZ(81,"mat-label"),o._uU(82,"Current Password"),o.qZA(),o._UZ(83,"input",35),o.qZA(),o.TgZ(84,"mat-form-field",33),o.TgZ(85,"mat-label"),o._uU(86,"New Password"),o.qZA(),o._UZ(87,"input",36),o.qZA(),o.qZA(),o.TgZ(88,"button",37),o.NdJ("click",function(){return t.updateUserCredentials()}),o._uU(89,"Save"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(90,"div",25),o.TgZ(91,"h2"),o.TgZ(92,"strong"),o._uU(93,"Account"),o.qZA(),o._uU(94," Settings"),o.qZA(),o.qZA(),o.TgZ(95,"div",26),o.TgZ(96,"form",31),o.TgZ(97,"div",10),o.TgZ(98,"div",38),o.TgZ(99,"div",39),o.TgZ(100,"mat-form-field",33),o.TgZ(101,"mat-label"),o._uU(102,"Name"),o.qZA(),o._UZ(103,"input",40),o.qZA(),o.qZA(),o.qZA(),o.TgZ(104,"div",41),o.TgZ(105,"div",39),o.TgZ(106,"mat-form-field",33),o.TgZ(107,"mat-label"),o._uU(108,"Mobile No"),o.qZA(),o._UZ(109,"input",42),o.qZA(),o.qZA(),o.qZA(),o.TgZ(110,"div",41),o.TgZ(111,"div",39),o.TgZ(112,"mat-form-field",33),o.TgZ(113,"mat-label"),o._uU(114,"Email Id"),o.qZA(),o._UZ(115,"input",43),o.qZA(),o.qZA(),o.qZA(),o.TgZ(116,"div",38),o.TgZ(117,"div",39),o.TgZ(118,"mat-form-field",44),o.TgZ(119,"ngx-mat-file-input",45),o.NdJ("change",function(e){return t.onFileChangeProfile(e)}),o.qZA(),o.TgZ(120,"mat-icon",46),o._uU(121,"cloud_upload"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(122,"div",38),o.TgZ(123,"button",47),o.NdJ("click",function(){return t.updateAccountDetails()}),o._uU(124,"Save Changes"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(19),o.Oqu(null==t.userDetails?null:t.userDetails.name),o.xp6(2),o.Oqu(null==t.userDetails?null:t.userDetails.role),o.xp6(1),o.s9C("src",t.userImg?t.apiURL+"/"+t.userImg:"assets/images/nouser.png",o.LSH),o.xp6(5),o.Oqu(null==t.userDetails?null:t.userDetails.mobile_no),o.xp6(5),o.Oqu(null==t.userDetails?null:t.userDetails.email_id),o.xp6(19),o.Oqu(null==t.userDetails?null:t.userDetails.name),o.xp6(6),o.Oqu(null==t.userDetails?null:t.userDetails.mobile_no),o.xp6(6),o.Oqu(null==t.userDetails?null:t.userDetails.email_id),o.xp6(1),o.Q6J("ngIf","Admin"==(null==t.userDetails?null:t.userDetails.role)),o.xp6(1),o.Q6J("ngIf","Admin"==(null==t.userDetails?null:t.userDetails.role)),o.xp6(9),o.Q6J("formGroup",t.securityForm),o.xp6(14),o.Q6J("disabled",!t.securityForm.valid),o.xp6(8),o.Q6J("formGroup",t.accountsForm))},directives:[Z.Ro,c.SP,c.uX,c.uD,s.O5,u._Y,u.JL,u.sg,g.KE,g.hX,d.Nt,u.Fj,u.JJ,u.u,m.lW,p.Yh,h.Hw,g.R9],styles:[""]}),e})()}];let v=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[r.Bz.forChild(_)],r.Bz]}),e})();var b=i(63589),U=i(13841),w=i(97070),D=i(40994);let y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[s.ez,v,w.Tx,m.ot,h.Ps,p.Ad,u.u5,u.UX,U.LD,b.ZX,d.c,g.lN,D.p9,c.Nh,Z.ef]]}),e})()}}]);