(self.webpackChunksmart=self.webpackChunksmart||[]).push([[98],{28098:function(e,t,i){"use strict";i.r(t),i.d(t,{ScheduleModule:function(){return V}});var s=i(61116),a=i(31041),n=i(39199),r=i(5609),d=i(13070),l=i(9550),o=i(63589),c=i(84369),h=i(77307),u=i(13841),g=i(92935),p=i(59241),v=i(37112),Z=i(69024),m=i(40994),f=i(1325),A=i(57173),_=i(97070),T=i(87672),w=i(44716),q=i(51601),D=i(35729),b=i(35366),E=i(97425),S=i(42693),y=i(89647),C=i(51816),L=i(529),k=i(91681);let x=(()=>{class e{constructor(e){this.http=e,this.API_URL="assets/data/calendar.json",this.httpOptions={headers:new S.WM({"Content-Type":"application/json"})},this.dataChange=new E.X([])}get data(){return this.dataChange.value}getDialogData(){return this.dialogData}getAllCalendars(){return this.http.get(this.API_URL).pipe((0,C.K)(this.errorHandler))}deleteCalendar(e){this.dialogData=e}errorHandler(e){let t="";return t=e.error instanceof ErrorEvent?e.error.message:`Error Code: ${e.status}\nMessage: ${e.message}`,console.log(t),(0,y._)(t)}getScheduleList(){return this.http.get(`${L.N.apiUrl}/webRoutes/getScheduleList`).pipe((0,k.U)(e=>e))}getScheduleDetailsForInstructor(e,t){return this.http.post(`${L.N.apiUrl}/instructor/getScheduleDetailsForInstructor`,{client:e,authToken:t}).pipe((0,k.U)(e=>e))}}return e.\u0275fac=function(t){return new(t||e)(b.LFG(S.eN))},e.\u0275prov=b.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var I=i(50518),U=i(60649);let M=(()=>{class e{constructor(e,t,i,s,n){this.dialogRef=e,this.data=t,this.calendarService=i,this.fb=s,this.toastrService=n,this.showDeleteBtn=!1,this.formControl=new a.NI("",[a.kI.required]),this.action=t.action,"edit"===this.action&&(this.dialogTitle=t.calendar.title,this.calendar=t.calendar),this.getScheduleList()}getErrorMessage(){return this.formControl.hasError("required")?"Required field":this.formControl.hasError("email")?"Not a valid email":""}onNoClick(){this.dialogRef.close()}getScheduleList(){this.calendarService.getScheduleList().subscribe(e=>{this.scheduleList=e.data,console.log("this.ViewAssignList====",this.ViewAssignList)})}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(g.so),b.Y36(g.WI),b.Y36(x),b.Y36(a.qu),b.Y36(I._W))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-form-dialog"]],decls:34,vars:21,consts:[[1,"addContainer"],[1,"modalHeader"],[1,"editRowModal"],[1,"modalHeader","clearfix"],[1,"modal-about"],[1,"font-weight-bold","p-t-5","p-l-10","font-17"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","",2,"overflow","hidden"],[1,"row"],[1,"list-group","list-group-unbordered"],[1,"list-group-item"],[1,"profile-desc-item","float-end"]],template:function(e,t){1&e&&(b.TgZ(0,"div",0),b.TgZ(1,"div",1),b.TgZ(2,"div",2),b.TgZ(3,"div",3),b.TgZ(4,"div",4),b.TgZ(5,"div",5),b._uU(6),b.ALo(7,"translate"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(8,"button",6),b.NdJ("click",function(){return t.dialogRef.close()}),b.TgZ(9,"mat-icon"),b._uU(10,"close"),b.qZA(),b.qZA(),b.qZA(),b.TgZ(11,"div",7),b.TgZ(12,"div",8),b.TgZ(13,"ul",9),b.TgZ(14,"li",10),b.TgZ(15,"b"),b._uU(16),b.ALo(17,"translate"),b.qZA(),b.TgZ(18,"div",11),b._uU(19),b.qZA(),b.qZA(),b.TgZ(20,"li",10),b.TgZ(21,"b"),b._uU(22),b.ALo(23,"translate"),b.qZA(),b.TgZ(24,"div",11),b._uU(25),b.ALo(26,"date"),b.qZA(),b.qZA(),b.TgZ(27,"li",10),b.TgZ(28,"b"),b._uU(29),b.ALo(30,"translate"),b.qZA(),b.TgZ(31,"div",11),b._uU(32),b.ALo(33,"date"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA()),2&e&&(b.xp6(6),b.hij(" ",b.lcZ(7,7,"SCHEDULE.VIEWTITLE"),""),b.xp6(10),b.hij("",b.lcZ(17,9,"SCHEDULE.LIST.SCHEDULE")," "),b.xp6(3),b.Oqu(t.calendar.title),b.xp6(3),b.hij("",b.lcZ(23,11,"SCHEDULE.LIST.START-DATE")," "),b.xp6(3),b.hij(" ",b.xi3(26,13,t.calendar.startDate,"dd-MM-yyyy hh:mm a"),""),b.xp6(4),b.hij("",b.lcZ(30,16,"SCHEDULE.LIST.END-DATE")," "),b.xp6(3),b.hij(" ",b.xi3(33,18,t.calendar.endDate,"dd-MM-yyyy hh:mm a"),""))},directives:[c.lW,h.Hw,g.xY],pipes:[U.X$,s.uU],styles:[""]}),e})();class N{constructor(e){this.id=e.id||this.getRandomID(),this.lead_time=e.lead_time||"",this.schedule_name=e.schedule_name||"",this.schedule_owner=e.schedule_owner||"",this.schedule_view=e.schedule_view||"",this.schedule_view_assignment=e.schedule_view_assignment||"",this.startDate=(0,s.p6)(new Date,"yyyy-MM-dd","en")||"",this.endDate=(0,s.p6)(new Date,"yyyy-MM-dd","en")||""}getRandomID(){const e=()=>(65536*(1+Math.random())|0).toString(16).substring(1);return e()+e()}}var H=i(60352),P=i(11757);const F=["calendar"];function O(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"li"),b.TgZ(1,"mat-checkbox",18),b.NdJ("change",function(t){const i=b.CHM(e).$implicit;return b.oxw().changeCategory(t,i)}),b._uU(2),b.qZA(),b.qZA()}if(2&e){const e=t.$implicit;b.xp6(1),b.Q6J("checked",e.checked)("value",e.status),b.xp6(1),b.hij(" ",e.status," ")}}const R=[{path:"",component:(()=>{class e extends H.n{constructor(e,t,i,s){super(),this.fb=e,this.dialog=t,this.calendarService=i,this.snackBar=s,this.scheduleList=[],this.filterOptions="All",this.calendarData=[],this.filterItems=[],this.calendarOptions={headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},initialView:"dayGridMonth",weekends:!0,editable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,eventClick:this.handleEventClick.bind(this),eventsSet:this.handleEvents.bind(this)},this.dialogTitle="Add New Event",this.calendar=new N({}),this.addCusForm=this.createCalendarForm(this.calendar),this.getScheduleList()}ngOnInit(){this.getScheduleDetails()}getScheduleDetails(){this.calendarData=[],this.calendarService.getScheduleDetailsForInstructor(sessionStorage.client,sessionStorage.currentUser).subscribe(e=>{console.log("----res['data']----",e.data);for(let t=0;t<e.data.length;t++)this.scheduleList.push({status:e.data[t].status,checked:!0}),this.filterItems.push(e.data[t].status),this.calendarData.push({title:e.data[t].status,start:new Date(e.data[t].startDate),end:new Date(e.data[t].endDate),className:e.data[t].schedule_color,id:e.data[t].id,lead_time:e.data[t].lead_time,schedule_name:e.data[t].schedule_id,schedule_view:e.data[t].schedule_view,schedule_view_assignment:e.data[t].schedule_assignment,startDate:new Date(e.data[t].startDate),endDate:new Date(e.data[t].endDate)});this.calendarEvents=this.calendarData,this.tempEvents=this.calendarEvents,this.calendarOptions.events=this.calendarEvents})}getScheduleList(){this.calendarService.getScheduleList().subscribe(e=>{})}changeCategory(e,t){console.log("---------",t),e.checked?this.filterItems.push(t.status):this.filterItems.splice(this.filterItems.indexOf(t.status),1),this.filterEvent(this.filterItems)}filterEvent(e){const t=this.calendarEvents.filter(t=>e.map(e=>e).includes(t.title));this.calendarOptions.events=t}handleEventClick(e){this.eventClick(e)}eventClick(e){console.log("row===",e.event._def.extendedProps);const t={id:e.event.id,title:e.event.title,lead_time:e.event._def.extendedProps.lead_time,schedule_name:e.event._def.extendedProps.schedule_name,schedule_view:e.event._def.extendedProps.schedule_view,schedule_view_assignment:e.event._def.extendedProps.schedule_view_assignment,startDate:e.event.start,endDate:e.event.end};let i;i="true"===localStorage.getItem("isRtl")?"rtl":"ltr";const s=this.dialog.open(M,{data:{calendar:t,action:"edit"},direction:i});this.subs.sink=s.afterClosed().subscribe(e=>{"submit"===e?(this.getScheduleDetails(),this.addCusForm.reset()):"delete"===e&&this.getScheduleDetails()})}handleEvents(e){}createCalendarForm(e){return this.fb.group({id:[e.id],lead_time:[e.lead_time,[a.kI.required,a.kI.pattern("[a-zA-Z]+([a-zA-Z ]+)*")]],schedule_name:[e.schedule_name],schedule_view:[e.schedule_view],schedule_view_assignment:[e.schedule_view_assignment],startDate:[e.startDate,[a.kI.required]],endDate:[e.endDate,[a.kI.required]]})}showNotification(e,t,i,s){this.snackBar.open(t,"",{duration:2e3,verticalPosition:i,horizontalPosition:s,panelClass:e})}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(a.qu),b.Y36(g.uw),b.Y36(x),b.Y36(o.ux))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-add-schedule"]],viewQuery:function(e,t){if(1&e&&b.Gf(F,5),2&e){let e;b.iGM(e=b.CRH())&&(t.calendar=e.first)}},features:[b.qOj],decls:23,vars:5,consts:[[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"col-md-12","col-sm-12"],[1,"card"],[1,"card-body"],[1,"col-md-2","col-sm-12","p-l-30"],[1,"m-b-25"],[1,"filter-container"],[4,"ngFor","ngForOf"],[1,"col-md-10","col-sm-12"],[1,"panel-body"],[3,"options"],["color","primary",3,"checked","value","change"]],template:function(e,t){1&e&&(b.TgZ(0,"section",0),b.TgZ(1,"div",1),b.TgZ(2,"div",2),b.TgZ(3,"div",3),b.TgZ(4,"div",4),b.TgZ(5,"ul",5),b.TgZ(6,"li",6),b.TgZ(7,"h4",7),b._uU(8),b.ALo(9,"translate"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(10,"div",3),b.TgZ(11,"div",8),b.TgZ(12,"div",9),b.TgZ(13,"div",10),b.TgZ(14,"div",3),b.TgZ(15,"div",11),b._UZ(16,"div",12),b.TgZ(17,"div",13),b.TgZ(18,"ul"),b.YNc(19,O,3,3,"li",14),b.qZA(),b.qZA(),b.qZA(),b.TgZ(20,"div",15),b.TgZ(21,"div",16),b._UZ(22,"full-calendar",17),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA()),2&e&&(b.xp6(8),b.Oqu(b.lcZ(9,3,"SCHEDULE.TITLE")),b.xp6(11),b.Q6J("ngForOf",t.scheduleList),b.xp6(3),b.Q6J("options",t.calendarOptions))},directives:[s.sg,P.woE,m.oG],pipes:[U.X$],styles:[""]}),e})()}];let j=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=b.oAB({type:e}),e.\u0275inj=b.cJS({imports:[[D.Bz.forChild(R)],D.Bz]}),e})();var Y=i(79961),z=i(46739),B=i(17647),G=i(95522),J=i(37192),X=i(279),$=i(9451),W=i(85256),Q=i(52352);P.z1U.registerPlugins([X.ZP,$.ZP,W.Z,Q.ZP]);let V=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=b.oAB({type:e}),e.\u0275inj=b.cJS({providers:[x],imports:[[B.xD,G.Hi,z.d,s.ez,a.u5,a.UX,n.p0,r.TU,d.lN,l.c,o.ZX,c.ot,h.Ps,g.Is,p.JX,v.g0,u.LD,Z.FA,m.p9,A.Nh,_.Tx,f.Ad,j,T.Cq,w.T5,q.yI,U.aw,Y.Bb,P.z1U,J.Ll,J.x]]}),e})()}}]);