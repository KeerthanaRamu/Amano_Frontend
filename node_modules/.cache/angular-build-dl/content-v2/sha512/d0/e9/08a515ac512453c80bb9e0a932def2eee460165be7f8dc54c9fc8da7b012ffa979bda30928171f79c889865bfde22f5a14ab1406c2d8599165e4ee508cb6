!function(){function e(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var i,a,n=[],u=!0,o=!1;try{for(r=r.call(e);!(u=(i=r.next()).done)&&(n.push(i.value),!t||n.length!==t);u=!0);}catch(s){o=!0,a=s}finally{try{u||null==r.return||r.return()}finally{if(o)throw a}}return n}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return t(e,r);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(self.webpackChunksmart=self.webpackChunksmart||[]).push([[278],{47278:function(t,a,n){"use strict";n.r(a),n.d(a,{ProfileModule:function(){return C}});var u=n(61116),o=n(35729),s=n(31041),l=n(35366),c=n(28086),Z=n(50518),m=n(57173),d=n(13070),g=n(9550),f=n(84369),p=n(1325),A=n(77307);function q(e,t){1&e&&(l.TgZ(0,"mat-icon",46),l._uU(1,"face"),l.qZA(),l._uU(2," About Me "))}function v(e,t){1&e&&(l.TgZ(0,"div",23),l.TgZ(1,"h2"),l.TgZ(2,"strong"),l._uU(3,"Update Logo"),l.qZA(),l.qZA(),l.qZA())}function T(e,t){if(1&e){var r=l.EpF();l.TgZ(0,"div",24),l.TgZ(1,"div",30),l.TgZ(2,"mat-form-field",42),l.TgZ(3,"ngx-mat-file-input",47),l.NdJ("change",function(e){return l.CHM(r),l.oxw().onFileChange(e)}),l.qZA(),l.TgZ(4,"mat-icon",44),l._uU(5,"cloud_upload"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(6,"button",45),l.NdJ("click",function(){return l.CHM(r),l.oxw().updateClientLogo()}),l._uU(7,"Save"),l.qZA(),l.qZA()}}function h(e,t){1&e&&(l.TgZ(0,"mat-icon",46),l._uU(1,"settings"),l.qZA(),l._uU(2," Settings "))}var _,b,U=[{path:"",component:(_=function(){function t(e,i,a){r(this,t),this.fb=e,this.authService=i,this.toastrService=a}var a,n,u;return a=t,(n=[{key:"ngOnInit",value:function(){var e=this;this.securityForm=this.fb.group({user_name:["",s.kI.required],new_username:["",s.kI.required],password:["",s.kI.required],current_password:["",s.kI.required],new_password:["",s.kI.required]}),this.accountsForm=this.fb.group({name:["",s.kI.required],mobile_no:["",s.kI.required],email_id:["",s.kI.required],profile:[""]}),this.authService.currentUserValue(sessionStorage.currentUser).subscribe(function(t){e.userDetails=t,e.securityForm.patchValue({user_name:e.userDetails.user_name,new_username:e.userDetails.user_name,password:e.userDetails.password}),e.accountsForm.patchValue({name:e.userDetails.name,mobile_no:e.userDetails.mobile_no,email_id:e.userDetails.email_id,profile:e.userDetails.img})})}},{key:"onFileChange",value:function(t){var r=this,i=new FileReader;if(t.target.files&&t.target.files.length){var a=e(t.target.files,1)[0];i.readAsDataURL(a),i.onload=function(){r.newLogo=i.result}}}},{key:"onFileChangeProfile",value:function(t){var r=this,i=new FileReader;if(t.target.files&&t.target.files.length){var a=e(t.target.files,1)[0];i.readAsDataURL(a),i.onload=function(){r.accountsForm.patchValue({profile:i.result})}}}},{key:"updateClientLogo",value:function(){var e=this;this.newLogo&&this.authService.updateClientLogo(sessionStorage.client,this.newLogo).subscribe(function(t){e.authService.currentUserSubject.next(!0),e.toastrService.success("Updated Successfully!!!")})}},{key:"updateUserCredentials",value:function(){var e=this;this.securityForm.value.password==this.securityForm.value.current_password?this.authService.updateUserCredentials(this.securityForm.value,sessionStorage.currentUser).subscribe(function(t){"Success"==t.status?(e.authService.currentUserSubject.next(!0),e.toastrService.success("Updated Successfully!!!")):e.toastrService.error("User Name Already Exists!!")}):this.toastrService.error("Current Password is not Correct!!")}},{key:"updateAccountDetails",value:function(){var e=this;this.authService.updateAccountDetails(this.accountsForm.value,sessionStorage.currentUser).subscribe(function(t){e.authService.currentUserSubject.next(!0),e.toastrService.success("Updated Successfully!!!"),e.authService.currentUserValue(sessionStorage.currentUser).subscribe(function(t){e.userDetails=t,e.securityForm.patchValue({user_name:e.userDetails.user_name,new_username:e.userDetails.user_name,password:e.userDetails.password}),e.accountsForm.patchValue({name:e.userDetails.name,mobile_no:e.userDetails.mobile_no,email_id:e.userDetails.email_id,profile:e.userDetails.img})})})}}])&&i(a.prototype,n),u&&i(a,u),t}(),_.\u0275fac=function(e){return new(e||_)(l.Y36(s.qu),l.Y36(c.e),l.Y36(Z._W))},_.\u0275cmp=l.Xpm({type:_,selectors:[["app-profile"]],decls:122,vars:13,consts:[[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"row","clearfix"],[1,"col-lg-4","col-md-12"],[1,"card"],[1,"m-b-20"],[1,"contact-grid"],[1,"profile-header","bg-dark"],[1,"user-name"],[1,"name-center"],["alt","",1,"user-img",2,"width","100%","height","100px",3,"src"],[1,"phone"],[1,"material-icons"],[1,"col-lg-8","col-md-12"],["mat-tab-label",""],[1,"col-lg-12","col-md-12","col-sm-12"],[1,"project_widget"],[1,"header"],[1,"body"],[1,"col-md-3","col-6","b-r"],[1,"text-muted"],["class","header",4,"ngIf"],["class","body",4,"ngIf"],[3,"formGroup"],[1,"example-container"],["appearance","fill",1,"example-full-width"],["matInput","","formControlName","new_username"],["matInput","","type","password","formControlName","current_password"],["matInput","","type","password","formControlName","new_password"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"col-md-12"],[1,"form-group"],["matInput","","formControlName","name"],[1,"col-lg-6","col-md-12"],["matInput","","formControlName","mobile_no"],["matInput","","formControlName","email_id"],[1,"example-full-width"],["placeholder","Profile",3,"change"],["matSuffix",""],["mat-raised-button","","color","primary",3,"click"],[1,"example-tab-icon","msr-2"],["placeholder","Company Logo",3,"change"]],template:function(e,t){1&e&&(l.TgZ(0,"section",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"div",4),l.TgZ(5,"ul",5),l.TgZ(6,"li",6),l.TgZ(7,"h4",7),l._uU(8,"Profile"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(9,"div",8),l.TgZ(10,"div",9),l.TgZ(11,"div",10),l.TgZ(12,"div",11),l.TgZ(13,"div",12),l.TgZ(14,"div",13),l.TgZ(15,"div",14),l._uU(16),l.qZA(),l.TgZ(17,"div",15),l._uU(18),l.qZA(),l.qZA(),l._UZ(19,"img",16),l.TgZ(20,"div"),l.TgZ(21,"span",17),l.TgZ(22,"i",18),l._uU(23,"phone"),l.qZA(),l._uU(24),l.qZA(),l.qZA(),l.TgZ(25,"div"),l.TgZ(26,"span",17),l.TgZ(27,"i",18),l._uU(28,"email"),l.qZA(),l._uU(29),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(30,"div",19),l.TgZ(31,"div",10),l.TgZ(32,"mat-tab-group"),l.TgZ(33,"mat-tab"),l.YNc(34,q,3,0,"ng-template",20),l.TgZ(35,"div",21),l.TgZ(36,"div",22),l.TgZ(37,"div",23),l.TgZ(38,"h2"),l.TgZ(39,"strong"),l._uU(40,"About"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(41,"div",24),l.TgZ(42,"div",3),l.TgZ(43,"div",25),l.TgZ(44,"strong"),l._uU(45,"Full Name"),l.qZA(),l._UZ(46,"br"),l.TgZ(47,"p",26),l._uU(48),l.qZA(),l.qZA(),l.TgZ(49,"div",25),l.TgZ(50,"strong"),l._uU(51,"Mobile"),l.qZA(),l._UZ(52,"br"),l.TgZ(53,"p",26),l._uU(54),l.qZA(),l.qZA(),l.TgZ(55,"div",25),l.TgZ(56,"strong"),l._uU(57,"Email"),l.qZA(),l._UZ(58,"br"),l.TgZ(59,"p",26),l._uU(60),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(61,v,4,0,"div",27),l.YNc(62,T,8,0,"div",28),l.qZA(),l.qZA(),l.qZA(),l.TgZ(63,"mat-tab"),l.YNc(64,h,3,0,"ng-template",20),l.TgZ(65,"div",23),l.TgZ(66,"h2"),l.TgZ(67,"strong"),l._uU(68,"Security"),l.qZA(),l._uU(69," Settings"),l.qZA(),l.qZA(),l.TgZ(70,"div",24),l.TgZ(71,"form",29),l.TgZ(72,"div",30),l.TgZ(73,"mat-form-field",31),l.TgZ(74,"mat-label"),l._uU(75,"Username"),l.qZA(),l._UZ(76,"input",32),l.qZA(),l.TgZ(77,"mat-form-field",31),l.TgZ(78,"mat-label"),l._uU(79,"Current Password"),l.qZA(),l._UZ(80,"input",33),l.qZA(),l.TgZ(81,"mat-form-field",31),l.TgZ(82,"mat-label"),l._uU(83,"New Password"),l.qZA(),l._UZ(84,"input",34),l.qZA(),l.qZA(),l.TgZ(85,"button",35),l.NdJ("click",function(){return t.updateUserCredentials()}),l._uU(86,"Save"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(87,"div",23),l.TgZ(88,"h2"),l.TgZ(89,"strong"),l._uU(90,"Account"),l.qZA(),l._uU(91," Settings"),l.qZA(),l.qZA(),l.TgZ(92,"div",24),l.TgZ(93,"form",29),l.TgZ(94,"div",8),l.TgZ(95,"div",36),l.TgZ(96,"div",37),l.TgZ(97,"mat-form-field",31),l.TgZ(98,"mat-label"),l._uU(99,"Name"),l.qZA(),l._UZ(100,"input",38),l.qZA(),l.qZA(),l.qZA(),l.TgZ(101,"div",39),l.TgZ(102,"div",37),l.TgZ(103,"mat-form-field",31),l.TgZ(104,"mat-label"),l._uU(105,"Mobile No"),l.qZA(),l._UZ(106,"input",40),l.qZA(),l.qZA(),l.qZA(),l.TgZ(107,"div",39),l.TgZ(108,"div",37),l.TgZ(109,"mat-form-field",31),l.TgZ(110,"mat-label"),l._uU(111,"Email Id"),l.qZA(),l._UZ(112,"input",41),l.qZA(),l.qZA(),l.qZA(),l.TgZ(113,"div",36),l.TgZ(114,"div",37),l.TgZ(115,"mat-form-field",42),l.TgZ(116,"ngx-mat-file-input",43),l.NdJ("change",function(e){return t.onFileChangeProfile(e)}),l.qZA(),l.TgZ(117,"mat-icon",44),l._uU(118,"cloud_upload"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(119,"div",36),l.TgZ(120,"button",45),l.NdJ("click",function(){return t.updateAccountDetails()}),l._uU(121,"Save Changes"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(16),l.Oqu(t.userDetails.name),l.xp6(2),l.Oqu(t.userDetails.role),l.xp6(1),l.s9C("src",t.userDetails.img?t.userDetails.img:"assets/images/nouser.png",l.LSH),l.xp6(5),l.Oqu(t.userDetails.mobile_no),l.xp6(5),l.Oqu(t.userDetails.email_id),l.xp6(19),l.Oqu(t.userDetails.name),l.xp6(6),l.Oqu(t.userDetails.mobile_no),l.xp6(6),l.Oqu(t.userDetails.email_id),l.xp6(1),l.Q6J("ngIf","Admin"==t.userDetails.role),l.xp6(1),l.Q6J("ngIf","Admin"==t.userDetails.role),l.xp6(9),l.Q6J("formGroup",t.securityForm),l.xp6(14),l.Q6J("disabled",!t.securityForm.valid),l.xp6(8),l.Q6J("formGroup",t.accountsForm))},directives:[m.SP,m.uX,m.uD,u.O5,s._Y,s.JL,s.sg,d.KE,d.hX,g.Nt,s.Fj,s.JJ,s.u,f.lW,p.Yh,A.Hw,d.R9],styles:[""]}),_)}],y=function(){var e=function e(){r(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[o.Bz.forChild(U)],o.Bz]}),e}(),w=n(63589),S=n(13841),D=n(97070),x=n(40994),C=((b=function e(){r(this,e)}).\u0275fac=function(e){return new(e||b)},b.\u0275mod=l.oAB({type:b}),b.\u0275inj=l.cJS({imports:[[u.ez,y,D.Tx,f.ot,A.Ps,p.Ad,s.u5,s.UX,S.LD,w.ZX,g.c,d.lN,x.p9,m.Nh]]}),b)}}])}();