(self.webpackChunksmart=self.webpackChunksmart||[]).push([[5198],{25198:function(t,e,a){"use strict";a.r(e),a.d(e,{ReportsModule:function(){return k}});var r=a(61116),n=a(31041),i=a(39199),o=a(5609),l=a(13070),s=a(9550),c=a(84369),d=a(77307),m=a(92935),p=a(59241),u=a(69024),g=a(40994),h=a(97070),Z=a(87672),f=a(60649),T=a(79961),A=a(17647),b=a(31269),S=a(22797),w=a(7436),q=a(91681),x=a(529),v=a(35366),L=a(42693);let R=(()=>{class t{constructor(t){this.http=t}getCurrentDaySalesReport(){return this.http.get(`${x.N.apiUrl}/report/getCurrentDaySalesReport`).pipe((0,q.U)(t=>t))}}return t.\u0275fac=function(e){return new(e||t)(v.LFG(L.eN))},t.\u0275prov=v.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var C=a(35729),_=a(64762),E=a(59365),y=a(29609),D=a(50518);function N(t,e){if(1&t&&(v.TgZ(0,"td",37),v._UZ(1,"img",38),v.qZA()),2&t){const t=e.value;v.xp6(1),v.s9C("src",t||"assets/images/nologo.png",v.LSH)}}const U=[{path:"sales-report",component:(()=>{class t{constructor(t,e,a,r,n){this.reportService=t,this.toastrService=e,this.fb=a,this.router=r,this.spinner=n,this.columns=[{name:"Name"},{name:"NRIC Number"},{name:"Passport Number"},{name:"Gender"},{name:"Mobile"},{name:"Email"},{name:"Status"}],this.data=[],this.filteredData=[],this.translateVal="ml"==localStorage.lang?"malay":"english",this.today=new Date,this.fileName="Sales-report-"+this.today+".xlsx"}ngOnInit(){this.getCurrentDaySalesReport()}refresh(){this.getCurrentDaySalesReport()}getCurrentDaySalesReport(){this.spinner.show(),this.reportService.getCurrentDaySalesReport().subscribe(t=>{this.spinner.hide();for(let e=0;e<t.data.length;e++)t.data[e].package_english=t.data[e]["package_"+this.translateVal],t.data[e].english=t.data[e][this.translateVal];this.data=t.data,this.filteredData=t.data})}filterDatatable(t){const e=t.target.value.toLowerCase(),a=this.columns.length,r=Object.keys(this.filteredData[0]);this.data=this.filteredData.filter(function(t){for(let n=0;n<a;n++)if(-1!==t[r[n]].toString().toLowerCase().indexOf(e)||!e)return!0}),this.table.offset=0}export(){if(this.filteredData.length>0){var t={fieldSeparator:",",quoteStrings:'"',decimalseparator:".",showLabels:!0,showTitle:!0,title:"Sales Report - "+y(new Date).format("YYYY-MM-DD"),useBom:!0,noDownload:!1,headers:["Student Name","NRIC Number","Passport Number","Transaction Number","Package","Payment Phase","Amount Paid"]};let e="Sales_Report_"+y(new Date).format("YYYY-MM-DD");console.log("this.filteredData========",this.filteredData,e);const a=this.filteredData.map(t=>{var e=(0,_._T)(t,["malay","package_malay","profile_img"]);return Object.assign({},e)});new E.J0(a,e,t)}}}return t.\u0275fac=function(e){return new(e||t)(v.Y36(R),v.Y36(D._W),v.Y36(n.qu),v.Y36(C.F0),v.Y36(b.t2))},t.\u0275cmp=v.Xpm({type:t,selectors:[["app-sales-report"]],viewQuery:function(t,e){if(1&t&&v.Gf(A.nE,5),2&t){let t;v.iGM(t=v.CRH())&&(e.table=t.first)}},decls:53,vars:43,consts:[["bdColor","rgba(51,51,51,0.8)","size","medium","color","#fff","type","ball-scale-multiple"],[2,"font-size","20px","color","white"],[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"col-md-12"],[1,"mt-5"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"body"],[1,"table-responsive"],[1,"materialTableHeader"],[1,"col-8"],[1,"col-2",2,"padding","10px"],["mat-raised-button","",1,"btn","btn-success",3,"click"],[1,"fas","fa-file-excel"],[1,"col-2"],[1,"header-buttons"],[1,"icon-button-demo"],["mat-mini-fab","","color","primary",3,"click"],[1,"col-white"],[1,"material",3,"rows","columns","sortType","columnMode","headerHeight","footerHeight","rowHeight","limit"],["table",""],["name","Image","sortable","false","prop","profile_img",3,"width"],["ngx-datatable-cell-template",""],["prop","name",3,"name","width"],["prop","nric_number",3,"name","width"],["prop","passport_number",3,"name","width"],["prop","enrollment_no",3,"name","width"],["prop","package_english",3,"name","width"],["prop","english",3,"name","width"],["prop","payment_amount",3,"name","width"],[1,"table-img","padding-0"],["width","40",3,"src"]],template:function(t,e){1&t&&(v.TgZ(0,"ngx-spinner",0),v.TgZ(1,"p",1),v._uU(2,"Loading..."),v.qZA(),v.qZA(),v.TgZ(3,"section",2),v.TgZ(4,"div",3),v.TgZ(5,"div",4),v.TgZ(6,"div",5),v.TgZ(7,"div",6),v.TgZ(8,"ul",7),v.TgZ(9,"li",8),v.TgZ(10,"h4",9),v._uU(11),v.ALo(12,"translate"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(13,"div",5),v.TgZ(14,"div",10),v.TgZ(15,"div",11),v.TgZ(16,"div",12),v.TgZ(17,"div",13),v.TgZ(18,"div",14),v.TgZ(19,"div",15),v.TgZ(20,"div",16),v.TgZ(21,"div",5),v._UZ(22,"div",17),v.TgZ(23,"div",18),v.TgZ(24,"button",19),v.NdJ("click",function(){return e.export()}),v._uU(25),v.ALo(26,"translate"),v._UZ(27,"i",20),v.qZA(),v.qZA(),v.TgZ(28,"div",21),v.TgZ(29,"ul",22),v.TgZ(30,"li"),v.TgZ(31,"div",23),v.TgZ(32,"button",24),v.NdJ("click",function(){return e.refresh()}),v.TgZ(33,"mat-icon",25),v._uU(34,"refresh "),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(35,"ngx-datatable",26,27),v.TgZ(37,"ngx-datatable-column",28),v.YNc(38,N,2,1,"ng-template",29),v.qZA(),v._UZ(39,"ngx-datatable-column",30),v.ALo(40,"translate"),v._UZ(41,"ngx-datatable-column",31),v.ALo(42,"translate"),v._UZ(43,"ngx-datatable-column",32),v.ALo(44,"translate"),v._UZ(45,"ngx-datatable-column",33),v.ALo(46,"translate"),v._UZ(47,"ngx-datatable-column",34),v.ALo(48,"translate"),v._UZ(49,"ngx-datatable-column",35),v.ALo(50,"translate"),v._UZ(51,"ngx-datatable-column",36),v.ALo(52,"translate"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA()),2&t&&(v.xp6(11),v.Oqu(v.lcZ(12,25,"SALES-REPORT.TITLE")),v.xp6(14),v.hij("",v.lcZ(26,27,"BUTTON.EXCEL-BTN")," "),v.xp6(10),v.Q6J("rows",e.data)("columns",e.columns)("sortType","multi")("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","60")("limit",10),v.xp6(2),v.Q6J("width",100),v.xp6(2),v.s9C("name",v.lcZ(40,29,"SALES-REPORT.LIST.STUDENT-NAME")),v.Q6J("width",130),v.xp6(2),v.s9C("name",v.lcZ(42,31,"SALES-REPORT.LIST.NRIC")),v.Q6J("width",130),v.xp6(2),v.s9C("name",v.lcZ(44,33,"SALES-REPORT.LIST.PASSPORT")),v.Q6J("width",200),v.xp6(2),v.s9C("name",v.lcZ(46,35,"SALES-REPORT.LIST.TRAN-NO")),v.Q6J("width",200),v.xp6(2),v.s9C("name",v.lcZ(48,37,"SALES-REPORT.LIST.PACKAGE")),v.Q6J("width",200),v.xp6(2),v.s9C("name",v.lcZ(50,39,"SALES-REPORT.LIST.PAYMENT-PHASE")),v.Q6J("width",200),v.xp6(2),v.s9C("name",v.lcZ(52,41,"SALES-REPORT.LIST.AMOUNT-PAID")),v.Q6J("width",200))},directives:[b.Ro,c.lW,d.Hw,A.nE,A.UC,A.vq],pipes:[f.X$],styles:[""]}),t})()}];let P=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=v.oAB({type:t}),t.\u0275inj=v.cJS({imports:[[C.Bz.forChild(U)],C.Bz]}),t})(),k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=v.oAB({type:t}),t.\u0275inj=v.cJS({providers:[R],imports:[[b.ef,S.QW,w.Fk,A.xD,r.ez,n.u5,n.UX,i.p0,o.TU,l.lN,s.c,c.ot,d.Ps,m.Is,p.JX,u.FA,g.p9,h.Tx,Z.Cq,f.aw,T.Bb,P]]}),t})()}}]);