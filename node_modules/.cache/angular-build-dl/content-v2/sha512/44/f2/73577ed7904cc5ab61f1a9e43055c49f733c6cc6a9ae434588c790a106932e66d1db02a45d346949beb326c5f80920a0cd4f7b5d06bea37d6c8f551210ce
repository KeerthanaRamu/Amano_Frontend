!function(){function e(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var i,a,n=[],u=!0,o=!1;try{for(r=r.call(e);!(u=(i=r.next()).done)&&(n.push(i.value),!t||n.length!==t);u=!0);}catch(s){o=!0,a=s}finally{try{u||null==r.return||r.return()}finally{if(o)throw a}}return n}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return t(e,r);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(self.webpackChunksmart=self.webpackChunksmart||[]).push([[7278],{47278:function(t,a,n){"use strict";n.r(a),n.d(a,{ProfileModule:function(){return I}});var u=n(61116),o=n(35729),s=n(529),l=n(31041),c=n(35366),Z=n(28086),g=n(50518),m=n(31269),d=n(57173),p=n(13070),f=n(9550),A=n(84369),q=n(1325),h=n(77307);function v(e,t){1&e&&(c.TgZ(0,"mat-icon",48),c._uU(1,"face"),c.qZA(),c._uU(2," About Me "))}function T(e,t){1&e&&(c.TgZ(0,"div",25),c.TgZ(1,"h2"),c.TgZ(2,"strong"),c._uU(3,"Update Logo"),c.qZA(),c.qZA(),c.qZA())}function _(e,t){if(1&e){var r=c.EpF();c.TgZ(0,"div",26),c.TgZ(1,"div",32),c.TgZ(2,"mat-form-field",44),c.TgZ(3,"ngx-mat-file-input",49),c.NdJ("change",function(e){return c.CHM(r),c.oxw().onFileChange(e)}),c.qZA(),c.TgZ(4,"mat-icon",46),c._uU(5,"cloud_upload"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"button",47),c.NdJ("click",function(){return c.CHM(r),c.oxw().updateClientLogo()}),c._uU(7,"Save"),c.qZA(),c.qZA()}}function b(e,t){1&e&&(c.TgZ(0,"mat-icon",48),c._uU(1,"settings"),c.qZA(),c._uU(2," Settings "))}var U,y,w=[{path:"",component:(U=function(){function t(e,i,a,n){r(this,t),this.fb=e,this.authService=i,this.toastrService=a,this.spinner=n,this.apiURL=s.N.apiUrl}var a,n,u;return a=t,(n=[{key:"ngOnInit",value:function(){var e=this;this.securityForm=this.fb.group({user_name:["",l.kI.required],new_username:["",l.kI.required],password:["",l.kI.required],current_password:["",l.kI.required],new_password:["",l.kI.required]}),this.accountsForm=this.fb.group({name:["",l.kI.required],mobile_no:["",l.kI.required],email_id:["",l.kI.required],profile:[""],profile_type:[""]}),this.authService.checkUserLoggedIn().subscribe(function(t){e.userDetails=t.data,e.userImg=t.data.img,e.securityForm.patchValue({user_name:e.userDetails.user_name,new_username:e.userDetails.user_name,password:e.userDetails.password}),e.accountsForm.patchValue({name:e.userDetails.name,mobile_no:e.userDetails.mobile_no,email_id:e.userDetails.email_id,profile:e.userDetails.img})})}},{key:"onFileChange",value:function(t){if(new FileReader,t.target.files&&t.target.files.length){var r=e(t.target.files,1)[0];this.newLogo=r,this.newLogoType=t.target.files[0].type}}},{key:"onFileChangeProfile",value:function(t){if(new FileReader,t.target.files&&t.target.files.length){var r=e(t.target.files,1)[0];this.accountsForm.patchValue({profile:r,profile_type:t.target.files[0].type})}}},{key:"updateClientLogo",value:function(){var e=this;if(this.newLogo){var t=new FormData;t.append("newLogo",this.newLogo),t.append("newLogoType",this.newLogoType),this.authService.updateClientLogo(t).subscribe(function(t){e.authService.currentUserSubject.next(!0),e.toastrService.success("Updated Successfully!!!")})}}},{key:"updateUserCredentials",value:function(){var e=this;this.spinner.show(),this.securityForm.value.password==this.securityForm.value.current_password?this.authService.updateUserCredentials(this.securityForm.value).subscribe(function(t){e.spinner.hide(),"Success"==t.status?(e.authService.currentUserSubject.next(!0),e.toastrService.success("Updated Successfully!!!")):e.toastrService.error("User Name Already Exists!!")}):this.toastrService.error("Current Password is not Correct!!")}},{key:"updateAccountDetails",value:function(){var e=this;this.spinner.show();var t=new FormData;t.append("baseRoot","root/Employee/"+this.securityForm.value.new_username),t.append("accountData",JSON.stringify(this.accountsForm.value)),t.append("file",this.accountsForm.value.profile),this.authService.updateAccountDetails(t).subscribe(function(t){e.spinner.hide(),e.authService.currentUserSubject.next(!0),e.toastrService.success("Updated Successfully!!!"),e.authService.checkUserLoggedIn().subscribe(function(t){e.userDetails=t.data,e.securityForm.patchValue({user_name:e.userDetails.user_name,new_username:e.userDetails.user_name,password:e.userDetails.password}),e.accountsForm.patchValue({name:e.userDetails.name,mobile_no:e.userDetails.mobile_no,email_id:e.userDetails.email_id,profile:e.userDetails.img})})})}}])&&i(a.prototype,n),u&&i(a,u),t}(),U.\u0275fac=function(e){return new(e||U)(c.Y36(l.qu),c.Y36(Z.e),c.Y36(g._W),c.Y36(m.t2))},U.\u0275cmp=c.Xpm({type:U,selectors:[["app-profile"]],decls:125,vars:13,consts:[["bdColor","rgba(51,51,51,0.8)","size","medium","color","#fff","type","ball-scale-multiple"],[2,"font-size","20px","color","white"],[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"row","clearfix"],[1,"col-lg-4","col-md-12"],[1,"card"],[1,"m-b-20"],[1,"contact-grid"],[1,"profile-header","bg-dark"],[1,"user-name"],[1,"name-center"],["alt","",1,"user-img",2,"width","100%","height","100px",3,"src"],[1,"phone"],[1,"material-icons"],[1,"col-lg-8","col-md-12"],["mat-tab-label",""],[1,"col-lg-12","col-md-12","col-sm-12"],[1,"project_widget"],[1,"header"],[1,"body"],[1,"col-md-3","col-6","b-r"],[1,"text-muted"],["class","header",4,"ngIf"],["class","body",4,"ngIf"],[3,"formGroup"],[1,"example-container"],["appearance","fill",1,"example-full-width"],["matInput","","formControlName","new_username"],["matInput","","type","password","formControlName","current_password"],["matInput","","type","password","formControlName","new_password"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"col-md-12"],[1,"form-group"],["matInput","","formControlName","name"],[1,"col-lg-6","col-md-12"],["matInput","","formControlName","mobile_no"],["matInput","","formControlName","email_id"],[1,"example-full-width"],["placeholder","Profile",3,"change"],["matSuffix",""],["mat-raised-button","","color","primary",3,"click"],[1,"example-tab-icon","msr-2"],["placeholder","Company Logo",3,"change"]],template:function(e,t){1&e&&(c.TgZ(0,"ngx-spinner",0),c.TgZ(1,"p",1),c._uU(2,"Loading..."),c.qZA(),c.qZA(),c.TgZ(3,"section",2),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.TgZ(7,"div",6),c.TgZ(8,"ul",7),c.TgZ(9,"li",8),c.TgZ(10,"h4",9),c._uU(11,"Profile"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(12,"div",10),c.TgZ(13,"div",11),c.TgZ(14,"div",12),c.TgZ(15,"div",13),c.TgZ(16,"div",14),c.TgZ(17,"div",15),c.TgZ(18,"div",16),c._uU(19),c.qZA(),c.TgZ(20,"div",17),c._uU(21),c.qZA(),c.qZA(),c._UZ(22,"img",18),c.TgZ(23,"div"),c.TgZ(24,"span",19),c.TgZ(25,"i",20),c._uU(26,"phone"),c.qZA(),c._uU(27),c.qZA(),c.qZA(),c.TgZ(28,"div"),c.TgZ(29,"span",19),c.TgZ(30,"i",20),c._uU(31,"email"),c.qZA(),c._uU(32),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(33,"div",21),c.TgZ(34,"div",12),c.TgZ(35,"mat-tab-group"),c.TgZ(36,"mat-tab"),c.YNc(37,v,3,0,"ng-template",22),c.TgZ(38,"div",23),c.TgZ(39,"div",24),c.TgZ(40,"div",25),c.TgZ(41,"h2"),c.TgZ(42,"strong"),c._uU(43,"About"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(44,"div",26),c.TgZ(45,"div",5),c.TgZ(46,"div",27),c.TgZ(47,"strong"),c._uU(48,"Full Name"),c.qZA(),c._UZ(49,"br"),c.TgZ(50,"p",28),c._uU(51),c.qZA(),c.qZA(),c.TgZ(52,"div",27),c.TgZ(53,"strong"),c._uU(54,"Mobile"),c.qZA(),c._UZ(55,"br"),c.TgZ(56,"p",28),c._uU(57),c.qZA(),c.qZA(),c.TgZ(58,"div",27),c.TgZ(59,"strong"),c._uU(60,"Email"),c.qZA(),c._UZ(61,"br"),c.TgZ(62,"p",28),c._uU(63),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(64,T,4,0,"div",29),c.YNc(65,_,8,0,"div",30),c.qZA(),c.qZA(),c.qZA(),c.TgZ(66,"mat-tab"),c.YNc(67,b,3,0,"ng-template",22),c.TgZ(68,"div",25),c.TgZ(69,"h2"),c.TgZ(70,"strong"),c._uU(71,"Security"),c.qZA(),c._uU(72," Settings"),c.qZA(),c.qZA(),c.TgZ(73,"div",26),c.TgZ(74,"form",31),c.TgZ(75,"div",32),c.TgZ(76,"mat-form-field",33),c.TgZ(77,"mat-label"),c._uU(78,"Username"),c.qZA(),c._UZ(79,"input",34),c.qZA(),c.TgZ(80,"mat-form-field",33),c.TgZ(81,"mat-label"),c._uU(82,"Current Password"),c.qZA(),c._UZ(83,"input",35),c.qZA(),c.TgZ(84,"mat-form-field",33),c.TgZ(85,"mat-label"),c._uU(86,"New Password"),c.qZA(),c._UZ(87,"input",36),c.qZA(),c.qZA(),c.TgZ(88,"button",37),c.NdJ("click",function(){return t.updateUserCredentials()}),c._uU(89,"Save"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(90,"div",25),c.TgZ(91,"h2"),c.TgZ(92,"strong"),c._uU(93,"Account"),c.qZA(),c._uU(94," Settings"),c.qZA(),c.qZA(),c.TgZ(95,"div",26),c.TgZ(96,"form",31),c.TgZ(97,"div",10),c.TgZ(98,"div",38),c.TgZ(99,"div",39),c.TgZ(100,"mat-form-field",33),c.TgZ(101,"mat-label"),c._uU(102,"Name"),c.qZA(),c._UZ(103,"input",40),c.qZA(),c.qZA(),c.qZA(),c.TgZ(104,"div",41),c.TgZ(105,"div",39),c.TgZ(106,"mat-form-field",33),c.TgZ(107,"mat-label"),c._uU(108,"Mobile No"),c.qZA(),c._UZ(109,"input",42),c.qZA(),c.qZA(),c.qZA(),c.TgZ(110,"div",41),c.TgZ(111,"div",39),c.TgZ(112,"mat-form-field",33),c.TgZ(113,"mat-label"),c._uU(114,"Email Id"),c.qZA(),c._UZ(115,"input",43),c.qZA(),c.qZA(),c.qZA(),c.TgZ(116,"div",38),c.TgZ(117,"div",39),c.TgZ(118,"mat-form-field",44),c.TgZ(119,"ngx-mat-file-input",45),c.NdJ("change",function(e){return t.onFileChangeProfile(e)}),c.qZA(),c.TgZ(120,"mat-icon",46),c._uU(121,"cloud_upload"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(122,"div",38),c.TgZ(123,"button",47),c.NdJ("click",function(){return t.updateAccountDetails()}),c._uU(124,"Save Changes"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(19),c.Oqu(null==t.userDetails?null:t.userDetails.name),c.xp6(2),c.Oqu(null==t.userDetails?null:t.userDetails.role),c.xp6(1),c.s9C("src",t.userImg?t.apiURL+"/"+t.userImg:"assets/images/nouser.png",c.LSH),c.xp6(5),c.Oqu(null==t.userDetails?null:t.userDetails.mobile_no),c.xp6(5),c.Oqu(null==t.userDetails?null:t.userDetails.email_id),c.xp6(19),c.Oqu(null==t.userDetails?null:t.userDetails.name),c.xp6(6),c.Oqu(null==t.userDetails?null:t.userDetails.mobile_no),c.xp6(6),c.Oqu(null==t.userDetails?null:t.userDetails.email_id),c.xp6(1),c.Q6J("ngIf","Admin"==(null==t.userDetails?null:t.userDetails.role)),c.xp6(1),c.Q6J("ngIf","Admin"==(null==t.userDetails?null:t.userDetails.role)),c.xp6(9),c.Q6J("formGroup",t.securityForm),c.xp6(14),c.Q6J("disabled",!t.securityForm.valid),c.xp6(8),c.Q6J("formGroup",t.accountsForm))},directives:[m.Ro,d.SP,d.uX,d.uD,u.O5,l._Y,l.JL,l.sg,p.KE,p.hX,f.Nt,l.Fj,l.JJ,l.u,A.lW,q.Yh,h.Hw,p.R9],styles:[""]}),U)}],D=function(){var e=function e(){r(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[o.Bz.forChild(w)],o.Bz]}),e}(),S=n(63589),x=n(13841),C=n(97070),k=n(40994),I=((y=function e(){r(this,e)}).\u0275fac=function(e){return new(e||y)},y.\u0275mod=c.oAB({type:y}),y.\u0275inj=c.cJS({imports:[[u.ez,D,C.Tx,A.ot,h.Ps,q.Ad,l.u5,l.UX,x.LD,S.ZX,f.c,p.lN,k.p9,d.Nh,m.ef]]}),y)}}])}();