!function(){function e(e,i){return function(e){if(Array.isArray(e))return e}(e)||function(e,i){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var n,a,s=[],c=!0,r=!1;try{for(t=t.call(e);!(c=(n=t.next()).done)&&(s.push(n.value),!i||s.length!==i);c=!0);}catch(l){r=!0,a=l}finally{try{c||null==t.return||t.return()}finally{if(r)throw a}}return s}(e,i)||t(e,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||t(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,i){if(e){if("string"==typeof e)return n(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?n(e,i):void 0}}function n(e,i){(null==i||i>e.length)&&(i=e.length);for(var t=0,n=new Array(i);t<i;t++)n[t]=e[t];return n}function a(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function s(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,i,t){return i&&s(e.prototype,i),t&&s(e,t),e}(self.webpackChunksmart=self.webpackChunksmart||[]).push([[2538],{2538:function(t,n,s){"use strict";s.r(n),s.d(n,{LicenseModule:function(){return we}});var r=s(61116),l=s(31041),o=s(39199),u=s(5609),d=s(13070),p=s(9550),m=s(63589),g=s(84369),Z=s(77307),h=s(13841),v=s(92935),f=s(59241),A=s(37112),L=s(69024),T=s(40994),_=s(1325),q=s(57173),S=s(97070),C=s(87672),I=s(44716),b=s(51601),x=s(35729),E=s(17647),y=s(35366),N=s(42693),w=s(97425),U=s(91681),k=s(529),F=function(){var e=function(){function e(i){a(this,e),this.http=i,this.isTblLoading=!0,this.dataChange=new w.X([])}return c(e,[{key:"data",get:function(){return this.dataChange.value}},{key:"setLicenseDetails",value:function(e){return this.http.post("".concat(k.N.apiUrl,"/webRoutes/setLicenseDetails"),e).pipe((0,U.U)(function(e){return e}))}},{key:"getLicenseListPerClient",value:function(){var e=this;return this.http.get("".concat(k.N.apiUrl,"/webRoutes/getLicenseListPerClient")).pipe((0,U.U)(function(i){return e.isTblLoading=!1,e.dataChange.next(i),i}))}},{key:"deleteLicenseDetails",value:function(e){return this.http.post("".concat(k.N.apiUrl,"/webRoutes/deleteLicenseDetails"),{rowToDelete:e}).pipe((0,U.U)(function(e){return e}))}},{key:"getLicenseClassList",value:function(){return this.http.get("".concat(k.N.apiUrl,"/webRoutes/getLicenseClassList")).pipe((0,U.U)(function(e){return e}))}},{key:"getLicenseToEdit",value:function(e){return this.http.post("".concat(k.N.apiUrl,"/webRoutes/getLicenseToEdit"),{licenseId:e}).pipe((0,U.U)(function(e){return e}))}},{key:"updateLicenseDetails",value:function(e){return this.http.post("".concat(k.N.apiUrl,"/webRoutes/updateLicenseDetails"),e).pipe((0,U.U)(function(e){return e}))}},{key:"getClientCodeForFolder",value:function(e){return this.http.get("".concat(k.N.apiUrl,"/webRoutes/getClientCodeForFolder")).pipe((0,U.U)(function(e){return e}))}}]),e}();return e.\u0275fac=function(i){return new(i||e)(y.LFG(N.eN))},e.\u0275prov=y.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),O=s(24486),J=s(50518),D=s(31269),R=s(94784),Y=s(60649);function Q(e,i){if(1&e){var t=y.EpF();y.TgZ(0,"span"),y.TgZ(1,"button",37),y.NdJ("click",function(){var e=y.CHM(t),i=e.row,n=e.rowIndex;return y.oxw().editLicense(i,n)}),y.TgZ(2,"mat-icon",38),y._uU(3,"edit "),y.qZA(),y.qZA(),y.TgZ(4,"button",39),y.NdJ("click",function(){var e=y.CHM(t),i=e.row,n=e.rowIndex,a=y.oxw(),s=y.MAs(59);return a.deleteLicense(i,n,s)}),y.TgZ(5,"mat-icon",40),y._uU(6,"delete "),y.qZA(),y.qZA(),y.qZA()}}function M(e,i){if(1&e){var t=y.EpF();y.TgZ(0,"div",41),y.TgZ(1,"h4",42),y.TgZ(2,"div",43),y.TgZ(3,"div",44),y.TgZ(4,"div",45),y._uU(5),y.ALo(6,"translate"),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.TgZ(7,"button",46),y.NdJ("click",function(){return y.CHM(t).$implicit.dismiss("Cross click")}),y.TgZ(8,"span",47),y.TgZ(9,"i",48),y._uU(10,"close"),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.TgZ(11,"div",49),y.TgZ(12,"p"),y._uU(13),y.ALo(14,"translate"),y.qZA(),y.TgZ(15,"div",50),y.TgZ(16,"div",51),y.TgZ(17,"button",52),y.NdJ("click",function(){return y.CHM(t),y.oxw().deleteLicensDetails()}),y._uU(18),y.ALo(19,"translate"),y.qZA(),y.TgZ(20,"button",53),y.NdJ("click",function(){return y.CHM(t).$implicit.close()}),y._uU(21),y.ALo(22,"translate"),y.qZA(),y.qZA(),y.qZA(),y.qZA()}2&e&&(y.xp6(5),y.hij(" ",y.lcZ(6,4,"LICENSE.DELETETITLE"),""),y.xp6(8),y.Oqu(y.lcZ(14,6,"BUTTON.CONFIRMATION")),y.xp6(5),y.Oqu(y.lcZ(19,8,"BUTTON.DEL-BTN")),y.xp6(3),y.Oqu(y.lcZ(22,10,"BUTTON.CANCEL-BTN")))}var j=function(){var e=function(){function e(i,t,n,s,c,r,l,o,u){a(this,e),this.httpClient=i,this.dialog=t,this.licenseService=n,this.snackBar=s,this.router=c,this.modalService=r,this.toastrService=l,this.spinner=o,this.languageService=u,this.columns=[{name:"License Class"},{name:"Minimum Age"},{name:"License Description"},{name:"Actions"}],this.data=[],this.filteredData=[],this.translateVal="ml"==localStorage.lang?"malay":"english"}return c(e,[{key:"ngOnInit",value:function(){var e=this;this.loadData(),this.languageService.languageChanged.subscribe(function(i){e.translateVal="ml"==localStorage.lang?"malay":"english",e.loadData()})}},{key:"refresh",value:function(){this.loadData()}},{key:"addNewLicense",value:function(){this.router.navigate(["/admin/license/add-license"])}},{key:"loadData",value:function(){var e=this;this.spinner.show(),this.licenseService.getLicenseListPerClient().subscribe(function(i){e.spinner.hide();for(var t=0;t<i.data.length;t++)i.data[t].license_desc=i.data[t]["license_desc_"+e.translateVal];e.data=i.data,e.filteredData=i.data})}},{key:"filterDatatable",value:function(e){var i=e.target.value.toLowerCase(),t=this.columns.length,n=Object.keys(this.filteredData[0]);this.data=this.filteredData.filter(function(e){for(var a=0;a<t;a++)if(-1!==e[n[a]].toString().toLowerCase().indexOf(i)||!i)return!0}),this.table.offset=0}},{key:"editLicense",value:function(e,i){console.log("rowww===",e),this.router.navigate(["/admin/license/edit-license",e.id])}},{key:"deleteLicense",value:function(e,i,t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}),this.rowToDelete=e}},{key:"deleteLicensDetails",value:function(){var e=this;this.licenseService.deleteLicenseDetails(this.rowToDelete).subscribe(function(i){"Success"==i.status&&(e.toastrService.success("Deleted Successfully!!!"),e.modalService.dismissAll(),e.loadData()),"Session Expired"==i.status&&(e.toastrService.error("Session Expired!!!"),e.router.navigate(["/authentication/signin"]))})}}]),e}();return e.\u0275fac=function(i){return new(i||e)(y.Y36(N.eN),y.Y36(v.uw),y.Y36(F),y.Y36(m.ux),y.Y36(x.F0),y.Y36(O.FF),y.Y36(J._W),y.Y36(D.t2),y.Y36(R.T))},e.\u0275cmp=y.Xpm({type:e,selectors:[["app-license-list"]],viewQuery:function(e,i){var t;(1&e&&y.Gf(E.nE,5),2&e)&&(y.iGM(t=y.CRH())&&(i.table=t.first))},decls:60,vars:30,consts:[["bdColor","rgba(51,51,51,0.8)","size","medium","color","#fff","type","ball-scale-multiple"],[2,"font-size","20px","color","white"],[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"col-md-12"],[1,"mt-5"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"body"],[1,"table-responsive"],[1,"materialTableHeader"],[1,"col-8"],[1,"header-buttons-left","ml-0"],[1,"dropdown"],[1,"dropdown","m-l-20"],["for","search-input"],[1,"material-icons","search-icon"],["placeholder","Search","type","text","aria-label","Search box",1,"browser-default","search-field",3,"keyup"],[1,"col-4"],[1,"header-buttons"],[1,"icon-button-demo"],["mat-mini-fab","","color","primary",3,"click"],[1,"col-white"],[1,"material",3,"rows","columns","sortType","columnMode","headerHeight","footerHeight","rowHeight","limit"],["table",""],["prop","license_class",3,"flexGrow","name"],["prop","minimum_age",3,"flexGrow","name"],["prop","license_desc",3,"flexGrow","name"],["sortable","false",3,"flexGrow","name"],["ngx-datatable-cell-template",""],["deleteRecord",""],["mat-icon-button","","color","accent",1,"btn-tbl-edit",3,"click"],["aria-label","Edit",1,"col-white"],["mat-icon-button","","color","accent",1,"btn-tbl-delete",3,"click"],["aria-label","Delete",1,"col-white"],[1,"modal-header","deleteRowModal"],["id","modal-basic-title",1,"modal-title"],[1,"modal-header"],[1,"modal-about"],[1,"font-weight-bold","p-t-10","font-17"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"material-icons"],[1,"modal-body"],[1,"modal-footer"],[1,"button-demo"],["mat-raised-button","","type","submit","color","primary",3,"click"],["mat-button","","type","button",3,"click"]],template:function(e,i){1&e&&(y.TgZ(0,"ngx-spinner",0),y.TgZ(1,"p",1),y._uU(2,"Loading..."),y.qZA(),y.qZA(),y.TgZ(3,"section",2),y.TgZ(4,"div",3),y.TgZ(5,"div",4),y.TgZ(6,"div",5),y.TgZ(7,"div",6),y.TgZ(8,"ul",7),y.TgZ(9,"li",8),y.TgZ(10,"h4",9),y._uU(11),y.ALo(12,"translate"),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.TgZ(13,"div",5),y.TgZ(14,"div",10),y.TgZ(15,"div",11),y.TgZ(16,"div",12),y.TgZ(17,"div",13),y.TgZ(18,"div",14),y.TgZ(19,"div",15),y.TgZ(20,"div",16),y.TgZ(21,"div",5),y.TgZ(22,"div",17),y.TgZ(23,"ul",18),y.TgZ(24,"li",19),y.TgZ(25,"h2"),y.TgZ(26,"strong"),y._uU(27),y.ALo(28,"translate"),y.qZA(),y.qZA(),y.qZA(),y.TgZ(29,"li",20),y.TgZ(30,"label",21),y.TgZ(31,"i",22),y._uU(32,"search"),y.qZA(),y.qZA(),y.TgZ(33,"input",23),y.NdJ("keyup",function(e){return i.filterDatatable(e)}),y.qZA(),y.qZA(),y._UZ(34,"li"),y.qZA(),y.qZA(),y.TgZ(35,"div",24),y.TgZ(36,"ul",25),y.TgZ(37,"li"),y.TgZ(38,"div",26),y.TgZ(39,"button",27),y.NdJ("click",function(){return i.addNewLicense()}),y.TgZ(40,"mat-icon",28),y._uU(41,"add"),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.TgZ(42,"li"),y.TgZ(43,"div",26),y.TgZ(44,"button",27),y.NdJ("click",function(){return i.refresh()}),y.TgZ(45,"mat-icon",28),y._uU(46,"refresh "),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.TgZ(47,"ngx-datatable",29,30),y._UZ(49,"ngx-datatable-column",31),y.ALo(50,"translate"),y._UZ(51,"ngx-datatable-column",32),y.ALo(52,"translate"),y._UZ(53,"ngx-datatable-column",33),y.ALo(54,"translate"),y.TgZ(55,"ngx-datatable-column",34),y.ALo(56,"translate"),y.YNc(57,Q,7,0,"ng-template",35),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.YNc(58,M,23,12,"ng-template",null,36,y.W1O)),2&e&&(y.xp6(11),y.Oqu(y.lcZ(12,18,"LICENSE.LISTTITLE")),y.xp6(16),y.Oqu(y.lcZ(28,20,"LICENSE.LISTTITLE")),y.xp6(20),y.Q6J("rows",i.data)("columns",i.columns)("sortType","multi")("columnMode","flex")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",5),y.xp6(2),y.s9C("name",y.lcZ(50,22,"LICENSE.LIST.LICENSE-CLASS")),y.Q6J("flexGrow",1),y.xp6(2),y.s9C("name",y.lcZ(52,24,"LICENSE.LIST.MIN-AGE")),y.Q6J("flexGrow",1),y.xp6(2),y.s9C("name",y.lcZ(54,26,"LICENSE.LIST.LICENSE-DESC")),y.Q6J("flexGrow",5),y.xp6(2),y.s9C("name",y.lcZ(56,28,"LICENSE.ACTIONS")),y.Q6J("flexGrow",1))},directives:[D.Ro,g.lW,Z.Hw,E.nE,E.UC,E.vq],pipes:[Y.X$],styles:[""]}),e}(),H=s(22567),G=s(81258),P=s(99235),B=s(46739),V=s(79961),$=s(87064),z=s(95522),X=["autocompleteTrigger"],W=["AdvancelicenceInput"];function K(e,i){1&e&&(y.TgZ(0,"mat-error"),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&e&&(y.xp6(1),y.hij(" ",y.lcZ(2,1,"LICENSE.LIST.LICENSE-CLASS")," is required "))}function ee(e,i){1&e&&(y.TgZ(0,"mat-error"),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&e&&(y.xp6(1),y.hij(" ",y.lcZ(2,1,"LICENSE.LIST.LICENSE-ENGLISH")," is required "))}function ie(e,i){1&e&&(y.TgZ(0,"mat-error"),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&e&&(y.xp6(1),y.hij(" ",y.lcZ(2,1,"LICENSE.LIST.LICENSE-MALAY")," is required "))}function te(e,i){1&e&&(y.TgZ(0,"mat-error"),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&e&&(y.xp6(1),y.hij(" ",y.lcZ(2,1,"LICENSE.LIST.CRITERIA-ENGLISH")," is required "))}function ne(e,i){1&e&&(y.TgZ(0,"mat-error"),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&e&&(y.xp6(1),y.hij(" ",y.lcZ(2,1,"LICENSE.LIST.CRITERIA-MALAY")," is required "))}function ae(e,i){if(1&e&&(y.TgZ(0,"mat-option",44),y._uU(1),y.qZA()),2&e){var t=i.$implicit;y.Q6J("value",t),y.xp6(1),y.hij(" ",t.license_class," ")}}function se(e,i){if(1&e&&(y.TgZ(0,"div"),y._uU(1),y.qZA()),2&e){var t=y.oxw().$implicit;y.xp6(1),y.hij(" ",t.message," ")}}function ce(e,i){if(1&e&&(y.TgZ(0,"mat-error"),y.YNc(1,se,2,1,"div",19),y.qZA()),2&e){var t=i.$implicit,n=y.oxw(2);y.xp6(1),y.Q6J("ngIf",n.license_type.hasError(t.type))}}function re(e,i){if(1&e&&(y.TgZ(0,"mat-form-field",17),y.TgZ(1,"mat-label"),y._uU(2),y.ALo(3,"translate"),y.qZA(),y._UZ(4,"input",39),y.TgZ(5,"mat-autocomplete",40,41),y.YNc(7,ae,2,2,"mat-option",42),y.ALo(8,"async"),y.qZA(),y.YNc(9,ce,2,1,"mat-error",43),y.qZA()),2&e){var t=y.MAs(6),n=y.oxw();y.xp6(2),y.Oqu(y.lcZ(3,6,"LICENSE.LIST.UPGRADE-LICENSE")),y.xp6(2),y.Q6J("formControl",n.license_type)("matAutocomplete",t),y.xp6(1),y.Q6J("displayWith",n.displayFnLicense),y.xp6(2),y.Q6J("ngForOf",y.lcZ(8,8,n.licenseClassList)),y.xp6(2),y.Q6J("ngForOf",n.validation_msgs.license_type)}}function le(e,i){1&e&&(y.TgZ(0,"mat-icon",57),y._uU(1,"cancel"),y.qZA())}function oe(e,i){if(1&e){var t=y.EpF();y.TgZ(0,"mat-chip",55),y.NdJ("removed",function(){var e=y.CHM(t).$implicit;return y.oxw(2).remove(e)}),y._uU(1),y.YNc(2,le,2,0,"mat-icon",56),y.qZA()}if(2&e){var n=i.$implicit,a=y.oxw(2);y.Q6J("selectable",a.selectable)("removable",a.removable),y.xp6(1),y.hij(" ",n," "),y.xp6(1),y.Q6J("ngIf",a.removable)}}function ue(e,i){if(1&e&&(y.TgZ(0,"mat-option",44),y._UZ(1,"mat-checkbox",58),y._uU(2),y.qZA()),2&e){var t=i.$implicit,n=y.oxw(2);y.Q6J("value",t),y.xp6(1),y.Q6J("checked",n.license_display.indexOf(t.license_class)>=0),y.xp6(1),y.hij(" ",t.license_class," ")}}function de(e,i){if(1&e){var t=y.EpF();y.TgZ(0,"mat-form-field",45),y.TgZ(1,"mat-chip-list",46,47),y.YNc(3,oe,3,4,"mat-chip",48),y.TgZ(4,"mat-label"),y._uU(5),y.ALo(6,"translate"),y.qZA(),y.TgZ(7,"input",49,50),y.NdJ("matChipInputTokenEnd",function(e){return y.CHM(t),y.oxw().add(e)}),y.qZA(),y.qZA(),y.TgZ(10,"mat-autocomplete",51,52),y.NdJ("optionSelected",function(e){return y.CHM(t),y.oxw().selectedListType(e)}),y.YNc(12,ue,3,3,"mat-option",42),y.ALo(13,"async"),y.qZA(),y.TgZ(14,"button",53),y.NdJ("click",function(){y.CHM(t);var e=y.MAs(9);return y.oxw().openAuto(e)}),y.TgZ(15,"mat-icon",54),y._uU(16,"expand_more"),y.qZA(),y.qZA(),y.qZA()}if(2&e){var n=y.MAs(2),a=y.MAs(11),s=y.oxw();y.xp6(3),y.Q6J("ngForOf",s.license_display),y.xp6(2),y.hij("",y.lcZ(6,7,"LICENSE.LIST.ADVANCE-LICENSE"),"*"),y.xp6(2),y.Q6J("matChipInputFor",n)("matChipInputSeparatorKeyCodes",s.separatorKeysCodes)("formControl",s.advance_license)("matAutocomplete",a),y.xp6(5),y.Q6J("ngForOf",y.lcZ(13,9,s.advanceLicenseList))}}var pe=["autocompleteTrigger"],me=["AdvancelicenceInput"];function ge(e,i){1&e&&(y.TgZ(0,"mat-error"),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&e&&(y.xp6(1),y.hij(" ",y.lcZ(2,1,"LICENSE.LIST.LICENSE-CLASS")," is required "))}function Ze(e,i){1&e&&(y.TgZ(0,"mat-error"),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&e&&(y.xp6(1),y.hij(" ",y.lcZ(2,1,"LICENSE.LIST.LICENSE-ENGLISH")," is required "))}function he(e,i){1&e&&(y.TgZ(0,"mat-error"),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&e&&(y.xp6(1),y.hij(" ",y.lcZ(2,1,"LICENSE.LIST.LICENSE-MALAY")," is required "))}function ve(e,i){1&e&&(y.TgZ(0,"mat-error"),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&e&&(y.xp6(1),y.hij(" ",y.lcZ(2,1,"LICENSE.LIST.CRITERIA-ENGLISH")," is required "))}function fe(e,i){1&e&&(y.TgZ(0,"mat-error"),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&e&&(y.xp6(1),y.hij(" ",y.lcZ(2,1,"LICENSE.LIST.CRITERIA-MALAY")," is required "))}function Ae(e,i){if(1&e&&(y.TgZ(0,"mat-option",46),y._uU(1),y.qZA()),2&e){var t=i.$implicit;y.Q6J("value",t),y.xp6(1),y.hij(" ",t.license_class," ")}}function Le(e,i){if(1&e&&(y.TgZ(0,"div"),y._uU(1),y.qZA()),2&e){var t=y.oxw().$implicit;y.xp6(1),y.hij(" ",t.message," ")}}function Te(e,i){if(1&e&&(y.TgZ(0,"mat-error"),y.YNc(1,Le,2,1,"div",19),y.qZA()),2&e){var t=i.$implicit,n=y.oxw(2);y.xp6(1),y.Q6J("ngIf",n.license_type.hasError(t.type))}}function _e(e,i){if(1&e&&(y.TgZ(0,"mat-form-field",17),y.TgZ(1,"mat-label"),y._uU(2),y.ALo(3,"translate"),y.qZA(),y._UZ(4,"input",41),y.TgZ(5,"mat-autocomplete",42,43),y.YNc(7,Ae,2,2,"mat-option",44),y.ALo(8,"async"),y.qZA(),y.YNc(9,Te,2,1,"mat-error",45),y.qZA()),2&e){var t=y.MAs(6),n=y.oxw();y.xp6(2),y.Oqu(y.lcZ(3,6,"LICENSE.LIST.UPGRADE-LICENSE")),y.xp6(2),y.Q6J("formControl",n.license_type)("matAutocomplete",t),y.xp6(1),y.Q6J("displayWith",n.displayFnLicense),y.xp6(2),y.Q6J("ngForOf",y.lcZ(8,8,n.licenseClassList)),y.xp6(2),y.Q6J("ngForOf",n.validation_msgs.license_type)}}function qe(e,i){1&e&&(y.TgZ(0,"mat-icon",59),y._uU(1,"cancel"),y.qZA())}function Se(e,i){if(1&e){var t=y.EpF();y.TgZ(0,"mat-chip",57),y.NdJ("removed",function(){var e=y.CHM(t).$implicit;return y.oxw(2).remove(e)}),y._uU(1),y.YNc(2,qe,2,0,"mat-icon",58),y.qZA()}if(2&e){var n=i.$implicit,a=y.oxw(2);y.Q6J("selectable",a.selectable)("removable",a.removable),y.xp6(1),y.hij(" ",n," "),y.xp6(1),y.Q6J("ngIf",a.removable)}}function Ce(e,i){if(1&e&&(y.TgZ(0,"mat-option",46),y._UZ(1,"mat-checkbox",60),y._uU(2),y.qZA()),2&e){var t=i.$implicit,n=y.oxw(2);y.Q6J("value",t),y.xp6(1),y.Q6J("checked",n.license_display.indexOf(t.license_class)>=0),y.xp6(1),y.hij(" ",t.license_class," ")}}function Ie(e,i){if(1&e){var t=y.EpF();y.TgZ(0,"mat-form-field",47),y.TgZ(1,"mat-chip-list",48,49),y.YNc(3,Se,3,4,"mat-chip",50),y.TgZ(4,"mat-label"),y._uU(5),y.ALo(6,"translate"),y.qZA(),y.TgZ(7,"input",51,52),y.NdJ("matChipInputTokenEnd",function(e){return y.CHM(t),y.oxw().add(e)}),y.qZA(),y.qZA(),y.TgZ(10,"mat-autocomplete",53,54),y.NdJ("optionSelected",function(e){return y.CHM(t),y.oxw().selectedListType(e)}),y.YNc(12,Ce,3,3,"mat-option",44),y.ALo(13,"async"),y.qZA(),y.TgZ(14,"button",55),y.NdJ("click",function(){y.CHM(t);var e=y.MAs(9);return y.oxw().openAuto(e)}),y.TgZ(15,"mat-icon",56),y._uU(16,"expand_more"),y.qZA(),y.qZA(),y.qZA()}if(2&e){var n=y.MAs(2),a=y.MAs(11),s=y.oxw();y.xp6(3),y.Q6J("ngForOf",s.license_display),y.xp6(2),y.hij("",y.lcZ(6,7,"LICENSE.LIST.ADVANCE-LICENSE"),"*"),y.xp6(2),y.Q6J("matChipInputFor",n)("matChipInputSeparatorKeyCodes",s.separatorKeysCodes)("formControl",s.advance_license)("matAutocomplete",a),y.xp6(5),y.Q6J("ngForOf",y.lcZ(13,9,s.advanceLicenseList))}}var be,xe,Ee,ye=[{path:"license-list",component:j},{path:"add-license",component:(xe=function(){function t(e,i,n,s,c,r,o,u){a(this,t),this.cdRef=e,this.fb=i,this.languageService=n,this.toastrService=s,this.licenseService=c,this.router=r,this.route=o,this.spinner=u,this.selectable=!0,this.removable=!0,this.separatorKeysCodes=[P.K5,P.OC],this.license_selected=[],this.license_display=[],this.disableSubmit=!1,this.license_type=new l.NI("",{validators:[function(e){return"string"==typeof e.value?{invalidAutocompleteObject:{value:e.value}}:null},l.kI.required]}),this.advance_license=new l.NI("",{validators:[function(e){return"string"==typeof e.value?{invalidAutocompleteObject:{value:e.value}}:null},l.kI.required]}),this.Editor=H,this.showUpgradeLicense=!1,this.showAdvanceLicense=!1,this.validation_msgs={license_type:[{type:"invalidAutocompleteObject",message:"License Class not recognized. Click one of the options."}],advance_license:[{type:"invalidAutocompleteObject",message:"License Class not recognized. Click one of the options."}]},this.getLicenseList()}return c(t,[{key:"ngOnInit",value:function(){this.addLicenseForm=this.fb.group({license_class:["",l.kI.required],minimum_age:[""],license_desc_english:["",l.kI.required],license_desc_malay:["",l.kI.required],criteria_english:["",l.kI.required],criteria_malay:["",l.kI.required],license_flow:["",l.kI.required],license_flow_name:["",l.kI.required],license_image:["",l.kI.required],license_image_name:["",l.kI.required],cdl_req:[""],gdlPractical:[!1],psvPractical:[!1],upgradeLicense:[!1],advanceLicense:[!1]})}},{key:"getLicenseList",value:function(){var e=this;this.licenseService.getLicenseClassList().subscribe(function(i){e.licenseClassData=i.data,e.licenseClassList=e.license_type.valueChanges.pipe((0,G.O)(""),(0,U.U)(function(i){return i?e._filterLicenseType(i):e.licenseClassData.slice()})),e.advanceLicenseData=i.data,e.advanceLicenseList=e.advance_license.valueChanges.pipe((0,G.O)(""),(0,U.U)(function(i){return i?e._filterAdvanceLicenseType(i):e.advanceLicenseData.slice()}))})}},{key:"displayFnLicense",value:function(e){return e&&e.license_class?e.license_class:""}},{key:"_filterLicenseType",value:function(e){var i=e.toLowerCase();return this.licenseClassData.filter(function(e){return e.license_class.toLowerCase().includes(i)})}},{key:"_filterAdvanceLicenseType",value:function(e){var i=e.toLowerCase();return this.advanceLicenseData.filter(function(e){return e.license_class.toLowerCase().includes(i)})}},{key:"add",value:function(e){var i=e.input,t=e.value;console.log("------------",t),(t||"").trim()&&this.license_selected.push(t),i&&(i.value=""),this.advance_license.setValue(null)}},{key:"remove",value:function(e){alert("Removeeee"),console.log("license-----",e);var i=this.license_display.indexOf(e);i>=0&&this.license_display.splice(i,1),this.license_selected=this.license_selected.filter(function(i){return i.license_class!=e})}},{key:"selectedListType",value:function(e){var t=this,n=e.option.value.license_class;console.log("newValue=======",n,this.license_selected.length),this.license_display.includes(n)?(this.license_display=i(this.license_display.filter(function(e){return e!==n})),this.license_selected=i(this.license_selected.filter(function(i){return i.id!==e.option.value.id}))):(this.license_display.push(n),this.license_selected.push({id:e.option.value.id,license_class:e.option.value.license_class})),this.AdvancelicenceInput.nativeElement.value="",this.advance_license.setValue(null),requestAnimationFrame(function(){t.openAuto(t.matACTrigger)})}},{key:"openAuto",value:function(e){e.openPanel(),this.AdvancelicenceInput.nativeElement.focus(),console.log(e)}},{key:"checkUpgrade",value:function(e){this.showUpgradeLicense=1==e.checked}},{key:"checkAdvance",value:function(e){this.showAdvanceLicense=1==e.checked}},{key:"onFileChangeLicenseFlow",value:function(i){var t=this,n=new FileReader;if(i.target.files&&i.target.files.length){var a=e(i.target.files,1)[0];n.readAsDataURL(a),n.onload=function(){t.addLicenseForm.patchValue({license_flow:a}),console.log("this.documentForm===",t.addLicenseForm)}}}},{key:"onFileChangeLicenseImage",value:function(i){var t=this,n=new FileReader;if(i.target.files&&i.target.files.length){var a=e(i.target.files,1)[0];n.readAsDataURL(a),n.onload=function(){t.addLicenseForm.patchValue({license_image:a}),console.log("this.documentForm===",t.addLicenseForm)}}}},{key:"setLicenseDetails",value:function(){var e=this;console.log("Editor===",this.addLicenseForm.value);var i=new FormData;i.append("baseRoot","root/License/"+this.addLicenseForm.value.license_class),i.append("licenseData",JSON.stringify(this.addLicenseForm.value)),i.append("licenseImage",this.addLicenseForm.value.license_image),i.append("licenseFlow",this.addLicenseForm.value.license_flow),i.append("license_type",JSON.stringify(this.license_type.value)),i.append("license_selected",JSON.stringify(this.license_selected)),console.log("this.license_selected=======",this.license_selected,this.license_type),1==this.addLicenseForm.value.upgradeLicense&&1==this.addLicenseForm.value.advanceLicense?this.license_type.valid&&this.license_selected.length>0?(this.disableSubmit=!0,this.spinner.show(),this.licenseService.setLicenseDetails(i).subscribe(function(i){e.spinner.hide(),e.disableSubmit=!1,"Success"==i.status?(e.toastrService.success("Registered Successfully!!"),e.addLicenseForm.reset(),e.router.navigate(["/admin/license/license-list"])):"Session Expired"==i.status?(e.toastrService.error("Session Expired!!!"),e.router.navigate(["/authentication/signin"])):e.toastrService.error(i.status)})):this.toastrService.warning("Please Select Upgrade and Advance License!!"):0==this.addLicenseForm.value.upgradeLicense&&1==this.addLicenseForm.value.advanceLicense?this.license_selected.length>0?(this.disableSubmit=!0,this.spinner.show(),this.licenseService.setLicenseDetails(i).subscribe(function(i){e.spinner.hide(),e.disableSubmit=!1,"Success"==i.status?(e.toastrService.success("Registered Successfully!!"),e.addLicenseForm.reset(),e.router.navigate(["/admin/license/license-list"])):"Session Expired"==i.status?(e.toastrService.error("Session Expired!!!"),e.router.navigate(["/authentication/signin"])):e.toastrService.error(i.status)})):this.toastrService.warning("Please Select Advance License!!"):1==this.addLicenseForm.value.upgradeLicense&&0==this.addLicenseForm.value.advanceLicense?this.license_type.valid?(this.disableSubmit=!0,this.spinner.show(),this.licenseService.setLicenseDetails(i).subscribe(function(i){e.spinner.hide(),e.disableSubmit=!1,"Success"==i.status?(e.toastrService.success("Registered Successfully!!"),e.addLicenseForm.reset(),e.router.navigate(["/admin/license/license-list"])):"Session Expired"==i.status?(e.toastrService.error("Session Expired!!!"),e.router.navigate(["/authentication/signin"])):e.toastrService.error(i.status)})):this.toastrService.warning("Please Select Upgrade License!!"):(this.disableSubmit=!0,this.spinner.show(),this.licenseService.setLicenseDetails(i).subscribe(function(i){e.spinner.hide(),e.disableSubmit=!1,"Success"==i.status?(e.toastrService.success("Registered Successfully!!"),e.addLicenseForm.reset(),e.router.navigate(["/admin/license/license-list"])):"Session Expired"==i.status?(e.toastrService.error("Session Expired!!!"),e.router.navigate(["/authentication/signin"])):e.toastrService.error(i.status)}))}},{key:"goBack",value:function(){this.router.navigate(["/admin/license/license-list"])}}]),t}(),xe.\u0275fac=function(e){return new(e||xe)(y.Y36(y.sBO),y.Y36(l.qu),y.Y36(R.T),y.Y36(J._W),y.Y36(F),y.Y36(x.F0),y.Y36(x.gz),y.Y36(D.t2))},xe.\u0275cmp=y.Xpm({type:xe,selectors:[["app-add-license"]],viewQuery:function(e,i){var t;1&e&&(y.Gf(X,5),y.Gf(W,5)),2&e&&(y.iGM(t=y.CRH())&&(i.matACTrigger=t.first),y.iGM(t=y.CRH())&&(i.AdvancelicenceInput=t.first))},decls:120,vars:64,consts:[["bdColor","rgba(51,51,51,0.8)","size","medium","color","#fff","type","ball-scale-multiple"],[2,"font-size","20px","color","white"],[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"row","clearfix"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"header"],[1,"body"],[1,"m-4",3,"formGroup"],[1,"col-xl-4","col-lg-4","col-md-12","col-sm-12","mb-2"],["appearance","outline",1,"example-full-width","mb-3"],["matInput","","formControlName","license_class","required",""],[4,"ngIf"],["matInput","","formControlName","minimum_age","maxlength","2"],["formControlName","cdl_req",1,"example-margin"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2"],["formControlName","license_desc_english",3,"editor"],["formControlName","license_desc_malay",3,"editor"],["formControlName","criteria_english",3,"editor"],["formControlName","criteria_malay",3,"editor"],["formControlName","license_image_name","required","",3,"change"],["matSuffix",""],["formControlName","license_flow_name","required","",3,"change"],["formControlName","gdlPractical",1,"example-margin"],["formControlName","psvPractical",1,"example-margin"],["formControlName","upgradeLicense",1,"example-margin",3,"change"],["formControlName","advanceLicense",1,"example-margin",3,"change"],["class","example-full-width mb-3","appearance","outline",4,"ngIf"],["class","example-full-width",4,"ngIf"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],["mat-raised-button","","color","primary",1,"btn-space",3,"disabled","click"],["type","button","mat-button","",3,"click"],["type","text","matInput","",3,"formControl","matAutocomplete"],[3,"displayWith"],["autoNric","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"value"],[1,"example-full-width"],["aria-label","Fruit selection"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["type","text","matInput","",3,"matChipInputFor","matChipInputSeparatorKeyCodes","formControl","matAutocomplete","matChipInputTokenEnd"],["AdvancelicenceInput","","autocompleteTrigger","matAutocompleteTrigger"],["autoActiveFirstOption","",3,"optionSelected"],["autoLicense","matAutocomplete"],["mat-icon-button","","matSuffix","",2,"width","34px","height","34px",3,"click"],[2,"width","34px"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],["color","primary",2,"padding","0 12px",3,"checked"]],template:function(e,i){1&e&&(y.TgZ(0,"ngx-spinner",0),y.TgZ(1,"p",1),y._uU(2,"Loading..."),y.qZA(),y.qZA(),y.TgZ(3,"section",2),y.TgZ(4,"div",3),y.TgZ(5,"div",4),y.TgZ(6,"div",5),y.TgZ(7,"div",6),y.TgZ(8,"ul",7),y.TgZ(9,"li",8),y.TgZ(10,"h4",9),y._uU(11),y.ALo(12,"translate"),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.TgZ(13,"div",10),y.TgZ(14,"div",11),y.TgZ(15,"div",12),y.TgZ(16,"div",13),y.TgZ(17,"h2"),y._uU(18),y.ALo(19,"translate"),y.qZA(),y.qZA(),y.TgZ(20,"div",14),y.TgZ(21,"form",15),y.TgZ(22,"div",5),y.TgZ(23,"div",16),y.TgZ(24,"mat-form-field",17),y.TgZ(25,"mat-label"),y._uU(26),y.ALo(27,"translate"),y.qZA(),y._UZ(28,"input",18),y.YNc(29,K,3,3,"mat-error",19),y.qZA(),y.qZA(),y.TgZ(30,"div",16),y.TgZ(31,"mat-form-field",17),y.TgZ(32,"mat-label"),y._uU(33),y.ALo(34,"translate"),y.qZA(),y._UZ(35,"input",20),y.qZA(),y.qZA(),y.TgZ(36,"div",16),y.TgZ(37,"mat-checkbox",21),y._uU(38),y.ALo(39,"translate"),y.qZA(),y.qZA(),y.qZA(),y.TgZ(40,"div",5),y.TgZ(41,"div",22),y.TgZ(42,"mat-label"),y._uU(43),y.ALo(44,"translate"),y.qZA(),y._UZ(45,"ckeditor",23),y.YNc(46,ee,3,3,"mat-error",19),y.qZA(),y.TgZ(47,"div",22),y.TgZ(48,"mat-label"),y._uU(49),y.ALo(50,"translate"),y.qZA(),y._UZ(51,"ckeditor",24),y.YNc(52,ie,3,3,"mat-error",19),y.qZA(),y.qZA(),y.TgZ(53,"div",5),y.TgZ(54,"div",22),y.TgZ(55,"mat-label"),y._uU(56),y.ALo(57,"translate"),y.qZA(),y._UZ(58,"ckeditor",25),y.YNc(59,te,3,3,"mat-error",19),y.qZA(),y.TgZ(60,"div",22),y.TgZ(61,"mat-label"),y._uU(62),y.ALo(63,"translate"),y.qZA(),y._UZ(64,"ckeditor",26),y.YNc(65,ne,3,3,"mat-error",19),y.qZA(),y.qZA(),y.TgZ(66,"div",5),y.TgZ(67,"div",22),y.TgZ(68,"mat-form-field",17),y.TgZ(69,"mat-label"),y._uU(70),y.ALo(71,"translate"),y.qZA(),y.TgZ(72,"ngx-mat-file-input",27),y.NdJ("change",function(e){return i.onFileChangeLicenseImage(e)}),y.qZA(),y.TgZ(73,"mat-icon",28),y._uU(74,"cloud_upload"),y.qZA(),y.qZA(),y.qZA(),y.TgZ(75,"div",22),y.TgZ(76,"mat-form-field",17),y.TgZ(77,"mat-label"),y._uU(78),y.ALo(79,"translate"),y.qZA(),y.TgZ(80,"ngx-mat-file-input",29),y.NdJ("change",function(e){return i.onFileChangeLicenseFlow(e)}),y.qZA(),y.TgZ(81,"mat-icon",28),y._uU(82,"cloud_upload"),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.TgZ(83,"div",5),y.TgZ(84,"div",22),y.TgZ(85,"div",5),y.TgZ(86,"div",22),y.TgZ(87,"mat-checkbox",30),y._uU(88),y.ALo(89,"translate"),y.qZA(),y.qZA(),y.TgZ(90,"div",22),y.TgZ(91,"mat-checkbox",31),y._uU(92),y.ALo(93,"translate"),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.TgZ(94,"div",22),y.TgZ(95,"div",5),y.TgZ(96,"div",22),y.TgZ(97,"mat-checkbox",32),y.NdJ("change",function(e){return i.checkUpgrade(e)}),y._uU(98),y.ALo(99,"translate"),y.qZA(),y.qZA(),y.TgZ(100,"div",22),y.TgZ(101,"mat-checkbox",33),y.NdJ("change",function(e){return i.checkAdvance(e)}),y._uU(102),y.ALo(103,"translate"),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.TgZ(104,"div",5),y._UZ(105,"div",22),y.TgZ(106,"div",22),y.TgZ(107,"div",5),y.TgZ(108,"div",22),y.YNc(109,re,10,10,"mat-form-field",34),y.qZA(),y.TgZ(110,"div",22),y.YNc(111,de,17,11,"mat-form-field",35),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.TgZ(112,"div",5),y.TgZ(113,"div",36),y.TgZ(114,"button",37),y.NdJ("click",function(){return i.setLicenseDetails()}),y._uU(115),y.ALo(116,"translate"),y.qZA(),y.TgZ(117,"button",38),y.NdJ("click",function(){return i.goBack()}),y._uU(118),y.ALo(119,"translate"),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA()),2&e&&(y.xp6(11),y.Oqu(y.lcZ(12,30,"LICENSE.TITLE")),y.xp6(7),y.Oqu(y.lcZ(19,32,"LICENSE.TITLE")),y.xp6(3),y.Q6J("formGroup",i.addLicenseForm),y.xp6(5),y.Oqu(y.lcZ(27,34,"LICENSE.LIST.LICENSE-CLASS")),y.xp6(3),y.Q6J("ngIf",i.addLicenseForm.get("license_class").hasError("required")),y.xp6(4),y.Oqu(y.lcZ(34,36,"LICENSE.LIST.MIN-AGE")),y.xp6(5),y.Oqu(y.lcZ(39,38,"LICENSE.LIST.CDL-REQ")),y.xp6(5),y.hij("",y.lcZ(44,40,"LICENSE.LIST.LICENSE-ENGLISH"),"*"),y.xp6(2),y.Q6J("editor",i.Editor),y.xp6(1),y.Q6J("ngIf",i.addLicenseForm.get("license_desc_english").hasError("required")),y.xp6(3),y.hij("",y.lcZ(50,42,"LICENSE.LIST.LICENSE-MALAY"),"*"),y.xp6(2),y.Q6J("editor",i.Editor),y.xp6(1),y.Q6J("ngIf",i.addLicenseForm.get("license_desc_malay").hasError("required")),y.xp6(4),y.hij("",y.lcZ(57,44,"LICENSE.LIST.CRITERIA-ENGLISH"),"*"),y.xp6(2),y.Q6J("editor",i.Editor),y.xp6(1),y.Q6J("ngIf",i.addLicenseForm.get("criteria_english").hasError("required")),y.xp6(3),y.hij("",y.lcZ(63,46,"LICENSE.LIST.CRITERIA-MALAY"),"*"),y.xp6(2),y.Q6J("editor",i.Editor),y.xp6(1),y.Q6J("ngIf",i.addLicenseForm.get("criteria_malay").hasError("required")),y.xp6(5),y.Oqu(y.lcZ(71,48,"LICENSE.LIST.LICENSE-IMAGE")),y.xp6(8),y.Oqu(y.lcZ(79,50,"LICENSE.LIST.LICENSE-FLOW")),y.xp6(10),y.Oqu(y.lcZ(89,52,"LICENSE.LIST.GDL-PRACTICAL")),y.xp6(4),y.Oqu(y.lcZ(93,54,"LICENSE.LIST.PSV-PRACTICAL")),y.xp6(6),y.Oqu(y.lcZ(99,56,"LICENSE.LIST.UPGRADE")),y.xp6(4),y.Oqu(y.lcZ(103,58,"LICENSE.LIST.ADVANCE")),y.xp6(7),y.Q6J("ngIf",i.showUpgradeLicense),y.xp6(2),y.Q6J("ngIf",i.showAdvanceLicense),y.xp6(3),y.Q6J("disabled",!i.addLicenseForm.valid||i.disableSubmit),y.xp6(1),y.Oqu(y.lcZ(116,60,"BUTTON.ADD-BTN")),y.xp6(3),y.Oqu(y.lcZ(119,62,"BUTTON.CANCEL-BTN")))},directives:[D.Ro,l._Y,l.JL,l.sg,d.KE,d.hX,p.Nt,l.Fj,l.JJ,l.u,l.Q7,r.O5,l.nD,T.oG,B.u,_.Yh,Z.Hw,d.R9,g.lW,d.TO,V.ZL,l.oH,V.XC,r.sg,$.ey,z.qn,z.oH,z.HS,z.qH],pipes:[Y.X$,r.Ov],styles:["[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:400px}"]}),xe)},{path:"edit-license/:id",component:(be=function(){function t(e,i,n,s,c,r,o,u){a(this,t),this.cdRef=e,this.fb=i,this.languageService=n,this.toastrService=s,this.licenseService=c,this.router=r,this.route=o,this.spinner=u,this.selectable=!0,this.removable=!0,this.separatorKeysCodes=[P.K5,P.OC],this.license_selected=[],this.license_display=[],this.license_type=new l.NI("",{validators:[function(e){return"string"==typeof e.value?{invalidAutocompleteObject:{value:e.value}}:null},l.kI.required]}),this.advance_license=new l.NI("",{validators:[function(e){return"string"==typeof e.value?{invalidAutocompleteObject:{value:e.value}}:null},l.kI.required]}),this.showUpgradeLicense=!1,this.showAdvanceLicense=!1,this.Editor=H,this.apiURL=k.N.apiUrl,this.validation_msgs={license_type:[{type:"invalidAutocompleteObject",message:"License Class not recognized. Click one of the options."}],advance_license:[{type:"invalidAutocompleteObject",message:"License Class not recognized. Click one of the options."}]},this.licenseId=this.route.snapshot.paramMap.get("id"),this.editLicenseForm=this.fb.group({id:[""],prev_license_class:["",l.kI.required],license_class:["",l.kI.required],minimum_age:[""],license_desc_english:["",l.kI.required],license_desc_malay:["",l.kI.required],criteria_english:["",l.kI.required],criteria_malay:["",l.kI.required],license_flow:["",l.kI.required],license_flow_name:["",l.kI.required],license_image:["",l.kI.required],license_image_name:["",l.kI.required],cdl_req:[""],gdlPractical:[!1],psvPractical:[!1],isActive:[""],upgradeLicense:[!1],advanceLicense:[!1]}),this.getLicenseList()}return c(t,[{key:"ngOnInit",value:function(){var e=this;this.spinner.show(),this.licenseService.getLicenseToEdit(this.licenseId).subscribe(function(i){var t=[],n=[];if(e.spinner.hide(),"Session Expired"==i.status)e.toastrService.error("Session Expired!!!"),e.router.navigate(["/authentication/signin"]);else if(i.data.length>0){var a=i.data[0];e.editLicenseForm.patchValue({id:a.id,prev_license_class:a.license_class,license_class:a.license_class,cdl_req:1==a.cdl_requirement,gdlPractical:1==a.gdl_practical,psvPractical:1==a.psv_practical,minimum_age:a.minimum_age,license_desc_english:a.license_desc_english,license_desc_malay:a.license_desc_malay,criteria_english:a.criteria_english,criteria_malay:a.criteria_malay,license_flow:a.license_flow,license_flow_name:a.license_flow,license_image:a.license_image,license_image_name:a.license_image,isActive:a.is_active});var s=i.advanceList.filter(function(e){return"Upgrade"==e.license_category}),c=i.advanceList.filter(function(e){return"Advance"==e.license_category});if(s.length>0){e.showUpgradeLicense=!0,e.editLicenseForm.patchValue({upgradeLicense:!0});var r=e.licenseClassData.filter(function(e){return e.id==s[0].ext_license_id});e.license_type.setValue(r[0])}c.length>0&&(e.showAdvanceLicense=!0,e.editLicenseForm.patchValue({advanceLicense:!0}));for(var l=0;l<c.length;l++)t.push(c[l].license_class),n.push({id:c[l].ext_license_id,license_class:c[l].license_class});e.license_display=t,e.license_selected=n}else e.toastrService.error("No Data Found!!!")})}},{key:"displayFnLicense",value:function(e){return e&&e.license_class?e.license_class:""}},{key:"_filterLicenseType",value:function(e){var i=e.toLowerCase();return this.licenseClassData.filter(function(e){return e.license_class.toLowerCase().includes(i)})}},{key:"_filterAdvanceLicenseType",value:function(e){var i=e.toLowerCase();return this.advanceLicenseData.filter(function(e){return e.license_class.toLowerCase().includes(i)})}},{key:"add",value:function(e){var i=e.input,t=e.value;console.log("------------",t),(t||"").trim()&&this.license_selected.push(t),i&&(i.value=""),this.advance_license.setValue(null)}},{key:"remove",value:function(e){alert("Removeeee"),console.log("license-----",e);var i=this.license_display.indexOf(e);i>=0&&this.license_display.splice(i,1),this.license_selected=this.license_selected.filter(function(i){return i.license_class!=e})}},{key:"selectedListType",value:function(e){var t=this,n=e.option.value.license_class;console.log("newValue=======",n,this.license_selected.length),this.license_display.includes(n)?(this.license_display=i(this.license_display.filter(function(e){return e!==n})),this.license_selected=i(this.license_selected.filter(function(i){return i.id!==e.option.value.id}))):(this.license_display.push(n),this.license_selected.push({id:e.option.value.id,license_class:e.option.value.license_class})),this.AdvancelicenceInput.nativeElement.value="",this.advance_license.setValue(null),requestAnimationFrame(function(){t.openAuto(t.matACTrigger)})}},{key:"openAuto",value:function(e){e.openPanel(),this.AdvancelicenceInput.nativeElement.focus(),console.log(e)}},{key:"checkUpgrade",value:function(e){this.showUpgradeLicense=1==e.checked}},{key:"checkAdvance",value:function(e){this.showAdvanceLicense=1==e.checked}},{key:"getLicenseList",value:function(){var e=this;this.licenseService.getLicenseClassList().subscribe(function(i){e.licenseClassData=i.data,e.licenseClassList=e.license_type.valueChanges.pipe((0,G.O)(""),(0,U.U)(function(i){return i?e._filterLicenseType(i):e.licenseClassData.slice()})),e.advanceLicenseData=i.data,e.advanceLicenseList=e.advance_license.valueChanges.pipe((0,G.O)(""),(0,U.U)(function(i){return i?e._filterAdvanceLicenseType(i):e.advanceLicenseData.slice()}))})}},{key:"onFileChangeLicenseFlow",value:function(i){var t=this,n=new FileReader;if(i.target.files&&i.target.files.length){var a=e(i.target.files,1)[0];n.readAsDataURL(a),n.onload=function(){t.licenseFlow_preview=n.result,t.editLicenseForm.patchValue({license_flow:a}),console.log("this.documentForm===",t.editLicenseForm)}}}},{key:"onFileChangeLicenseImage",value:function(i){var t=this,n=new FileReader;if(i.target.files&&i.target.files.length){var a=e(i.target.files,1)[0];n.readAsDataURL(a),n.onload=function(){t.licenseImg_preview=n.result,t.editLicenseForm.patchValue({license_image:a}),console.log("this.documentForm===",t.editLicenseForm)}}}},{key:"goBack",value:function(){this.router.navigate(["/admin/license/license-list"])}},{key:"updateLicenseDetails",value:function(){var e=this;console.log("Editor===",this.editLicenseForm.value),this.spinner.show();var i=new FormData;i.append("baseRoot","root/License/"+this.editLicenseForm.value.license_class),i.append("licenseData",JSON.stringify(this.editLicenseForm.value)),i.append("licenseImage",this.editLicenseForm.value.license_image),i.append("licenseFlow",this.editLicenseForm.value.license_flow),i.append("license_type",JSON.stringify(this.license_type.value)),i.append("license_selected",JSON.stringify(this.license_selected)),1==this.editLicenseForm.value.upgradeLicense&&1==this.editLicenseForm.value.advanceLicense?this.license_type.valid&&this.license_selected.length>0?(this.spinner.show(),this.licenseService.updateLicenseDetails(i).subscribe(function(i){e.spinner.hide(),"Success"==i.status?(e.toastrService.success("Updated Successfully!!"),e.editLicenseForm.reset(),e.router.navigate(["/admin/license/license-list"])):"Session Expired"==i.status?(e.toastrService.error("Session Expired!!!"),e.router.navigate(["/authentication/signin"])):e.toastrService.error(i.status)})):this.toastrService.warning("Please Select Upgrade and Advance License!!"):0==this.editLicenseForm.value.upgradeLicense&&1==this.editLicenseForm.value.advanceLicense?this.license_selected.length>0?(this.spinner.show(),this.licenseService.updateLicenseDetails(i).subscribe(function(i){e.spinner.hide(),"Success"==i.status?(e.toastrService.success("Updated Successfully!!"),e.editLicenseForm.reset(),e.router.navigate(["/admin/license/license-list"])):"Session Expired"==i.status?(e.toastrService.error("Session Expired!!!"),e.router.navigate(["/authentication/signin"])):e.toastrService.error(i.status)})):this.toastrService.warning("Please Select Advance License!!"):1==this.editLicenseForm.value.upgradeLicense&&0==this.editLicenseForm.value.advanceLicense?this.license_type.valid?(this.spinner.show(),this.licenseService.updateLicenseDetails(i).subscribe(function(i){e.spinner.hide(),"Success"==i.status?(e.toastrService.success("Updated Successfully!!"),e.editLicenseForm.reset(),e.router.navigate(["/admin/license/license-list"])):"Session Expired"==i.status?(e.toastrService.error("Session Expired!!!"),e.router.navigate(["/authentication/signin"])):e.toastrService.error(i.status)})):this.toastrService.warning("Please Select Upgrade License!!"):(this.spinner.show(),this.licenseService.updateLicenseDetails(i).subscribe(function(i){e.spinner.hide(),"Success"==i.status?(e.toastrService.success("Updated Successfully!!"),e.editLicenseForm.reset(),e.router.navigate(["/admin/license/license-list"])):"Session Expired"==i.status?(e.toastrService.error("Session Expired!!!"),e.router.navigate(["/authentication/signin"])):e.toastrService.error(i.status)}))}}]),t}(),be.\u0275fac=function(e){return new(e||be)(y.Y36(y.sBO),y.Y36(l.qu),y.Y36(R.T),y.Y36(J._W),y.Y36(F),y.Y36(x.F0),y.Y36(x.gz),y.Y36(D.t2))},be.\u0275cmp=y.Xpm({type:be,selectors:[["app-edit-license"]],viewQuery:function(e,i){var t;1&e&&(y.Gf(pe,5),y.Gf(me,5)),2&e&&(y.iGM(t=y.CRH())&&(i.matACTrigger=t.first),y.iGM(t=y.CRH())&&(i.AdvancelicenceInput=t.first))},decls:131,vars:66,consts:[["bdColor","rgba(51,51,51,0.8)","size","medium","color","#fff","type","ball-scale-multiple"],[2,"font-size","20px","color","white"],[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"row","clearfix"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"header"],[1,"body"],[1,"m-4",3,"formGroup"],[1,"col-xl-4","col-lg-4","col-md-12","col-sm-12","mb-2"],["appearance","outline",1,"example-full-width","mb-3"],["matInput","","formControlName","license_class","readonly",""],[4,"ngIf"],["matInput","","formControlName","minimum_age"],["formControlName","cdl_req",1,"example-margin"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2"],["formControlName","license_desc_english",3,"editor"],["formControlName","license_desc_malay",3,"editor"],["formControlName","criteria_english",3,"editor"],["formControlName","criteria_malay",3,"editor"],[2,"width","100%","height","50%",3,"src"],["formControlName","license_image_name","required","",3,"change"],["matSuffix",""],["formControlName","license_flow_name","required","",3,"change"],["formControlName","gdlPractical",1,"example-margin"],["formControlName","psvPractical",1,"example-margin"],["formControlName","isActive",1,"example-margin"],["formControlName","upgradeLicense",1,"example-margin",3,"change"],["formControlName","advanceLicense",1,"example-margin",3,"change"],["class","example-full-width mb-3","appearance","outline",4,"ngIf"],["class","example-full-width",4,"ngIf"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],["mat-raised-button","","color","primary",1,"btn-space",3,"disabled","click"],["type","button","mat-button","",3,"click"],["type","text","matInput","",3,"formControl","matAutocomplete"],[3,"displayWith"],["autoNric","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"value"],[1,"example-full-width"],["aria-label","Fruit selection"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["type","text","matInput","",3,"matChipInputFor","matChipInputSeparatorKeyCodes","formControl","matAutocomplete","matChipInputTokenEnd"],["AdvancelicenceInput","","autocompleteTrigger","matAutocompleteTrigger"],["autoActiveFirstOption","",3,"optionSelected"],["autoLicense","matAutocomplete"],["mat-icon-button","","matSuffix","",2,"width","34px","height","34px",3,"click"],[2,"width","34px"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],["color","primary",2,"padding","0 12px",3,"checked"]],template:function(e,i){1&e&&(y.TgZ(0,"ngx-spinner",0),y.TgZ(1,"p",1),y._uU(2,"Loading..."),y.qZA(),y.qZA(),y.TgZ(3,"section",2),y.TgZ(4,"div",3),y.TgZ(5,"div",4),y.TgZ(6,"div",5),y.TgZ(7,"div",6),y.TgZ(8,"ul",7),y.TgZ(9,"li",8),y.TgZ(10,"h4",9),y._uU(11),y.ALo(12,"translate"),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.TgZ(13,"div",10),y.TgZ(14,"div",11),y.TgZ(15,"div",12),y.TgZ(16,"div",13),y.TgZ(17,"h2"),y._uU(18),y.ALo(19,"translate"),y.qZA(),y.qZA(),y.TgZ(20,"div",14),y.TgZ(21,"form",15),y.TgZ(22,"div",5),y.TgZ(23,"div",16),y.TgZ(24,"mat-form-field",17),y.TgZ(25,"mat-label"),y._uU(26),y.ALo(27,"translate"),y.qZA(),y._UZ(28,"input",18),y.YNc(29,ge,3,3,"mat-error",19),y.qZA(),y.qZA(),y.TgZ(30,"div",16),y.TgZ(31,"mat-form-field",17),y.TgZ(32,"mat-label"),y._uU(33),y.ALo(34,"translate"),y.qZA(),y._UZ(35,"input",20),y.qZA(),y.qZA(),y.TgZ(36,"div",16),y.TgZ(37,"mat-checkbox",21),y._uU(38),y.ALo(39,"translate"),y.qZA(),y.qZA(),y.qZA(),y.TgZ(40,"div",5),y.TgZ(41,"div",22),y.TgZ(42,"mat-label"),y._uU(43),y.ALo(44,"translate"),y.qZA(),y._UZ(45,"ckeditor",23),y.YNc(46,Ze,3,3,"mat-error",19),y.qZA(),y.TgZ(47,"div",22),y.TgZ(48,"mat-label"),y._uU(49),y.ALo(50,"translate"),y.qZA(),y._UZ(51,"ckeditor",24),y.YNc(52,he,3,3,"mat-error",19),y.qZA(),y.qZA(),y.TgZ(53,"div",5),y.TgZ(54,"div",22),y.TgZ(55,"mat-label"),y._uU(56),y.ALo(57,"translate"),y.qZA(),y._UZ(58,"ckeditor",25),y.YNc(59,ve,3,3,"mat-error",19),y.qZA(),y.TgZ(60,"div",22),y.TgZ(61,"mat-label"),y._uU(62),y.ALo(63,"translate"),y.qZA(),y._UZ(64,"ckeditor",26),y.YNc(65,fe,3,3,"mat-error",19),y.qZA(),y.qZA(),y.TgZ(66,"div",5),y.TgZ(67,"div",22),y.TgZ(68,"div",5),y.TgZ(69,"div",22),y._UZ(70,"img",27),y.qZA(),y.TgZ(71,"div",22),y.TgZ(72,"mat-form-field",17),y.TgZ(73,"mat-label"),y._uU(74),y.ALo(75,"translate"),y.qZA(),y.TgZ(76,"ngx-mat-file-input",28),y.NdJ("change",function(e){return i.onFileChangeLicenseImage(e)}),y.qZA(),y.TgZ(77,"mat-icon",29),y._uU(78,"cloud_upload"),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.TgZ(79,"div",22),y.TgZ(80,"div",5),y.TgZ(81,"div",22),y._UZ(82,"img",27),y.qZA(),y.TgZ(83,"div",22),y.TgZ(84,"mat-form-field",17),y.TgZ(85,"mat-label"),y._uU(86),y.ALo(87,"translate"),y.qZA(),y.TgZ(88,"ngx-mat-file-input",30),y.NdJ("change",function(e){return i.onFileChangeLicenseFlow(e)}),y.qZA(),y.TgZ(89,"mat-icon",29),y._uU(90,"cloud_upload"),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.TgZ(91,"div",5),y.TgZ(92,"div",22),y.TgZ(93,"div",5),y.TgZ(94,"div",16),y.TgZ(95,"mat-checkbox",31),y._uU(96),y.ALo(97,"translate"),y.qZA(),y.qZA(),y.TgZ(98,"div",16),y.TgZ(99,"mat-checkbox",32),y._uU(100),y.ALo(101,"translate"),y.qZA(),y.qZA(),y.TgZ(102,"div",16),y.TgZ(103,"mat-checkbox",33),y._uU(104,"Active"),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.TgZ(105,"div",22),y.TgZ(106,"div",5),y.TgZ(107,"div",22),y.TgZ(108,"mat-checkbox",34),y.NdJ("change",function(e){return i.checkUpgrade(e)}),y._uU(109),y.ALo(110,"translate"),y.qZA(),y.qZA(),y.TgZ(111,"div",22),y.TgZ(112,"mat-checkbox",35),y.NdJ("change",function(e){return i.checkAdvance(e)}),y._uU(113),y.ALo(114,"translate"),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.TgZ(115,"div",5),y._UZ(116,"div",22),y.TgZ(117,"div",22),y.TgZ(118,"div",5),y.TgZ(119,"div",22),y.YNc(120,_e,10,10,"mat-form-field",36),y.qZA(),y.TgZ(121,"div",22),y.YNc(122,Ie,17,11,"mat-form-field",37),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.TgZ(123,"div",5),y.TgZ(124,"div",38),y.TgZ(125,"button",39),y.NdJ("click",function(){return i.updateLicenseDetails()}),y._uU(126),y.ALo(127,"translate"),y.qZA(),y.TgZ(128,"button",40),y.NdJ("click",function(){return i.goBack()}),y._uU(129),y.ALo(130,"translate"),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA()),2&e&&(y.xp6(11),y.Oqu(y.lcZ(12,32,"LICENSE.EDITTITLE")),y.xp6(7),y.Oqu(y.lcZ(19,34,"LICENSE.EDITTITLE")),y.xp6(3),y.Q6J("formGroup",i.editLicenseForm),y.xp6(5),y.Oqu(y.lcZ(27,36,"LICENSE.LIST.LICENSE-CLASS")),y.xp6(3),y.Q6J("ngIf",i.editLicenseForm.get("license_class").hasError("required")),y.xp6(4),y.Oqu(y.lcZ(34,38,"LICENSE.LIST.MIN-AGE")),y.xp6(5),y.Oqu(y.lcZ(39,40,"LICENSE.LIST.CDL-REQ")),y.xp6(5),y.hij("",y.lcZ(44,42,"LICENSE.LIST.LICENSE-ENGLISH"),"*"),y.xp6(2),y.Q6J("editor",i.Editor),y.xp6(1),y.Q6J("ngIf",i.editLicenseForm.get("license_desc_english").hasError("required")),y.xp6(3),y.hij("",y.lcZ(50,44,"LICENSE.LIST.LICENSE-MALAY"),"*"),y.xp6(2),y.Q6J("editor",i.Editor),y.xp6(1),y.Q6J("ngIf",i.editLicenseForm.get("license_desc_malay").hasError("required")),y.xp6(4),y.hij("",y.lcZ(57,46,"LICENSE.LIST.CRITERIA-ENGLISH"),"*"),y.xp6(2),y.Q6J("editor",i.Editor),y.xp6(1),y.Q6J("ngIf",i.editLicenseForm.get("criteria_english").hasError("required")),y.xp6(3),y.hij("",y.lcZ(63,48,"LICENSE.LIST.CRITERIA-MALAY"),"*"),y.xp6(2),y.Q6J("editor",i.Editor),y.xp6(1),y.Q6J("ngIf",i.editLicenseForm.get("criteria_malay").hasError("required")),y.xp6(5),y.s9C("src",i.licenseImg_preview?i.licenseImg_preview:i.apiURL+"/"+i.editLicenseForm.value.license_image,y.LSH),y.xp6(4),y.Oqu(y.lcZ(75,50,"LICENSE.LIST.LICENSE-IMAGE")),y.xp6(8),y.s9C("src",i.licenseFlow_preview?i.licenseFlow_preview:i.apiURL+"/"+i.editLicenseForm.value.license_flow,y.LSH),y.xp6(4),y.Oqu(y.lcZ(87,52,"LICENSE.LIST.LICENSE-FLOW")),y.xp6(10),y.Oqu(y.lcZ(97,54,"LICENSE.LIST.GDL-PRACTICAL")),y.xp6(4),y.Oqu(y.lcZ(101,56,"LICENSE.LIST.PSV-PRACTICAL")),y.xp6(9),y.Oqu(y.lcZ(110,58,"LICENSE.LIST.UPGRADE")),y.xp6(4),y.Oqu(y.lcZ(114,60,"LICENSE.LIST.ADVANCE")),y.xp6(7),y.Q6J("ngIf",i.showUpgradeLicense),y.xp6(2),y.Q6J("ngIf",i.showAdvanceLicense),y.xp6(3),y.Q6J("disabled",!i.editLicenseForm.valid),y.xp6(1),y.Oqu(y.lcZ(127,62,"BUTTON.EDIT-BTN")),y.xp6(3),y.Oqu(y.lcZ(130,64,"BUTTON.CANCEL-BTN")))},directives:[D.Ro,l._Y,l.JL,l.sg,d.KE,d.hX,p.Nt,l.Fj,l.JJ,l.u,r.O5,T.oG,B.u,_.Yh,l.Q7,Z.Hw,d.R9,g.lW,d.TO,V.ZL,l.oH,V.XC,r.sg,$.ey,z.qn,z.oH,z.HS,z.qH],pipes:[Y.X$,r.Ov],styles:["[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:400px}"]}),be)}],Ne=function(){var e=function e(){a(this,e)};return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=y.oAB({type:e}),e.\u0275inj=y.cJS({imports:[[x.Bz.forChild(ye)],x.Bz]}),e}(),we=((Ee=function e(){a(this,e)}).\u0275fac=function(e){return new(e||Ee)},Ee.\u0275mod=y.oAB({type:Ee}),Ee.\u0275inj=y.cJS({providers:[F],imports:[[E.xD,B.d,r.ez,l.u5,l.UX,o.p0,u.TU,d.lN,p.c,m.ZX,g.ot,Z.Ps,v.Is,f.JX,A.g0,h.LD,L.FA,T.p9,z.Hi,q.Nh,S.Tx,_.Ad,Ne,C.Cq,I.T5,b.yI,Y.aw,V.Bb,D.ef]]}),Ee)}}])}();