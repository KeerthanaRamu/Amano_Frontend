!function(){function t(e,n){return(t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(e,n)}function e(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var a,i=r(t);if(e){var o=r(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return n(this,a)}}function n(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return a(t)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function s(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}(self.webpackChunksmart=self.webpackChunksmart||[]).push([[8098],{28098:function(n,r,o){"use strict";o.r(r),o.d(r,{ScheduleModule:function(){return lt}});var c=o(61116),l=o(31041),u=o(39199),d=o(5609),f=o(13070),h=o(9550),g=o(63589),p=o(84369),v=o(77307),m=o(13841),Z=o(92935),_=o(59241),b=o(37112),y=o(69024),T=o(40994),A=o(1325),q=o(57173),D=o(97070),k=o(87672),w=o(44716),O=o(51601),x=o(35729),C=o(35366),I=o(97425),U=o(42693),S=o(89647),E=o(51816),P=o(529),M=o(91681),N=function(){var t=function(){function t(e){i(this,t),this.http=e,this.API_URL="assets/data/calendar.json",this.httpOptions={headers:new U.WM({"Content-Type":"application/json"})},this.dataChange=new I.X([])}return s(t,[{key:"data",get:function(){return this.dataChange.value}},{key:"getDialogData",value:function(){return this.dialogData}},{key:"getAllCalendars",value:function(){return this.http.get(this.API_URL).pipe((0,E.K)(this.errorHandler))}},{key:"deleteCalendar",value:function(t){this.dialogData=t}},{key:"errorHandler",value:function(t){var e;return e=t.error instanceof ErrorEvent?t.error.message:"Error Code: ".concat(t.status,"\nMessage: ").concat(t.message),console.log(e),(0,S._)(e)}},{key:"getScheduleList",value:function(){return this.http.get("".concat(P.N.apiUrl,"/webRoutes/getScheduleList")).pipe((0,M.U)(function(t){return t}))}},{key:"getScheduleDetailsForInstructor",value:function(){return this.http.get("".concat(P.N.apiUrl,"/instructor/getScheduleDetailsForInstructor")).pipe((0,M.U)(function(t){return t}))}},{key:"getStudentDetailsForInstructor",value:function(t){return this.http.post("".concat(P.N.apiUrl,"/instructor/getStudentDetailsForInstructor"),{calendarData:t}).pipe((0,M.U)(function(t){return t}))}},{key:"getTimeDetails",value:function(){return this.http.get("".concat(P.N.apiUrl,"/webRoutes/getTimeDetails")).pipe((0,M.U)(function(t){return t}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(C.LFG(U.eN))},t.\u0275prov=C.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),F=o(50518),L=o(60649);function R(t,e){if(1&t&&(C.TgZ(0,"tr"),C.TgZ(1,"td"),C._uU(2),C.qZA(),C.TgZ(3,"td"),C._uU(4),C.qZA(),C.TgZ(5,"td"),C._uU(6),C.qZA(),C.TgZ(7,"td"),C._uU(8),C.qZA(),C.TgZ(9,"td"),C._uU(10),C.qZA(),C.qZA()),2&t){var n=e.$implicit;C.xp6(2),C.Oqu(n.name),C.xp6(2),C.Oqu(n.nric_number),C.xp6(2),C.Oqu(n.passport_number),C.xp6(2),C.Oqu(n.mobile_number),C.xp6(2),C.Oqu(n.email_id)}}function Y(t,e){if(1&t&&(C.TgZ(0,"table",17),C.TgZ(1,"tr"),C.TgZ(2,"th"),C._uU(3,"Name"),C.qZA(),C.TgZ(4,"th"),C._uU(5,"NRIC Number"),C.qZA(),C.TgZ(6,"th"),C._uU(7,"Passport Number"),C.qZA(),C.TgZ(8,"th"),C._uU(9,"Mobile No"),C.qZA(),C.TgZ(10,"th"),C._uU(11,"Email Id"),C.qZA(),C.qZA(),C.YNc(12,R,11,5,"tr",18),C.qZA()),2&t){var n=C.oxw().$implicit;C.xp6(12),C.Q6J("ngForOf",n.studentList)}}function j(t,e){1&t&&(C.TgZ(0,"li"),C.TgZ(1,"span",19),C._uU(2," -- "),C.qZA(),C.qZA())}function z(t,e){if(1&t&&(C.TgZ(0,"ul",14),C.TgZ(1,"li"),C._uU(2),C.qZA(),C.YNc(3,Y,13,1,"table",15),C.YNc(4,j,3,0,"li",16),C.qZA()),2&t){var n=e.$implicit;C.xp6(2),C.Oqu(n.range),C.xp6(1),C.Q6J("ngIf",n.studentList.length>0),C.xp6(1),C.Q6J("ngIf",0==n.studentList.length)}}var J=function(){var t=function(){function t(e,n,a,r,o){var s=this;i(this,t),this.dialogRef=e,this.data=n,this.calendarService=a,this.fb=r,this.toastrService=o,this.showDeleteBtn=!1,this.getTimeDetails(),this.action=n.action,"edit"===this.action&&(this.dialogTitle=n.calendar.title,this.calendar=n.calendar,console.log("this.calendar------------------",this.calendar),this.calendarService.getStudentDetailsForInstructor(this.calendar).subscribe(function(t){s.studentData=t.data,console.log("studentData==========",s.studentData);for(var e=0;e<s.studentData.length;e++)for(var n=0;n<s.timeArray.length;n++)1==s.zeroPad(s.studentData[e].TimeSlot,s.timeArray.length)[n]&&s.timeArray[n].studentList.push({id:s.studentData[e].id,enrollid:s.studentData[e].enroll_id,name:s.studentData[e].name,nric_number:s.studentData[e].nric_number,passport_number:s.studentData[e].passport_number,mobile_number:s.studentData[e].mobile_number,email_id:s.studentData[e].email_id});console.log("this.timeArray=======",s.timeArray)}))}return s(t,[{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"zeroPad",value:function(t,e){return t.toString().padStart(Number(e),"0")}},{key:"getTimeDetails",value:function(){var t=this;this.calendarService.getTimeDetails().subscribe(function(e){var n=e.data[0];console.log("resObj---",n),t.makeTimeIntervals(n.working_hour_from.substr(0,5),n.working_hour_to.substr(0,5),60,n.rest_hour_from.substr(0,5),n.rest_hour_to.substr(0,5))})}},{key:"makeTimeIntervals",value:function(t,e,n,a,r){t=t.toString().split(":"),e=e.toString().split(":"),n=parseInt(n,10);var i=function(t){return t<10?"0"+t.toString():t},o=parseInt(t[0],10),s=parseInt(t[1],10),c=parseInt(e[0],10),l=(parseInt(e[1],10),o),u=s,d=l+":"+i(u),f="",h=[];do{((u+=n)%60==0||u>60)&&(u=60===u?0:u-60,l+=1),f=l+":"+i(u),h.push({range:d+" - "+f,checkValue:0,studentList:[]}),d=f}while(l!==c);var g=a+" - "+r;this.timeArray=h.filter(function(t){return t.range!=g})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(C.Y36(Z.so),C.Y36(Z.WI),C.Y36(N),C.Y36(l.qu),C.Y36(F._W))},t.\u0275cmp=C.Xpm({type:t,selectors:[["app-form-dialog"]],decls:21,vars:5,consts:[[1,"addContainer"],[1,"modalHeader"],[1,"editRowModal"],[1,"modalHeader","clearfix"],[1,"modal-about"],[1,"font-weight-bold","p-t-5","p-l-10","font-17"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content",""],[1,"row"],[1,"list-group","list-group-unbordered"],[1,"list-group-item"],[1,"profile-desc-item","float-end"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],["style","list-style: none;",4,"ngFor","ngForOf"],[2,"list-style","none"],["id","customers",4,"ngIf"],[4,"ngIf"],["id","customers"],[4,"ngFor","ngForOf"],[2,"padding","5px","margin-left","16px"]],template:function(t,e){1&t&&(C.TgZ(0,"div",0),C.TgZ(1,"div",1),C.TgZ(2,"div",2),C.TgZ(3,"div",3),C.TgZ(4,"div",4),C.TgZ(5,"div",5),C._uU(6),C.ALo(7,"translate"),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.TgZ(8,"button",6),C.NdJ("click",function(){return e.dialogRef.close()}),C.TgZ(9,"mat-icon"),C._uU(10,"close"),C.qZA(),C.qZA(),C.qZA(),C.TgZ(11,"div",7),C.TgZ(12,"div",8),C.TgZ(13,"ul",9),C.TgZ(14,"li",10),C.TgZ(15,"b"),C._uU(16,"Student Details "),C.qZA(),C._UZ(17,"div",11),C.qZA(),C.qZA(),C.qZA(),C.TgZ(18,"div",8),C.TgZ(19,"div",12),C.YNc(20,z,5,3,"ul",13),C.qZA(),C.qZA(),C.qZA(),C.qZA()),2&t&&(C.xp6(6),C.AsE(" ",C.lcZ(7,3,"SCHEDULE.VIEWTITLE")," for ",e.calendar.title,""),C.xp6(14),C.Q6J("ngForOf",e.timeArray))},directives:[p.lW,v.Hw,Z.xY,c.sg,c.O5],pipes:[L.X$],styles:["#customers[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif;border-collapse:collapse;width:100%}#customers[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], #customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px}#customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}#customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:12px;padding-bottom:12px;text-align:left;background-color:grey;color:#fff}"]}),t}(),H=function(){function t(e){i(this,t),this.id=e.id||this.getRandomID(),this.lead_time=e.lead_time||"",this.schedule_name=e.schedule_name||"",this.schedule_owner=e.schedule_owner||"",this.schedule_view=e.schedule_view||"",this.schedule_view_assignment=e.schedule_view_assignment||"",this.startDate=(0,c.p6)(new Date,"yyyy-MM-dd","en")||"",this.endDate=(0,c.p6)(new Date,"yyyy-MM-dd","en")||""}return s(t,[{key:"getRandomID",value:function(){var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return t()+t()}}]),t}(),B=o(60352),G=o(11757),Q=["calendar"];function X(t,e){if(1&t){var n=C.EpF();C.TgZ(0,"li"),C.TgZ(1,"mat-checkbox",18),C.NdJ("change",function(t){var e=C.CHM(n).$implicit;return C.oxw().changeCategory(t,e)}),C._uU(2),C.qZA(),C.qZA()}if(2&t){var a=e.$implicit;C.xp6(1),C.Q6J("checked",a.checked)("value",a.status),C.xp6(1),C.hij(" ",a.status," ")}}var W,$=[{path:"",component:(W=function(n){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&t(e,n)}(o,n);var r=e(o);function o(t,e,n,s){var c;return i(this,o),(c=r.call(this)).fb=t,c.dialog=e,c.calendarService=n,c.snackBar=s,c.scheduleList=[],c.filterOptions="All",c.calendarData=[],c.filterItems=[],c.calendarOptions={headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},initialView:"dayGridMonth",displayEventTime:!1,weekends:!0,editable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,eventClick:c.handleEventClick.bind(a(c)),eventsSet:c.handleEvents.bind(a(c))},c.dialogTitle="Add New Event",c.calendar=new H({}),c.addCusForm=c.createCalendarForm(c.calendar),c}return s(o,[{key:"ngOnInit",value:function(){this.getScheduleDetails()}},{key:"getScheduleDetails",value:function(){var t=this;this.calendarData=[],this.calendarService.getScheduleDetailsForInstructor().subscribe(function(e){console.log("----res['data']----",e.data);for(var n=function(n){t.scheduleList.some(function(t){return t.status==e.data[n].status})||(t.scheduleList.push({status:e.data[n].status,checked:!0}),t.filterItems.push(e.data[n].status)),t.calendarData.push({title:e.data[n].status,start:new Date(e.data[n].startDate),end:new Date(e.data[n].endDate),className:e.data[n].schedule_color,id:e.data[n].id,lead_time:e.data[n].lead_time,schedule_name:e.data[n].schedule_id,schedule_view:e.data[n].schedule_view,schedule_view_assignment:e.data[n].schedule_assignment,startDate:new Date(e.data[n].startDate),endDate:new Date(e.data[n].endDate),statusid:e.data[n].status_id})},a=0;a<e.data.length;a++)n(a);t.calendarEvents=t.calendarData,t.tempEvents=t.calendarEvents,t.calendarOptions.events=t.calendarEvents})}},{key:"changeCategory",value:function(t,e){console.log("---------",e),t.checked?this.filterItems.push(e.status):this.filterItems.splice(this.filterItems.indexOf(e.status),1),this.filterEvent(this.filterItems)}},{key:"filterEvent",value:function(t){var e=this.calendarEvents.filter(function(e){return t.map(function(t){return t}).includes(e.title)});this.calendarOptions.events=e}},{key:"handleEventClick",value:function(t){this.eventClick(t)}},{key:"eventClick",value:function(t){var e=this;console.log("row===",t.event._def.extendedProps);var n,a={id:t.event.id,title:t.event.title,statusid:t.event._def.extendedProps.statusid,schedule_name:t.event._def.extendedProps.schedule_name,startDate:t.event.start};n="true"===localStorage.getItem("isRtl")?"rtl":"ltr";var r=this.dialog.open(J,{data:{calendar:a,action:"edit"},direction:n});r.updateSize("1000px","500px"),this.subs.sink=r.afterClosed().subscribe(function(t){"submit"===t?(e.getScheduleDetails(),e.addCusForm.reset()):"delete"===t&&e.getScheduleDetails()})}},{key:"handleEvents",value:function(t){}},{key:"createCalendarForm",value:function(t){return this.fb.group({id:[t.id],lead_time:[t.lead_time,[l.kI.required,l.kI.pattern("[a-zA-Z]+([a-zA-Z ]+)*")]],schedule_name:[t.schedule_name],schedule_view:[t.schedule_view],schedule_view_assignment:[t.schedule_view_assignment],startDate:[t.startDate,[l.kI.required]],endDate:[t.endDate,[l.kI.required]]})}},{key:"showNotification",value:function(t,e,n,a){this.snackBar.open(e,"",{duration:2e3,verticalPosition:n,horizontalPosition:a,panelClass:t})}}]),o}(B.n),W.\u0275fac=function(t){return new(t||W)(C.Y36(l.qu),C.Y36(Z.uw),C.Y36(N),C.Y36(g.ux))},W.\u0275cmp=C.Xpm({type:W,selectors:[["app-add-schedule"]],viewQuery:function(t,e){var n;1&t&&C.Gf(Q,5),2&t&&C.iGM(n=C.CRH())&&(e.calendar=n.first)},features:[C.qOj],decls:23,vars:5,consts:[[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"col-md-12","col-sm-12"],[1,"card"],[1,"card-body"],[1,"col-md-2","col-sm-12","p-l-30"],[1,"m-b-25"],[1,"filter-container"],[4,"ngFor","ngForOf"],[1,"col-md-10","col-sm-12"],[1,"panel-body"],[3,"options"],["color","primary",3,"checked","value","change"]],template:function(t,e){1&t&&(C.TgZ(0,"section",0),C.TgZ(1,"div",1),C.TgZ(2,"div",2),C.TgZ(3,"div",3),C.TgZ(4,"div",4),C.TgZ(5,"ul",5),C.TgZ(6,"li",6),C.TgZ(7,"h4",7),C._uU(8),C.ALo(9,"translate"),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.TgZ(10,"div",3),C.TgZ(11,"div",8),C.TgZ(12,"div",9),C.TgZ(13,"div",10),C.TgZ(14,"div",3),C.TgZ(15,"div",11),C._UZ(16,"div",12),C.TgZ(17,"div",13),C.TgZ(18,"ul"),C.YNc(19,X,3,3,"li",14),C.qZA(),C.qZA(),C.qZA(),C.TgZ(20,"div",15),C.TgZ(21,"div",16),C._UZ(22,"full-calendar",17),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.qZA()),2&t&&(C.xp6(8),C.Oqu(C.lcZ(9,3,"SCHEDULE.TITLE")),C.xp6(11),C.Q6J("ngForOf",e.scheduleList),C.xp6(3),C.Q6J("options",e.calendarOptions))},directives:[c.sg,G.woE,T.oG],pipes:[L.X$],styles:[""]}),W)}],V=function(){var t=function t(){i(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=C.oAB({type:t}),t.\u0275inj=C.cJS({imports:[[x.Bz.forChild($)],x.Bz]}),t}(),K=o(79961),tt=o(46739),et=o(17647),nt=o(95522),at=o(37192),rt=o(279),it=o(9451),ot=o(85256),st=o(52352);G.z1U.registerPlugins([rt.ZP,it.ZP,ot.Z,st.ZP]);var ct,lt=((ct=function t(){i(this,t)}).\u0275fac=function(t){return new(t||ct)},ct.\u0275mod=C.oAB({type:ct}),ct.\u0275inj=C.cJS({providers:[N],imports:[[et.xD,nt.Hi,tt.d,c.ez,l.u5,l.UX,u.p0,d.TU,f.lN,h.c,g.ZX,p.ot,v.Ps,Z.Is,_.JX,b.g0,m.LD,y.FA,T.p9,q.Nh,D.Tx,A.Ad,V,k.Cq,w.T5,O.yI,L.aw,K.Bb,G.z1U,at.Ll,at.x]]}),ct)}}])}();