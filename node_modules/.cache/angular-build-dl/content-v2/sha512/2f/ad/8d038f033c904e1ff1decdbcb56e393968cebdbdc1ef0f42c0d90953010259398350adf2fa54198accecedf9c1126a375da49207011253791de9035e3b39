(self.webpackChunksmart=self.webpackChunksmart||[]).push([[5198],{25198:function(t,e,a){"use strict";a.r(e),a.d(e,{ReportsModule:function(){return k}});var r=a(61116),n=a(31041),o=a(39199),l=a(5609),i=a(13070),s=a(9550),c=a(84369),d=a(77307),m=a(92935),p=a(59241),u=a(69024),g=a(40994),h=a(97070),Z=a(87672),f=a(60649),T=a(79961),A=a(17647),b=a(31269),S=a(22797),w=a(7436),v=a(91681),q=a(529),x=a(35366),L=a(42693);let R=(()=>{class t{constructor(t){this.http=t}getCurrentDaySalesReport(){return this.http.get(`${q.N.apiUrl}/report/getCurrentDaySalesReport`).pipe((0,v.U)(t=>t))}}return t.\u0275fac=function(e){return new(e||t)(x.LFG(L.eN))},t.\u0275prov=x.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var C=a(35729),E=a(64762),_=a(59365),D=a(29609),y=a(50518);function N(t,e){if(1&t&&(x.TgZ(0,"td",35),x._UZ(1,"img",36),x.qZA()),2&t){const t=e.value;x.xp6(1),x.s9C("src",t||"assets/images/nologo.png",x.LSH)}}const P=[{path:"sales-report",component:(()=>{class t{constructor(t,e,a){this.reportService=t,this.toastrService=e,this.fb=a,this.columns=[{name:"Name"},{name:"NRIC Number"},{name:"Passport Number"},{name:"Gender"},{name:"Mobile"},{name:"Email"},{name:"Status"}],this.data=[],this.filteredData=[],this.translateVal="ml"==localStorage.lang?"malay":"english",this.today=new Date,this.fileName="Sales-report-"+this.today+".xlsx"}ngOnInit(){this.getCurrentDaySalesReport()}refresh(){this.getCurrentDaySalesReport()}getCurrentDaySalesReport(){this.reportService.getCurrentDaySalesReport().subscribe(t=>{for(let e=0;e<t.data.length;e++)t.data[e].package_english=t.data[e]["package_"+this.translateVal],t.data[e].english=t.data[e][this.translateVal];this.data=t.data,this.filteredData=t.data})}filterDatatable(t){const e=t.target.value.toLowerCase(),a=this.columns.length,r=Object.keys(this.filteredData[0]);this.data=this.filteredData.filter(function(t){for(let n=0;n<a;n++)if(-1!==t[r[n]].toString().toLowerCase().indexOf(e)||!e)return!0}),this.table.offset=0}export(){if(this.filteredData.length>0){var t={fieldSeparator:",",quoteStrings:'"',decimalseparator:".",showLabels:!0,showTitle:!0,title:"Sales Report - "+D(new Date).format("YYYY-MM-DD"),useBom:!0,noDownload:!1,headers:["Student Name","NRIC Number","Passport Number","Transaction Number","Package","Payment Phase","Amount Paid"]};let e="Sales_Report_"+D(new Date).format("YYYY-MM-DD");console.log("this.filteredData========",this.filteredData,e);const a=this.filteredData.map(t=>{var e=(0,E._T)(t,["malay","package_malay","profile_img"]);return Object.assign({},e)});new _.J0(a,e,t)}}}return t.\u0275fac=function(e){return new(e||t)(x.Y36(R),x.Y36(y._W),x.Y36(n.qu))},t.\u0275cmp=x.Xpm({type:t,selectors:[["app-sales-report"]],viewQuery:function(t,e){if(1&t&&x.Gf(A.nE,5),2&t){let t;x.iGM(t=x.CRH())&&(e.table=t.first)}},decls:50,vars:43,consts:[[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"col-md-12"],[1,"mt-5"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"body"],[1,"table-responsive"],[1,"materialTableHeader"],[1,"col-8"],[1,"col-2",2,"padding","10px"],["mat-raised-button","",1,"btn","btn-success",3,"click"],[1,"fas","fa-file-excel"],[1,"col-2"],[1,"header-buttons"],[1,"icon-button-demo"],["mat-mini-fab","","color","primary",3,"click"],[1,"col-white"],[1,"material",3,"rows","columns","sortType","columnMode","headerHeight","footerHeight","rowHeight","limit"],["table",""],["name","Image","sortable","false","prop","profile_img",3,"width"],["ngx-datatable-cell-template",""],["prop","name",3,"name","width"],["prop","nric_number",3,"name","width"],["prop","passport_number",3,"name","width"],["prop","enrollment_no",3,"name","width"],["prop","package_english",3,"name","width"],["prop","english",3,"name","width"],["prop","payment_amount",3,"name","width"],[1,"table-img","padding-0"],["width","40",3,"src"]],template:function(t,e){1&t&&(x.TgZ(0,"section",0),x.TgZ(1,"div",1),x.TgZ(2,"div",2),x.TgZ(3,"div",3),x.TgZ(4,"div",4),x.TgZ(5,"ul",5),x.TgZ(6,"li",6),x.TgZ(7,"h4",7),x._uU(8),x.ALo(9,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(10,"div",3),x.TgZ(11,"div",8),x.TgZ(12,"div",9),x.TgZ(13,"div",10),x.TgZ(14,"div",11),x.TgZ(15,"div",12),x.TgZ(16,"div",13),x.TgZ(17,"div",14),x.TgZ(18,"div",3),x._UZ(19,"div",15),x.TgZ(20,"div",16),x.TgZ(21,"button",17),x.NdJ("click",function(){return e.export()}),x._uU(22),x.ALo(23,"translate"),x._UZ(24,"i",18),x.qZA(),x.qZA(),x.TgZ(25,"div",19),x.TgZ(26,"ul",20),x.TgZ(27,"li"),x.TgZ(28,"div",21),x.TgZ(29,"button",22),x.NdJ("click",function(){return e.refresh()}),x.TgZ(30,"mat-icon",23),x._uU(31,"refresh "),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(32,"ngx-datatable",24,25),x.TgZ(34,"ngx-datatable-column",26),x.YNc(35,N,2,1,"ng-template",27),x.qZA(),x._UZ(36,"ngx-datatable-column",28),x.ALo(37,"translate"),x._UZ(38,"ngx-datatable-column",29),x.ALo(39,"translate"),x._UZ(40,"ngx-datatable-column",30),x.ALo(41,"translate"),x._UZ(42,"ngx-datatable-column",31),x.ALo(43,"translate"),x._UZ(44,"ngx-datatable-column",32),x.ALo(45,"translate"),x._UZ(46,"ngx-datatable-column",33),x.ALo(47,"translate"),x._UZ(48,"ngx-datatable-column",34),x.ALo(49,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()),2&t&&(x.xp6(8),x.Oqu(x.lcZ(9,25,"SALES-REPORT.TITLE")),x.xp6(14),x.hij("",x.lcZ(23,27,"BUTTON.EXCEL-BTN")," "),x.xp6(10),x.Q6J("rows",e.data)("columns",e.columns)("sortType","multi")("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","60")("limit",10),x.xp6(2),x.Q6J("width",100),x.xp6(2),x.s9C("name",x.lcZ(37,29,"SALES-REPORT.LIST.STUDENT-NAME")),x.Q6J("width",130),x.xp6(2),x.s9C("name",x.lcZ(39,31,"SALES-REPORT.LIST.NRIC")),x.Q6J("width",130),x.xp6(2),x.s9C("name",x.lcZ(41,33,"SALES-REPORT.LIST.PASSPORT")),x.Q6J("width",200),x.xp6(2),x.s9C("name",x.lcZ(43,35,"SALES-REPORT.LIST.TRAN-NO")),x.Q6J("width",200),x.xp6(2),x.s9C("name",x.lcZ(45,37,"SALES-REPORT.LIST.PACKAGE")),x.Q6J("width",200),x.xp6(2),x.s9C("name",x.lcZ(47,39,"SALES-REPORT.LIST.PAYMENT-PHASE")),x.Q6J("width",200),x.xp6(2),x.s9C("name",x.lcZ(49,41,"SALES-REPORT.LIST.AMOUNT-PAID")),x.Q6J("width",200))},directives:[c.lW,d.Hw,A.nE,A.UC,A.vq],pipes:[f.X$],styles:[""]}),t})()}];let U=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=x.oAB({type:t}),t.\u0275inj=x.cJS({imports:[[C.Bz.forChild(P)],C.Bz]}),t})(),k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=x.oAB({type:t}),t.\u0275inj=x.cJS({providers:[R],imports:[[b.ef,S.QW,w.Fk,A.xD,r.ez,n.u5,n.UX,o.p0,l.TU,i.lN,s.c,c.ot,d.Ps,m.Is,p.JX,u.FA,g.p9,h.Tx,Z.Cq,f.aw,T.Bb,U]]}),t})()}}]);