!function(){function e(e,i){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==i)return;var n,r,a=[],l=!0,o=!1;try{for(i=i.call(e);!(l=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);l=!0);}catch(c){o=!0,r=c}finally{try{l||null==i.return||i.return()}finally{if(o)throw r}}return a}(e,i)||function(e,i){if(!e)return;if("string"==typeof e)return t(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,i)}(e,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(self.webpackChunksmart=self.webpackChunksmart||[]).push([[538],{2538:function(t,n,a){"use strict";a.r(n),a.d(n,{LicenseModule:function(){return ce}});var l=a(61116),o=a(31041),c=a(39199),s=a(5609),d=a(13070),u=a(9550),Z=a(63589),g=a(84369),m=a(77307),p=a(13841),f=a(92935),T=a(59241),A=a(37112),h=a(69024),L=a(40994),q=a(1325),_=a(57173),v=a(97070),I=a(87672),E=a(44716),b=a(51601),S=a(35729),C=a(17647),N=a(35366),x=a(42693),w=a(97425),y=a(91681),U=a(529),k=function(){var e=function(){function e(t){i(this,e),this.http=t,this.isTblLoading=!0,this.dataChange=new w.X([])}return r(e,[{key:"data",get:function(){return this.dataChange.value}},{key:"setLicenseDetails",value:function(e){return this.http.post("".concat(U.N.apiUrl,"/webRoutes/setLicenseDetails"),e).pipe((0,y.U)(function(e){return e}))}},{key:"getLicenseListPerClient",value:function(e){var t=this;return this.http.post("".concat(U.N.apiUrl,"/webRoutes/getLicenseListPerClient"),{client:e}).pipe((0,y.U)(function(e){return t.isTblLoading=!1,t.dataChange.next(e),e}))}},{key:"deleteLicenseDetails",value:function(e,t,i){return this.http.post("".concat(U.N.apiUrl,"/webRoutes/deleteLicenseDetails"),{rowToDelete:e,authToken:t,client:i}).pipe((0,y.U)(function(e){return e}))}},{key:"getLicenseToEdit",value:function(e,t){return this.http.post("".concat(U.N.apiUrl,"/webRoutes/getLicenseToEdit"),{licenseId:e,client:t}).pipe((0,y.U)(function(e){return e}))}},{key:"updateLicenseDetails",value:function(e){return this.http.post("".concat(U.N.apiUrl,"/webRoutes/updateLicenseDetails"),e).pipe((0,y.U)(function(e){return e}))}},{key:"getClientCodeForFolder",value:function(e){return this.http.post("".concat(U.N.apiUrl,"/webRoutes/getClientCodeForFolder"),{client:e}).pipe((0,y.U)(function(e){return e}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(N.LFG(x.eN))},e.\u0275prov=N.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),F=a(24486),J=a(50518),O=a(60649);function D(e,t){if(1&e&&(N.TgZ(0,"td",36),N._UZ(1,"img",37),N.qZA()),2&e){var i=t.value;N.xp6(1),N.s9C("src",i||"assets/images/nologo.png",N.LSH)}}function Y(e,t){if(1&e&&(N.TgZ(0,"td",36),N._UZ(1,"img",37),N.qZA()),2&e){var i=t.value;N.xp6(1),N.s9C("src",i||"assets/images/nologo.png",N.LSH)}}function R(e,t){if(1&e){var i=N.EpF();N.TgZ(0,"span"),N.TgZ(1,"button",38),N.NdJ("click",function(){var e=N.CHM(i),t=e.row,n=e.rowIndex;return N.oxw().editLicense(t,n)}),N.TgZ(2,"mat-icon",39),N._uU(3,"edit "),N.qZA(),N.qZA(),N.TgZ(4,"button",40),N.NdJ("click",function(){var e=N.CHM(i),t=e.row,n=e.rowIndex,r=N.oxw(),a=N.MAs(58);return r.deleteLicense(t,n,a)}),N.TgZ(5,"mat-icon",41),N._uU(6,"delete "),N.qZA(),N.qZA(),N.qZA()}}function Q(e,t){if(1&e){var i=N.EpF();N.TgZ(0,"div",42),N.TgZ(1,"h4",43),N.TgZ(2,"div",44),N.TgZ(3,"div",45),N.TgZ(4,"div",46),N._uU(5),N.ALo(6,"translate"),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.TgZ(7,"button",47),N.NdJ("click",function(){return N.CHM(i).$implicit.dismiss("Cross click")}),N.TgZ(8,"span",48),N.TgZ(9,"i",49),N._uU(10,"close"),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.TgZ(11,"div",50),N.TgZ(12,"p"),N._uU(13),N.ALo(14,"translate"),N.qZA(),N.TgZ(15,"div",51),N.TgZ(16,"div",52),N.TgZ(17,"button",53),N.NdJ("click",function(){return N.CHM(i),N.oxw().deleteLicensDetails()}),N._uU(18),N.ALo(19,"translate"),N.qZA(),N.TgZ(20,"button",54),N.NdJ("click",function(){return N.CHM(i).$implicit.close()}),N._uU(21),N.ALo(22,"translate"),N.qZA(),N.qZA(),N.qZA(),N.qZA()}2&e&&(N.xp6(5),N.hij(" ",N.lcZ(6,4,"LICENSE.DELETETITLE"),""),N.xp6(8),N.Oqu(N.lcZ(14,6,"BUTTON.CONFIRMATION")),N.xp6(5),N.Oqu(N.lcZ(19,8,"BUTTON.DEL-BTN")),N.xp6(3),N.Oqu(N.lcZ(22,10,"BUTTON.CANCEL-BTN")))}var M=function(){var e=function(){function e(t,n,r,a,l,o,c){i(this,e),this.httpClient=t,this.dialog=n,this.licenseService=r,this.snackBar=a,this.router=l,this.modalService=o,this.toastrService=c,this.columns=[{name:"License Class"},{name:"Minimum Age"}],this.data=[],this.filteredData=[],this.translateVal="ml"==localStorage.lang?"malay":"english"}return r(e,[{key:"ngOnInit",value:function(){this.loadData()}},{key:"refresh",value:function(){this.loadData()}},{key:"addNewLicense",value:function(){this.router.navigate(["/admin/license/add-license"])}},{key:"loadData",value:function(){var e=this;this.licenseService.getLicenseListPerClient(sessionStorage.client).subscribe(function(t){e.data=t.data,e.filteredData=t.data})}},{key:"filterDatatable",value:function(e){var t=e.target.value.toLowerCase(),i=this.columns.length,n=Object.keys(this.filteredData[0]);this.data=this.filteredData.filter(function(e){for(var r=0;r<i;r++)if(-1!==e[n[r]].toString().toLowerCase().indexOf(t)||!t)return!0}),this.table.offset=0}},{key:"editLicense",value:function(e,t){console.log("rowww===",e),this.router.navigate(["/admin/license/edit-license",e.id])}},{key:"deleteLicense",value:function(e,t,i){this.modalService.open(i,{ariaLabelledBy:"modal-basic-title"}),this.rowToDelete=e}},{key:"deleteLicensDetails",value:function(){var e=this;this.licenseService.deleteLicenseDetails(this.rowToDelete,sessionStorage.currentUser,sessionStorage.client).subscribe(function(t){"Success"==t.status&&(e.toastrService.success("Deleted Successfully!!!"),e.modalService.dismissAll(),e.loadData())})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(N.Y36(x.eN),N.Y36(f.uw),N.Y36(k),N.Y36(Z.ux),N.Y36(S.F0),N.Y36(F.FF),N.Y36(J._W))},e.\u0275cmp=N.Xpm({type:e,selectors:[["app-license-list"]],viewQuery:function(e,t){var i;(1&e&&N.Gf(C.nE,5),2&e)&&(N.iGM(i=N.CRH())&&(t.table=i.first))},decls:59,vars:28,consts:[[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"col-md-12"],[1,"mt-5"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"body"],[1,"table-responsive"],[1,"materialTableHeader"],[1,"col-8"],[1,"header-buttons-left","ml-0"],[1,"dropdown"],[1,"dropdown","m-l-20"],["for","search-input"],[1,"material-icons","search-icon"],["placeholder","Search","type","text","aria-label","Search box",1,"browser-default","search-field",3,"keyup"],[1,"col-4"],[1,"header-buttons"],[1,"icon-button-demo"],["mat-mini-fab","","color","primary",3,"click"],[1,"col-white"],[1,"material",3,"rows","columns","sortType","columnMode","headerHeight","footerHeight","rowHeight","limit"],["table",""],["name","License Image","sortable","false","prop","license_image",3,"width"],["ngx-datatable-cell-template",""],["name","License Flow","sortable","false","prop","license_flow",3,"width"],["prop","license_class",3,"name","width"],["prop","minimum_age",3,"name","width"],["sortable","false",3,"name","width"],["deleteRecord",""],[1,"table-img","padding-0"],["width","40",3,"src"],["mat-icon-button","","color","accent",1,"btn-tbl-edit",3,"click"],["aria-label","Edit",1,"col-white"],["mat-icon-button","","color","accent",1,"btn-tbl-delete",3,"click"],["aria-label","Delete",1,"col-white"],[1,"modal-header","deleteRowModal"],["id","modal-basic-title",1,"modal-title"],[1,"modal-header"],[1,"modal-about"],[1,"font-weight-bold","p-t-10","font-17"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"material-icons"],[1,"modal-body"],[1,"modal-footer"],[1,"button-demo"],["mat-raised-button","","type","submit","color","primary",3,"click"],["mat-button","","type","button",3,"click"]],template:function(e,t){1&e&&(N.TgZ(0,"section",0),N.TgZ(1,"div",1),N.TgZ(2,"div",2),N.TgZ(3,"div",3),N.TgZ(4,"div",4),N.TgZ(5,"ul",5),N.TgZ(6,"li",6),N.TgZ(7,"h4",7),N._uU(8),N.ALo(9,"translate"),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.TgZ(10,"div",3),N.TgZ(11,"div",8),N.TgZ(12,"div",9),N.TgZ(13,"div",10),N.TgZ(14,"div",11),N.TgZ(15,"div",12),N.TgZ(16,"div",13),N.TgZ(17,"div",14),N.TgZ(18,"div",3),N.TgZ(19,"div",15),N.TgZ(20,"ul",16),N.TgZ(21,"li",17),N.TgZ(22,"h2"),N.TgZ(23,"strong"),N._uU(24),N.ALo(25,"translate"),N.qZA(),N.qZA(),N.qZA(),N.TgZ(26,"li",18),N.TgZ(27,"label",19),N.TgZ(28,"i",20),N._uU(29,"search"),N.qZA(),N.qZA(),N.TgZ(30,"input",21),N.NdJ("keyup",function(e){return t.filterDatatable(e)}),N.qZA(),N.qZA(),N._UZ(31,"li"),N.qZA(),N.qZA(),N.TgZ(32,"div",22),N.TgZ(33,"ul",23),N.TgZ(34,"li"),N.TgZ(35,"div",24),N.TgZ(36,"button",25),N.NdJ("click",function(){return t.addNewLicense()}),N.TgZ(37,"mat-icon",26),N._uU(38,"add"),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.TgZ(39,"li"),N.TgZ(40,"div",24),N.TgZ(41,"button",25),N.NdJ("click",function(){return t.refresh()}),N.TgZ(42,"mat-icon",26),N._uU(43,"refresh "),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.TgZ(44,"ngx-datatable",27,28),N.TgZ(46,"ngx-datatable-column",29),N.YNc(47,D,2,1,"ng-template",30),N.qZA(),N.TgZ(48,"ngx-datatable-column",31),N.YNc(49,Y,2,1,"ng-template",30),N.qZA(),N._UZ(50,"ngx-datatable-column",32),N.ALo(51,"translate"),N._UZ(52,"ngx-datatable-column",33),N.ALo(53,"translate"),N.TgZ(54,"ngx-datatable-column",34),N.ALo(55,"translate"),N.YNc(56,R,7,0,"ng-template",30),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.YNc(57,Q,23,12,"ng-template",null,35,N.W1O)),2&e&&(N.xp6(8),N.Oqu(N.lcZ(9,18,"LICENSE.LISTTITLE")),N.xp6(16),N.Oqu(N.lcZ(25,20,"LICENSE.LISTTITLE")),N.xp6(20),N.Q6J("rows",t.data)("columns",t.columns)("sortType","multi")("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","60")("limit",10),N.xp6(2),N.Q6J("width",100),N.xp6(2),N.Q6J("width",100),N.xp6(2),N.s9C("name",N.lcZ(51,22,"LICENSE.LIST.LICENSE-CLASS")),N.Q6J("width",130),N.xp6(2),N.s9C("name",N.lcZ(53,24,"LICENSE.LIST.MIN-AGE")),N.Q6J("width",130),N.xp6(2),N.s9C("name",N.lcZ(55,26,"LICENSE.ACTIONS")),N.Q6J("width",120))},directives:[g.lW,m.Hw,C.nE,C.UC,C.vq],pipes:[O.X$],styles:[""]}),e}(),j=a(22567),H=a(94784),B=a(46739);function G(e,t){1&e&&(N.TgZ(0,"mat-error"),N._uU(1),N.ALo(2,"translate"),N.qZA()),2&e&&(N.xp6(1),N.hij(" ",N.lcZ(2,1,"LICENSE.LIST.LICENSE-CLASS")," is required "))}function X(e,t){1&e&&(N.TgZ(0,"mat-error"),N._uU(1),N.ALo(2,"translate"),N.qZA()),2&e&&(N.xp6(1),N.hij(" ",N.lcZ(2,1,"LICENSE.LIST.LICENSE-ENGLISH")," is required "))}function W(e,t){1&e&&(N.TgZ(0,"mat-error"),N._uU(1),N.ALo(2,"translate"),N.qZA()),2&e&&(N.xp6(1),N.hij(" ",N.lcZ(2,1,"LICENSE.LIST.LICENSE-MALAY")," is required "))}function P(e,t){1&e&&(N.TgZ(0,"mat-error"),N._uU(1),N.ALo(2,"translate"),N.qZA()),2&e&&(N.xp6(1),N.hij(" ",N.lcZ(2,1,"LICENSE.LIST.CRITERIA-ENGLISH")," is required "))}function z(e,t){1&e&&(N.TgZ(0,"mat-error"),N._uU(1),N.ALo(2,"translate"),N.qZA()),2&e&&(N.xp6(1),N.hij(" ",N.lcZ(2,1,"LICENSE.LIST.CRITERIA-MALAY")," is required "))}function V(e,t){1&e&&(N.TgZ(0,"mat-error"),N._uU(1),N.ALo(2,"translate"),N.qZA()),2&e&&(N.xp6(1),N.hij(" ",N.lcZ(2,1,"LICENSE.LIST.LICENSE-CLASS")," is required "))}function $(e,t){1&e&&(N.TgZ(0,"mat-error"),N._uU(1),N.ALo(2,"translate"),N.qZA()),2&e&&(N.xp6(1),N.hij(" ",N.lcZ(2,1,"LICENSE.LIST.LICENSE-ENGLISH")," is required "))}function K(e,t){1&e&&(N.TgZ(0,"mat-error"),N._uU(1),N.ALo(2,"translate"),N.qZA()),2&e&&(N.xp6(1),N.hij(" ",N.lcZ(2,1,"LICENSE.LIST.LICENSE-MALAY")," is required "))}function ee(e,t){1&e&&(N.TgZ(0,"mat-error"),N._uU(1),N.ALo(2,"translate"),N.qZA()),2&e&&(N.xp6(1),N.hij(" ",N.lcZ(2,1,"LICENSE.LIST.CRITERIA-ENGLISH")," is required "))}function te(e,t){1&e&&(N.TgZ(0,"mat-error"),N._uU(1),N.ALo(2,"translate"),N.qZA()),2&e&&(N.xp6(1),N.hij(" ",N.lcZ(2,1,"LICENSE.LIST.CRITERIA-MALAY")," is required "))}var ie,ne,re,ae=[{path:"license-list",component:M},{path:"add-license",component:(ne=function(){function t(e,n,r,a,l,o,c){i(this,t),this.cdRef=e,this.fb=n,this.languageService=r,this.toastrService=a,this.licenseService=l,this.router=o,this.route=c,this.Editor=j}return r(t,[{key:"ngOnInit",value:function(){var e=this;this.addLicenseForm=this.fb.group({license_class:["",o.kI.required],minimum_age:[""],license_desc_english:["",o.kI.required],license_desc_malay:["",o.kI.required],criteria_english:["",o.kI.required],criteria_malay:["",o.kI.required],license_flow:["",o.kI.required],license_flow_name:["",o.kI.required],license_image:["",o.kI.required],license_image_name:["",o.kI.required],cdl_req:[""]}),this.licenseService.getClientCodeForFolder(sessionStorage.client).subscribe(function(t){e.clientCode=t.data[0].client_code})}},{key:"onFileChangeLicenseFlow",value:function(t){var i=this,n=new FileReader;if(t.target.files&&t.target.files.length){var r=e(t.target.files,1)[0];n.readAsDataURL(r),n.onload=function(){i.addLicenseForm.patchValue({license_flow:r}),console.log("this.documentForm===",i.addLicenseForm)}}}},{key:"onFileChangeLicenseImage",value:function(t){var i=this,n=new FileReader;if(t.target.files&&t.target.files.length){var r=e(t.target.files,1)[0];n.readAsDataURL(r),n.onload=function(){i.addLicenseForm.patchValue({license_image:r}),console.log("this.documentForm===",i.addLicenseForm)}}}},{key:"setLicenseDetails",value:function(){var e=this;console.log("Editor===",this.addLicenseForm.value);var t=new FormData;t.append("baseRoot","root/"+this.clientCode+"/License/"+this.addLicenseForm.value.license_class),t.append("licenseData",JSON.stringify(this.addLicenseForm.value)),t.append("authToken",sessionStorage.currentUser),t.append("client",sessionStorage.client),t.append("licenseImage",this.addLicenseForm.value.license_image),t.append("licenseFlow",this.addLicenseForm.value.license_flow),this.licenseService.setLicenseDetails(t).subscribe(function(t){"Success"==t.status?(e.toastrService.success("Registered Successfully!!"),e.addLicenseForm.reset(),e.router.navigate(["/admin/license/license-list"])):e.toastrService.error(t.status)})}},{key:"goBack",value:function(){this.router.navigate(["/admin/license/license-list"])}}]),t}(),ne.\u0275fac=function(e){return new(e||ne)(N.Y36(N.sBO),N.Y36(o.qu),N.Y36(H.T),N.Y36(J._W),N.Y36(k),N.Y36(S.F0),N.Y36(S.gz))},ne.\u0275cmp=N.Xpm({type:ne,selectors:[["app-add-license"]],decls:88,vars:50,consts:[[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"row","clearfix"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"header"],[1,"body"],[1,"m-4",3,"formGroup"],[1,"col-xl-4","col-lg-4","col-md-12","col-sm-12","mb-2"],["appearance","outline",1,"example-full-width","mb-3"],["matInput","","formControlName","license_class","required",""],[4,"ngIf"],["matInput","","formControlName","minimum_age","maxlength","2"],["formControlName","cdl_req",1,"example-margin"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2"],["formControlName","license_desc_english",3,"editor"],["formControlName","license_desc_malay",3,"editor"],["formControlName","criteria_english",3,"editor"],["formControlName","criteria_malay",3,"editor"],["formControlName","license_image_name","required","",3,"change"],["matSuffix",""],["formControlName","license_flow_name","required","",3,"change"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],["mat-raised-button","","color","primary",1,"btn-space",3,"disabled","click"],["type","button","mat-button","",3,"click"]],template:function(e,t){1&e&&(N.TgZ(0,"section",0),N.TgZ(1,"div",1),N.TgZ(2,"div",2),N.TgZ(3,"div",3),N.TgZ(4,"div",4),N.TgZ(5,"ul",5),N.TgZ(6,"li",6),N.TgZ(7,"h4",7),N._uU(8),N.ALo(9,"translate"),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.TgZ(10,"div",8),N.TgZ(11,"div",9),N.TgZ(12,"div",10),N.TgZ(13,"div",11),N.TgZ(14,"h2"),N._uU(15),N.ALo(16,"translate"),N.qZA(),N.qZA(),N.TgZ(17,"div",12),N.TgZ(18,"form",13),N.TgZ(19,"div",3),N.TgZ(20,"div",14),N.TgZ(21,"mat-form-field",15),N.TgZ(22,"mat-label"),N._uU(23),N.ALo(24,"translate"),N.qZA(),N._UZ(25,"input",16),N.YNc(26,G,3,3,"mat-error",17),N.qZA(),N.qZA(),N.TgZ(27,"div",14),N.TgZ(28,"mat-form-field",15),N.TgZ(29,"mat-label"),N._uU(30),N.ALo(31,"translate"),N.qZA(),N._UZ(32,"input",18),N.qZA(),N.qZA(),N.TgZ(33,"div",14),N.TgZ(34,"mat-checkbox",19),N._uU(35),N.ALo(36,"translate"),N.qZA(),N.qZA(),N.qZA(),N.TgZ(37,"div",3),N.TgZ(38,"div",20),N.TgZ(39,"mat-label"),N._uU(40),N.ALo(41,"translate"),N.qZA(),N._UZ(42,"ckeditor",21),N.YNc(43,X,3,3,"mat-error",17),N.qZA(),N.TgZ(44,"div",20),N.TgZ(45,"mat-label"),N._uU(46),N.ALo(47,"translate"),N.qZA(),N._UZ(48,"ckeditor",22),N.YNc(49,W,3,3,"mat-error",17),N.qZA(),N.qZA(),N.TgZ(50,"div",3),N.TgZ(51,"div",20),N.TgZ(52,"mat-label"),N._uU(53),N.ALo(54,"translate"),N.qZA(),N._UZ(55,"ckeditor",23),N.YNc(56,P,3,3,"mat-error",17),N.qZA(),N.TgZ(57,"div",20),N.TgZ(58,"mat-label"),N._uU(59),N.ALo(60,"translate"),N.qZA(),N._UZ(61,"ckeditor",24),N.YNc(62,z,3,3,"mat-error",17),N.qZA(),N.qZA(),N.TgZ(63,"div",3),N.TgZ(64,"div",20),N.TgZ(65,"mat-form-field",15),N.TgZ(66,"mat-label"),N._uU(67),N.ALo(68,"translate"),N.qZA(),N.TgZ(69,"ngx-mat-file-input",25),N.NdJ("change",function(e){return t.onFileChangeLicenseImage(e)}),N.qZA(),N.TgZ(70,"mat-icon",26),N._uU(71,"cloud_upload"),N.qZA(),N.qZA(),N.qZA(),N.TgZ(72,"div",20),N.TgZ(73,"mat-form-field",15),N.TgZ(74,"mat-label"),N._uU(75),N.ALo(76,"translate"),N.qZA(),N.TgZ(77,"ngx-mat-file-input",27),N.NdJ("change",function(e){return t.onFileChangeLicenseFlow(e)}),N.qZA(),N.TgZ(78,"mat-icon",26),N._uU(79,"cloud_upload"),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.TgZ(80,"div",3),N.TgZ(81,"div",28),N.TgZ(82,"button",29),N.NdJ("click",function(){return t.setLicenseDetails()}),N._uU(83),N.ALo(84,"translate"),N.qZA(),N.TgZ(85,"button",30),N.NdJ("click",function(){return t.goBack()}),N._uU(86),N.ALo(87,"translate"),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA()),2&e&&(N.xp6(8),N.Oqu(N.lcZ(9,24,"LICENSE.TITLE")),N.xp6(7),N.Oqu(N.lcZ(16,26,"LICENSE.TITLE")),N.xp6(3),N.Q6J("formGroup",t.addLicenseForm),N.xp6(5),N.Oqu(N.lcZ(24,28,"LICENSE.LIST.LICENSE-CLASS")),N.xp6(3),N.Q6J("ngIf",t.addLicenseForm.get("license_class").hasError("required")),N.xp6(4),N.Oqu(N.lcZ(31,30,"LICENSE.LIST.MIN-AGE")),N.xp6(5),N.Oqu(N.lcZ(36,32,"LICENSE.LIST.CDL-REQ")),N.xp6(5),N.hij("",N.lcZ(41,34,"LICENSE.LIST.LICENSE-ENGLISH"),"*"),N.xp6(2),N.Q6J("editor",t.Editor),N.xp6(1),N.Q6J("ngIf",t.addLicenseForm.get("license_desc_english").hasError("required")),N.xp6(3),N.hij("",N.lcZ(47,36,"LICENSE.LIST.LICENSE-MALAY"),"*"),N.xp6(2),N.Q6J("editor",t.Editor),N.xp6(1),N.Q6J("ngIf",t.addLicenseForm.get("license_desc_malay").hasError("required")),N.xp6(4),N.hij("",N.lcZ(54,38,"LICENSE.LIST.CRITERIA-ENGLISH"),"*"),N.xp6(2),N.Q6J("editor",t.Editor),N.xp6(1),N.Q6J("ngIf",t.addLicenseForm.get("criteria_english").hasError("required")),N.xp6(3),N.hij("",N.lcZ(60,40,"LICENSE.LIST.CRITERIA-MALAY"),"*"),N.xp6(2),N.Q6J("editor",t.Editor),N.xp6(1),N.Q6J("ngIf",t.addLicenseForm.get("criteria_malay").hasError("required")),N.xp6(5),N.Oqu(N.lcZ(68,42,"LICENSE.LIST.LICENSE-IMAGE")),N.xp6(8),N.Oqu(N.lcZ(76,44,"LICENSE.LIST.LICENSE-FLOW")),N.xp6(7),N.Q6J("disabled",!t.addLicenseForm.valid),N.xp6(1),N.Oqu(N.lcZ(84,46,"BUTTON.ADD-BTN")),N.xp6(3),N.Oqu(N.lcZ(87,48,"BUTTON.CANCEL-BTN")))},directives:[o._Y,o.JL,o.sg,d.KE,d.hX,u.Nt,o.Fj,o.JJ,o.u,o.Q7,l.O5,o.nD,L.oG,B.u,q.Yh,m.Hw,d.R9,g.lW,d.TO],pipes:[O.X$],styles:["[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:400px}"]}),ne)},{path:"edit-license/:id",component:(ie=function(){function t(e,n,r,a,l,c,s){i(this,t),this.cdRef=e,this.fb=n,this.languageService=r,this.toastrService=a,this.licenseService=l,this.router=c,this.route=s,this.Editor=j,this.licenseId=this.route.snapshot.paramMap.get("id"),this.editLicenseForm=this.fb.group({id:[""],prev_license_class:["",o.kI.required],license_class:["",o.kI.required],minimum_age:[""],license_desc_english:["",o.kI.required],license_desc_malay:["",o.kI.required],criteria_english:["",o.kI.required],criteria_malay:["",o.kI.required],license_flow:["",o.kI.required],license_flow_name:["",o.kI.required],license_image:["",o.kI.required],license_image_name:["",o.kI.required],cdl_req:[""]})}return r(t,[{key:"ngOnInit",value:function(){var e=this;this.licenseService.getClientCodeForFolder(sessionStorage.client).subscribe(function(t){e.clientCode=t.data[0].client_code}),this.licenseService.getLicenseToEdit(this.licenseId,sessionStorage.client).subscribe(function(t){var i=t.data[0];e.editLicenseForm.patchValue({id:i.id,prev_license_class:i.license_class,license_class:i.license_class,cdl_req:1==i.cdl_requirement,minimum_age:i.minimum_age,license_desc_english:i.license_desc_english,license_desc_malay:i.license_desc_malay,criteria_english:i.criteria_english,criteria_malay:i.criteria_malay,license_flow:i.license_flow,license_flow_name:i.license_flow,license_image:i.license_image,license_image_name:i.license_image})})}},{key:"onFileChangeLicenseFlow",value:function(t){var i=this,n=new FileReader;if(t.target.files&&t.target.files.length){var r=e(t.target.files,1)[0];n.readAsDataURL(r),n.onload=function(){i.licenseFlow_preview=n.result,i.editLicenseForm.patchValue({license_flow:r}),console.log("this.documentForm===",i.editLicenseForm)}}}},{key:"onFileChangeLicenseImage",value:function(t){var i=this,n=new FileReader;if(t.target.files&&t.target.files.length){var r=e(t.target.files,1)[0];n.readAsDataURL(r),n.onload=function(){i.licenseImg_preview=n.result,i.editLicenseForm.patchValue({license_image:r}),console.log("this.documentForm===",i.editLicenseForm)}}}},{key:"goBack",value:function(){this.router.navigate(["/admin/license/license-list"])}},{key:"updateLicenseDetails",value:function(){var e=this;console.log("Editor===",this.editLicenseForm.value);var t=new FormData;t.append("baseRoot","root/"+this.clientCode+"/License/"+this.editLicenseForm.value.license_class),t.append("licenseData",JSON.stringify(this.editLicenseForm.value)),t.append("authToken",sessionStorage.currentUser),t.append("client",sessionStorage.client),t.append("licenseImage",this.editLicenseForm.value.license_image),t.append("licenseFlow",this.editLicenseForm.value.license_flow),this.licenseService.updateLicenseDetails(t).subscribe(function(t){"Success"==t.status?(e.toastrService.success("Updated Successfully!!"),e.editLicenseForm.reset(),e.router.navigate(["/admin/license/license-list"])):e.toastrService.error(t.status)})}}]),t}(),ie.\u0275fac=function(e){return new(e||ie)(N.Y36(N.sBO),N.Y36(o.qu),N.Y36(H.T),N.Y36(J._W),N.Y36(k),N.Y36(S.F0),N.Y36(S.gz))},ie.\u0275cmp=N.Xpm({type:ie,selectors:[["app-edit-license"]],decls:96,vars:52,consts:[[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"row","clearfix"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"header"],[1,"body"],[1,"m-4",3,"formGroup"],[1,"col-xl-4","col-lg-4","col-md-12","col-sm-12","mb-2"],["appearance","outline",1,"example-full-width","mb-3"],["matInput","","formControlName","license_class","required",""],[4,"ngIf"],["matInput","","formControlName","minimum_age"],["formControlName","cdl_req",1,"example-margin"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2"],["formControlName","license_desc_english",3,"editor"],["formControlName","license_desc_malay",3,"editor"],["formControlName","criteria_english",3,"editor"],["formControlName","criteria_malay",3,"editor"],[2,"width","100%","height","50%",3,"src"],["formControlName","license_image_name","required","",3,"change"],["matSuffix",""],["formControlName","license_flow_name","required","",3,"change"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],["mat-raised-button","","color","primary",1,"btn-space",3,"disabled","click"],["type","button","mat-button","",3,"click"]],template:function(e,t){1&e&&(N.TgZ(0,"section",0),N.TgZ(1,"div",1),N.TgZ(2,"div",2),N.TgZ(3,"div",3),N.TgZ(4,"div",4),N.TgZ(5,"ul",5),N.TgZ(6,"li",6),N.TgZ(7,"h4",7),N._uU(8),N.ALo(9,"translate"),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.TgZ(10,"div",8),N.TgZ(11,"div",9),N.TgZ(12,"div",10),N.TgZ(13,"div",11),N.TgZ(14,"h2"),N._uU(15),N.ALo(16,"translate"),N.qZA(),N.qZA(),N.TgZ(17,"div",12),N.TgZ(18,"form",13),N.TgZ(19,"div",3),N.TgZ(20,"div",14),N.TgZ(21,"mat-form-field",15),N.TgZ(22,"mat-label"),N._uU(23),N.ALo(24,"translate"),N.qZA(),N._UZ(25,"input",16),N.YNc(26,V,3,3,"mat-error",17),N.qZA(),N.qZA(),N.TgZ(27,"div",14),N.TgZ(28,"mat-form-field",15),N.TgZ(29,"mat-label"),N._uU(30),N.ALo(31,"translate"),N.qZA(),N._UZ(32,"input",18),N.qZA(),N.qZA(),N.TgZ(33,"div",14),N.TgZ(34,"mat-checkbox",19),N._uU(35),N.ALo(36,"translate"),N.qZA(),N.qZA(),N.qZA(),N.TgZ(37,"div",3),N.TgZ(38,"div",20),N.TgZ(39,"mat-label"),N._uU(40),N.ALo(41,"translate"),N.qZA(),N._UZ(42,"ckeditor",21),N.YNc(43,$,3,3,"mat-error",17),N.qZA(),N.TgZ(44,"div",20),N.TgZ(45,"mat-label"),N._uU(46),N.ALo(47,"translate"),N.qZA(),N._UZ(48,"ckeditor",22),N.YNc(49,K,3,3,"mat-error",17),N.qZA(),N.qZA(),N.TgZ(50,"div",3),N.TgZ(51,"div",20),N.TgZ(52,"mat-label"),N._uU(53),N.ALo(54,"translate"),N.qZA(),N._UZ(55,"ckeditor",23),N.YNc(56,ee,3,3,"mat-error",17),N.qZA(),N.TgZ(57,"div",20),N.TgZ(58,"mat-label"),N._uU(59),N.ALo(60,"translate"),N.qZA(),N._UZ(61,"ckeditor",24),N.YNc(62,te,3,3,"mat-error",17),N.qZA(),N.qZA(),N.TgZ(63,"div",3),N.TgZ(64,"div",20),N.TgZ(65,"div",3),N.TgZ(66,"div",20),N._UZ(67,"img",25),N.qZA(),N.TgZ(68,"div",20),N.TgZ(69,"mat-form-field",15),N.TgZ(70,"mat-label"),N._uU(71),N.ALo(72,"translate"),N.qZA(),N.TgZ(73,"ngx-mat-file-input",26),N.NdJ("change",function(e){return t.onFileChangeLicenseImage(e)}),N.qZA(),N.TgZ(74,"mat-icon",27),N._uU(75,"cloud_upload"),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.TgZ(76,"div",20),N.TgZ(77,"div",3),N.TgZ(78,"div",20),N._UZ(79,"img",25),N.qZA(),N.TgZ(80,"div",20),N.TgZ(81,"mat-form-field",15),N.TgZ(82,"mat-label"),N._uU(83),N.ALo(84,"translate"),N.qZA(),N.TgZ(85,"ngx-mat-file-input",28),N.NdJ("change",function(e){return t.onFileChangeLicenseFlow(e)}),N.qZA(),N.TgZ(86,"mat-icon",27),N._uU(87,"cloud_upload"),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.TgZ(88,"div",3),N.TgZ(89,"div",29),N.TgZ(90,"button",30),N.NdJ("click",function(){return t.updateLicenseDetails()}),N._uU(91),N.ALo(92,"translate"),N.qZA(),N.TgZ(93,"button",31),N.NdJ("click",function(){return t.goBack()}),N._uU(94),N.ALo(95,"translate"),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA(),N.qZA()),2&e&&(N.xp6(8),N.Oqu(N.lcZ(9,26,"LICENSE.EDITTITLE")),N.xp6(7),N.Oqu(N.lcZ(16,28,"LICENSE.EDITTITLE")),N.xp6(3),N.Q6J("formGroup",t.editLicenseForm),N.xp6(5),N.Oqu(N.lcZ(24,30,"LICENSE.LIST.LICENSE-CLASS")),N.xp6(3),N.Q6J("ngIf",t.editLicenseForm.get("license_class").hasError("required")),N.xp6(4),N.Oqu(N.lcZ(31,32,"LICENSE.LIST.MIN-AGE")),N.xp6(5),N.Oqu(N.lcZ(36,34,"LICENSE.LIST.CDL-REQ")),N.xp6(5),N.hij("",N.lcZ(41,36,"LICENSE.LIST.LICENSE-ENGLISH"),"*"),N.xp6(2),N.Q6J("editor",t.Editor),N.xp6(1),N.Q6J("ngIf",t.editLicenseForm.get("license_desc_english").hasError("required")),N.xp6(3),N.hij("",N.lcZ(47,38,"LICENSE.LIST.LICENSE-MALAY"),"*"),N.xp6(2),N.Q6J("editor",t.Editor),N.xp6(1),N.Q6J("ngIf",t.editLicenseForm.get("license_desc_malay").hasError("required")),N.xp6(4),N.hij("",N.lcZ(54,40,"LICENSE.LIST.CRITERIA-ENGLISH"),"*"),N.xp6(2),N.Q6J("editor",t.Editor),N.xp6(1),N.Q6J("ngIf",t.editLicenseForm.get("criteria_english").hasError("required")),N.xp6(3),N.hij("",N.lcZ(60,42,"LICENSE.LIST.CRITERIA-MALAY"),"*"),N.xp6(2),N.Q6J("editor",t.Editor),N.xp6(1),N.Q6J("ngIf",t.editLicenseForm.get("criteria_malay").hasError("required")),N.xp6(5),N.s9C("src",t.licenseImg_preview?t.licenseImg_preview:t.editLicenseForm.value.license_image,N.LSH),N.xp6(4),N.Oqu(N.lcZ(72,44,"LICENSE.LIST.LICENSE-IMAGE")),N.xp6(8),N.s9C("src",t.licenseFlow_preview?t.licenseFlow_preview:t.editLicenseForm.value.license_flow,N.LSH),N.xp6(4),N.Oqu(N.lcZ(84,46,"LICENSE.LIST.LICENSE-FLOW")),N.xp6(7),N.Q6J("disabled",!t.editLicenseForm.valid),N.xp6(1),N.Oqu(N.lcZ(92,48,"BUTTON.EDIT-BTN")),N.xp6(3),N.Oqu(N.lcZ(95,50,"BUTTON.CANCEL-BTN")))},directives:[o._Y,o.JL,o.sg,d.KE,d.hX,u.Nt,o.Fj,o.JJ,o.u,o.Q7,l.O5,L.oG,B.u,q.Yh,m.Hw,d.R9,g.lW,d.TO],pipes:[O.X$],styles:["[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:400px}"]}),ie)}],le=function(){var e=function e(){i(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=N.oAB({type:e}),e.\u0275inj=N.cJS({imports:[[S.Bz.forChild(ae)],S.Bz]}),e}(),oe=a(79961),ce=((re=function e(){i(this,e)}).\u0275fac=function(e){return new(e||re)},re.\u0275mod=N.oAB({type:re}),re.\u0275inj=N.cJS({providers:[k],imports:[[C.xD,B.d,l.ez,o.u5,o.UX,c.p0,s.TU,d.lN,u.c,Z.ZX,g.ot,m.Ps,f.Is,T.JX,A.g0,p.LD,h.FA,L.p9,_.Nh,v.Tx,q.Ad,le,I.Cq,E.T5,b.yI,O.aw,oe.Bb]]}),re)}}])}();