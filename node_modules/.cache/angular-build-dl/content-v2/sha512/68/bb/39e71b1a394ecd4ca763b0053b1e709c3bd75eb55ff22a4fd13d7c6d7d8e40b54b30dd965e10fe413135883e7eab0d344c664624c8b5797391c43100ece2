(self.webpackChunksmart=self.webpackChunksmart||[]).push([[2538],{2538:function(e,i,t){"use strict";t.r(i),t.d(i,{LicenseModule:function(){return Ce}});var s=t(61116),a=t(31041),n=t(39199),c=t(5609),l=t(13070),r=t(9550),o=t(63589),d=t(84369),u=t(77307),p=t(13841),m=t(92935),g=t(59241),h=t(37112),Z=t(69024),L=t(40994),A=t(1325),v=t(57173),f=t(97070),T=t(87672),_=t(44716),q=t(51601),S=t(35729),C=t(17647),I=t(35366),x=t(42693),E=t(97425),b=t(91681),N=t(529);let w=(()=>{class e{constructor(e){this.http=e,this.isTblLoading=!0,this.dataChange=new E.X([])}get data(){return this.dataChange.value}setLicenseDetails(e){return this.http.post(`${N.N.apiUrl}/webRoutes/setLicenseDetails`,e).pipe((0,b.U)(e=>e))}getLicenseListPerClient(){return this.http.get(`${N.N.apiUrl}/webRoutes/getLicenseListPerClient`).pipe((0,b.U)(e=>(this.isTblLoading=!1,this.dataChange.next(e),e)))}deleteLicenseDetails(e){return this.http.post(`${N.N.apiUrl}/webRoutes/deleteLicenseDetails`,{rowToDelete:e}).pipe((0,b.U)(e=>e))}getLicenseClassList(){return this.http.get(`${N.N.apiUrl}/webRoutes/getLicenseClassList`).pipe((0,b.U)(e=>e))}getLicenseToEdit(e){return this.http.post(`${N.N.apiUrl}/webRoutes/getLicenseToEdit`,{licenseId:e}).pipe((0,b.U)(e=>e))}updateLicenseDetails(e){return this.http.post(`${N.N.apiUrl}/webRoutes/updateLicenseDetails`,e).pipe((0,b.U)(e=>e))}getClientCodeForFolder(e){return this.http.get(`${N.N.apiUrl}/webRoutes/getClientCodeForFolder`).pipe((0,b.U)(e=>e))}}return e.\u0275fac=function(i){return new(i||e)(I.LFG(x.eN))},e.\u0275prov=I.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var y=t(24486),U=t(50518),F=t(31269),k=t(94784),O=t(60649);function J(e,i){if(1&e){const e=I.EpF();I.TgZ(0,"span"),I.TgZ(1,"button",37),I.NdJ("click",function(){const i=I.CHM(e),t=i.row,s=i.rowIndex;return I.oxw().editLicense(t,s)}),I.TgZ(2,"mat-icon",38),I._uU(3,"edit "),I.qZA(),I.qZA(),I.TgZ(4,"button",39),I.NdJ("click",function(){const i=I.CHM(e),t=i.row,s=i.rowIndex,a=I.oxw(),n=I.MAs(59);return a.deleteLicense(t,s,n)}),I.TgZ(5,"mat-icon",40),I._uU(6,"delete "),I.qZA(),I.qZA(),I.qZA()}}function D(e,i){if(1&e){const e=I.EpF();I.TgZ(0,"div",41),I.TgZ(1,"h4",42),I.TgZ(2,"div",43),I.TgZ(3,"div",44),I.TgZ(4,"div",45),I._uU(5),I.ALo(6,"translate"),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.TgZ(7,"button",46),I.NdJ("click",function(){return I.CHM(e).$implicit.dismiss("Cross click")}),I.TgZ(8,"span",47),I.TgZ(9,"i",48),I._uU(10,"close"),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.TgZ(11,"div",49),I.TgZ(12,"p"),I._uU(13),I.ALo(14,"translate"),I.qZA(),I.TgZ(15,"div",50),I.TgZ(16,"div",51),I.TgZ(17,"button",52),I.NdJ("click",function(){return I.CHM(e),I.oxw().deleteLicensDetails()}),I._uU(18),I.ALo(19,"translate"),I.qZA(),I.TgZ(20,"button",53),I.NdJ("click",function(){return I.CHM(e).$implicit.close()}),I._uU(21),I.ALo(22,"translate"),I.qZA(),I.qZA(),I.qZA(),I.qZA()}2&e&&(I.xp6(5),I.hij(" ",I.lcZ(6,4,"LICENSE.DELETETITLE"),""),I.xp6(8),I.Oqu(I.lcZ(14,6,"BUTTON.CONFIRMATION")),I.xp6(5),I.Oqu(I.lcZ(19,8,"BUTTON.DEL-BTN")),I.xp6(3),I.Oqu(I.lcZ(22,10,"BUTTON.CANCEL-BTN")))}let R=(()=>{class e{constructor(e,i,t,s,a,n,c,l,r){this.httpClient=e,this.dialog=i,this.licenseService=t,this.snackBar=s,this.router=a,this.modalService=n,this.toastrService=c,this.spinner=l,this.languageService=r,this.columns=[{name:"License Class"},{name:"Minimum Age"},{name:"License Description"},{name:"Actions"}],this.data=[],this.filteredData=[],this.translateVal="ml"==localStorage.lang?"malay":"english"}ngOnInit(){this.loadData(),this.languageService.languageChanged.subscribe(e=>{this.translateVal="ml"==localStorage.lang?"malay":"english",this.loadData()})}refresh(){this.loadData()}addNewLicense(){this.router.navigate(["/admin/license/add-license"])}loadData(){this.spinner.show(),this.licenseService.getLicenseListPerClient().subscribe(e=>{this.spinner.hide();for(let i=0;i<e.data.length;i++)e.data[i].license_desc=e.data[i]["license_desc_"+this.translateVal];this.data=e.data,this.filteredData=e.data})}filterDatatable(e){const i=e.target.value.toLowerCase(),t=this.columns.length,s=Object.keys(this.filteredData[0]);this.data=this.filteredData.filter(function(e){for(let a=0;a<t;a++)if(-1!==e[s[a]].toString().toLowerCase().indexOf(i)||!i)return!0}),this.table.offset=0}editLicense(e,i){console.log("rowww===",e),this.router.navigate(["/admin/license/edit-license",e.id])}deleteLicense(e,i,t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}),this.rowToDelete=e}deleteLicensDetails(){this.licenseService.deleteLicenseDetails(this.rowToDelete).subscribe(e=>{"Success"==e.status&&(this.toastrService.success("Deleted Successfully!!!"),this.modalService.dismissAll(),this.loadData()),"Session Expired"==e.status&&(this.toastrService.error("Session Expired!!!"),this.router.navigate(["/authentication/signin"]))})}}return e.\u0275fac=function(i){return new(i||e)(I.Y36(x.eN),I.Y36(m.uw),I.Y36(w),I.Y36(o.ux),I.Y36(S.F0),I.Y36(y.FF),I.Y36(U._W),I.Y36(F.t2),I.Y36(k.T))},e.\u0275cmp=I.Xpm({type:e,selectors:[["app-license-list"]],viewQuery:function(e,i){if(1&e&&I.Gf(C.nE,5),2&e){let e;I.iGM(e=I.CRH())&&(i.table=e.first)}},decls:60,vars:30,consts:[["bdColor","rgba(51,51,51,0.8)","size","medium","color","#fff","type","ball-scale-multiple"],[2,"font-size","20px","color","white"],[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"col-md-12"],[1,"mt-5"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"body"],[1,"table-responsive"],[1,"materialTableHeader"],[1,"col-8"],[1,"header-buttons-left","ml-0"],[1,"dropdown"],[1,"dropdown","m-l-20"],["for","search-input"],[1,"material-icons","search-icon"],["placeholder","Search","type","text","aria-label","Search box",1,"browser-default","search-field",3,"keyup"],[1,"col-4"],[1,"header-buttons"],[1,"icon-button-demo"],["mat-mini-fab","","color","primary",3,"click"],[1,"col-white"],[1,"material",3,"rows","columns","sortType","columnMode","headerHeight","footerHeight","rowHeight","limit"],["table",""],["prop","license_class",3,"flexGrow","name"],["prop","minimum_age",3,"flexGrow","name"],["prop","license_desc",3,"flexGrow","name"],["sortable","false",3,"flexGrow","name"],["ngx-datatable-cell-template",""],["deleteRecord",""],["mat-icon-button","","color","accent",1,"btn-tbl-edit",3,"click"],["aria-label","Edit",1,"col-white"],["mat-icon-button","","color","accent",1,"btn-tbl-delete",3,"click"],["aria-label","Delete",1,"col-white"],[1,"modal-header","deleteRowModal"],["id","modal-basic-title",1,"modal-title"],[1,"modal-header"],[1,"modal-about"],[1,"font-weight-bold","p-t-10","font-17"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"material-icons"],[1,"modal-body"],[1,"modal-footer"],[1,"button-demo"],["mat-raised-button","","type","submit","color","primary",3,"click"],["mat-button","","type","button",3,"click"]],template:function(e,i){1&e&&(I.TgZ(0,"ngx-spinner",0),I.TgZ(1,"p",1),I._uU(2,"Loading..."),I.qZA(),I.qZA(),I.TgZ(3,"section",2),I.TgZ(4,"div",3),I.TgZ(5,"div",4),I.TgZ(6,"div",5),I.TgZ(7,"div",6),I.TgZ(8,"ul",7),I.TgZ(9,"li",8),I.TgZ(10,"h4",9),I._uU(11),I.ALo(12,"translate"),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.TgZ(13,"div",5),I.TgZ(14,"div",10),I.TgZ(15,"div",11),I.TgZ(16,"div",12),I.TgZ(17,"div",13),I.TgZ(18,"div",14),I.TgZ(19,"div",15),I.TgZ(20,"div",16),I.TgZ(21,"div",5),I.TgZ(22,"div",17),I.TgZ(23,"ul",18),I.TgZ(24,"li",19),I.TgZ(25,"h2"),I.TgZ(26,"strong"),I._uU(27),I.ALo(28,"translate"),I.qZA(),I.qZA(),I.qZA(),I.TgZ(29,"li",20),I.TgZ(30,"label",21),I.TgZ(31,"i",22),I._uU(32,"search"),I.qZA(),I.qZA(),I.TgZ(33,"input",23),I.NdJ("keyup",function(e){return i.filterDatatable(e)}),I.qZA(),I.qZA(),I._UZ(34,"li"),I.qZA(),I.qZA(),I.TgZ(35,"div",24),I.TgZ(36,"ul",25),I.TgZ(37,"li"),I.TgZ(38,"div",26),I.TgZ(39,"button",27),I.NdJ("click",function(){return i.addNewLicense()}),I.TgZ(40,"mat-icon",28),I._uU(41,"add"),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.TgZ(42,"li"),I.TgZ(43,"div",26),I.TgZ(44,"button",27),I.NdJ("click",function(){return i.refresh()}),I.TgZ(45,"mat-icon",28),I._uU(46,"refresh "),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.TgZ(47,"ngx-datatable",29,30),I._UZ(49,"ngx-datatable-column",31),I.ALo(50,"translate"),I._UZ(51,"ngx-datatable-column",32),I.ALo(52,"translate"),I._UZ(53,"ngx-datatable-column",33),I.ALo(54,"translate"),I.TgZ(55,"ngx-datatable-column",34),I.ALo(56,"translate"),I.YNc(57,J,7,0,"ng-template",35),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.YNc(58,D,23,12,"ng-template",null,36,I.W1O)),2&e&&(I.xp6(11),I.Oqu(I.lcZ(12,18,"LICENSE.LISTTITLE")),I.xp6(16),I.Oqu(I.lcZ(28,20,"LICENSE.LISTTITLE")),I.xp6(20),I.Q6J("rows",i.data)("columns",i.columns)("sortType","multi")("columnMode","flex")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",5),I.xp6(2),I.s9C("name",I.lcZ(50,22,"LICENSE.LIST.LICENSE-CLASS")),I.Q6J("flexGrow",1),I.xp6(2),I.s9C("name",I.lcZ(52,24,"LICENSE.LIST.MIN-AGE")),I.Q6J("flexGrow",1),I.xp6(2),I.s9C("name",I.lcZ(54,26,"LICENSE.LIST.LICENSE-DESC")),I.Q6J("flexGrow",5),I.xp6(2),I.s9C("name",I.lcZ(56,28,"LICENSE.ACTIONS")),I.Q6J("flexGrow",1))},directives:[F.Ro,d.lW,u.Hw,C.nE,C.UC,C.vq],pipes:[O.X$],styles:[""]}),e})();var Y=t(22567),Q=t(81258),M=t(99235),H=t(46739),G=t(79961),j=t(87064),P=t(95522);const B=["autocompleteTrigger"],$=["AdvancelicenceInput"];function V(e,i){1&e&&(I.TgZ(0,"mat-error"),I._uU(1),I.ALo(2,"translate"),I.qZA()),2&e&&(I.xp6(1),I.hij(" ",I.lcZ(2,1,"LICENSE.LIST.LICENSE-CLASS")," is required "))}function z(e,i){1&e&&(I.TgZ(0,"mat-error"),I._uU(1),I.ALo(2,"translate"),I.qZA()),2&e&&(I.xp6(1),I.hij(" ",I.lcZ(2,1,"LICENSE.LIST.LICENSE-ENGLISH")," is required "))}function X(e,i){1&e&&(I.TgZ(0,"mat-error"),I._uU(1),I.ALo(2,"translate"),I.qZA()),2&e&&(I.xp6(1),I.hij(" ",I.lcZ(2,1,"LICENSE.LIST.LICENSE-MALAY")," is required "))}function W(e,i){1&e&&(I.TgZ(0,"mat-error"),I._uU(1),I.ALo(2,"translate"),I.qZA()),2&e&&(I.xp6(1),I.hij(" ",I.lcZ(2,1,"LICENSE.LIST.CRITERIA-ENGLISH")," is required "))}function K(e,i){1&e&&(I.TgZ(0,"mat-error"),I._uU(1),I.ALo(2,"translate"),I.qZA()),2&e&&(I.xp6(1),I.hij(" ",I.lcZ(2,1,"LICENSE.LIST.CRITERIA-MALAY")," is required "))}function ee(e,i){if(1&e&&(I.TgZ(0,"mat-option",44),I._uU(1),I.qZA()),2&e){const e=i.$implicit;I.Q6J("value",e),I.xp6(1),I.hij(" ",e.license_class," ")}}function ie(e,i){if(1&e&&(I.TgZ(0,"div"),I._uU(1),I.qZA()),2&e){const e=I.oxw().$implicit;I.xp6(1),I.hij(" ",e.message," ")}}function te(e,i){if(1&e&&(I.TgZ(0,"mat-error"),I.YNc(1,ie,2,1,"div",19),I.qZA()),2&e){const e=i.$implicit,t=I.oxw(2);I.xp6(1),I.Q6J("ngIf",t.license_type.hasError(e.type))}}function se(e,i){if(1&e&&(I.TgZ(0,"mat-form-field",17),I.TgZ(1,"mat-label"),I._uU(2),I.ALo(3,"translate"),I.qZA(),I._UZ(4,"input",39),I.TgZ(5,"mat-autocomplete",40,41),I.YNc(7,ee,2,2,"mat-option",42),I.ALo(8,"async"),I.qZA(),I.YNc(9,te,2,1,"mat-error",43),I.qZA()),2&e){const e=I.MAs(6),i=I.oxw();I.xp6(2),I.Oqu(I.lcZ(3,6,"LICENSE.LIST.UPGRADE-LICENSE")),I.xp6(2),I.Q6J("formControl",i.license_type)("matAutocomplete",e),I.xp6(1),I.Q6J("displayWith",i.displayFnLicense),I.xp6(2),I.Q6J("ngForOf",I.lcZ(8,8,i.licenseClassList)),I.xp6(2),I.Q6J("ngForOf",i.validation_msgs.license_type)}}function ae(e,i){1&e&&(I.TgZ(0,"mat-icon",57),I._uU(1,"cancel"),I.qZA())}function ne(e,i){if(1&e){const e=I.EpF();I.TgZ(0,"mat-chip",55),I.NdJ("removed",function(){const i=I.CHM(e).$implicit;return I.oxw(2).remove(i)}),I._uU(1),I.YNc(2,ae,2,0,"mat-icon",56),I.qZA()}if(2&e){const e=i.$implicit,t=I.oxw(2);I.Q6J("selectable",t.selectable)("removable",t.removable),I.xp6(1),I.hij(" ",e," "),I.xp6(1),I.Q6J("ngIf",t.removable)}}function ce(e,i){if(1&e&&(I.TgZ(0,"mat-option",44),I._UZ(1,"mat-checkbox",58),I._uU(2),I.qZA()),2&e){const e=i.$implicit,t=I.oxw(2);I.Q6J("value",e),I.xp6(1),I.Q6J("checked",t.license_display.indexOf(e.license_class)>=0),I.xp6(1),I.hij(" ",e.license_class," ")}}function le(e,i){if(1&e){const e=I.EpF();I.TgZ(0,"mat-form-field",45),I.TgZ(1,"mat-chip-list",46,47),I.YNc(3,ne,3,4,"mat-chip",48),I.TgZ(4,"mat-label"),I._uU(5),I.ALo(6,"translate"),I.qZA(),I.TgZ(7,"input",49,50),I.NdJ("matChipInputTokenEnd",function(i){return I.CHM(e),I.oxw().add(i)}),I.qZA(),I.qZA(),I.TgZ(10,"mat-autocomplete",51,52),I.NdJ("optionSelected",function(i){return I.CHM(e),I.oxw().selectedListType(i)}),I.YNc(12,ce,3,3,"mat-option",42),I.ALo(13,"async"),I.qZA(),I.TgZ(14,"button",53),I.NdJ("click",function(){I.CHM(e);const i=I.MAs(9);return I.oxw().openAuto(i)}),I.TgZ(15,"mat-icon",54),I._uU(16,"expand_more"),I.qZA(),I.qZA(),I.qZA()}if(2&e){const e=I.MAs(2),i=I.MAs(11),t=I.oxw();I.xp6(3),I.Q6J("ngForOf",t.license_display),I.xp6(2),I.hij("",I.lcZ(6,7,"LICENSE.LIST.ADVANCE-LICENSE"),"*"),I.xp6(2),I.Q6J("matChipInputFor",e)("matChipInputSeparatorKeyCodes",t.separatorKeysCodes)("formControl",t.advance_license)("matAutocomplete",i),I.xp6(5),I.Q6J("ngForOf",I.lcZ(13,9,t.advanceLicenseList))}}const re=["autocompleteTrigger"],oe=["AdvancelicenceInput"];function de(e,i){1&e&&(I.TgZ(0,"mat-error"),I._uU(1),I.ALo(2,"translate"),I.qZA()),2&e&&(I.xp6(1),I.hij(" ",I.lcZ(2,1,"LICENSE.LIST.LICENSE-CLASS")," is required "))}function ue(e,i){1&e&&(I.TgZ(0,"mat-error"),I._uU(1),I.ALo(2,"translate"),I.qZA()),2&e&&(I.xp6(1),I.hij(" ",I.lcZ(2,1,"LICENSE.LIST.LICENSE-ENGLISH")," is required "))}function pe(e,i){1&e&&(I.TgZ(0,"mat-error"),I._uU(1),I.ALo(2,"translate"),I.qZA()),2&e&&(I.xp6(1),I.hij(" ",I.lcZ(2,1,"LICENSE.LIST.LICENSE-MALAY")," is required "))}function me(e,i){1&e&&(I.TgZ(0,"mat-error"),I._uU(1),I.ALo(2,"translate"),I.qZA()),2&e&&(I.xp6(1),I.hij(" ",I.lcZ(2,1,"LICENSE.LIST.CRITERIA-ENGLISH")," is required "))}function ge(e,i){1&e&&(I.TgZ(0,"mat-error"),I._uU(1),I.ALo(2,"translate"),I.qZA()),2&e&&(I.xp6(1),I.hij(" ",I.lcZ(2,1,"LICENSE.LIST.CRITERIA-MALAY")," is required "))}function he(e,i){if(1&e&&(I.TgZ(0,"mat-option",46),I._uU(1),I.qZA()),2&e){const e=i.$implicit;I.Q6J("value",e),I.xp6(1),I.hij(" ",e.license_class," ")}}function Ze(e,i){if(1&e&&(I.TgZ(0,"div"),I._uU(1),I.qZA()),2&e){const e=I.oxw().$implicit;I.xp6(1),I.hij(" ",e.message," ")}}function Le(e,i){if(1&e&&(I.TgZ(0,"mat-error"),I.YNc(1,Ze,2,1,"div",19),I.qZA()),2&e){const e=i.$implicit,t=I.oxw(2);I.xp6(1),I.Q6J("ngIf",t.license_type.hasError(e.type))}}function Ae(e,i){if(1&e&&(I.TgZ(0,"mat-form-field",17),I.TgZ(1,"mat-label"),I._uU(2),I.ALo(3,"translate"),I.qZA(),I._UZ(4,"input",41),I.TgZ(5,"mat-autocomplete",42,43),I.YNc(7,he,2,2,"mat-option",44),I.ALo(8,"async"),I.qZA(),I.YNc(9,Le,2,1,"mat-error",45),I.qZA()),2&e){const e=I.MAs(6),i=I.oxw();I.xp6(2),I.Oqu(I.lcZ(3,6,"LICENSE.LIST.UPGRADE-LICENSE")),I.xp6(2),I.Q6J("formControl",i.license_type)("matAutocomplete",e),I.xp6(1),I.Q6J("displayWith",i.displayFnLicense),I.xp6(2),I.Q6J("ngForOf",I.lcZ(8,8,i.licenseClassList)),I.xp6(2),I.Q6J("ngForOf",i.validation_msgs.license_type)}}function ve(e,i){1&e&&(I.TgZ(0,"mat-icon",59),I._uU(1,"cancel"),I.qZA())}function fe(e,i){if(1&e){const e=I.EpF();I.TgZ(0,"mat-chip",57),I.NdJ("removed",function(){const i=I.CHM(e).$implicit;return I.oxw(2).remove(i)}),I._uU(1),I.YNc(2,ve,2,0,"mat-icon",58),I.qZA()}if(2&e){const e=i.$implicit,t=I.oxw(2);I.Q6J("selectable",t.selectable)("removable",t.removable),I.xp6(1),I.hij(" ",e," "),I.xp6(1),I.Q6J("ngIf",t.removable)}}function Te(e,i){if(1&e&&(I.TgZ(0,"mat-option",46),I._UZ(1,"mat-checkbox",60),I._uU(2),I.qZA()),2&e){const e=i.$implicit,t=I.oxw(2);I.Q6J("value",e),I.xp6(1),I.Q6J("checked",t.license_display.indexOf(e.license_class)>=0),I.xp6(1),I.hij(" ",e.license_class," ")}}function _e(e,i){if(1&e){const e=I.EpF();I.TgZ(0,"mat-form-field",47),I.TgZ(1,"mat-chip-list",48,49),I.YNc(3,fe,3,4,"mat-chip",50),I.TgZ(4,"mat-label"),I._uU(5),I.ALo(6,"translate"),I.qZA(),I.TgZ(7,"input",51,52),I.NdJ("matChipInputTokenEnd",function(i){return I.CHM(e),I.oxw().add(i)}),I.qZA(),I.qZA(),I.TgZ(10,"mat-autocomplete",53,54),I.NdJ("optionSelected",function(i){return I.CHM(e),I.oxw().selectedListType(i)}),I.YNc(12,Te,3,3,"mat-option",44),I.ALo(13,"async"),I.qZA(),I.TgZ(14,"button",55),I.NdJ("click",function(){I.CHM(e);const i=I.MAs(9);return I.oxw().openAuto(i)}),I.TgZ(15,"mat-icon",56),I._uU(16,"expand_more"),I.qZA(),I.qZA(),I.qZA()}if(2&e){const e=I.MAs(2),i=I.MAs(11),t=I.oxw();I.xp6(3),I.Q6J("ngForOf",t.license_display),I.xp6(2),I.hij("",I.lcZ(6,7,"LICENSE.LIST.ADVANCE-LICENSE"),"*"),I.xp6(2),I.Q6J("matChipInputFor",e)("matChipInputSeparatorKeyCodes",t.separatorKeysCodes)("formControl",t.advance_license)("matAutocomplete",i),I.xp6(5),I.Q6J("ngForOf",I.lcZ(13,9,t.advanceLicenseList))}}const qe=[{path:"license-list",component:R},{path:"add-license",component:(()=>{class e{constructor(e,i,t,s,n,c,l,r){this.cdRef=e,this.fb=i,this.languageService=t,this.toastrService=s,this.licenseService=n,this.router=c,this.route=l,this.spinner=r,this.selectable=!0,this.removable=!0,this.separatorKeysCodes=[M.K5,M.OC],this.license_selected=[],this.license_display=[],this.disableSubmit=!1,this.license_type=new a.NI("",{validators:[e=>"string"==typeof e.value?{invalidAutocompleteObject:{value:e.value}}:null,a.kI.required]}),this.advance_license=new a.NI("",{validators:[e=>"string"==typeof e.value?{invalidAutocompleteObject:{value:e.value}}:null,a.kI.required]}),this.Editor=Y,this.showUpgradeLicense=!1,this.showAdvanceLicense=!1,this.validation_msgs={license_type:[{type:"invalidAutocompleteObject",message:"License Class not recognized. Click one of the options."}],advance_license:[{type:"invalidAutocompleteObject",message:"License Class not recognized. Click one of the options."}]},this.getLicenseList()}ngOnInit(){this.addLicenseForm=this.fb.group({license_class:["",a.kI.required],minimum_age:[""],license_desc_english:["",a.kI.required],license_desc_malay:["",a.kI.required],criteria_english:["",a.kI.required],criteria_malay:["",a.kI.required],license_flow:["",a.kI.required],license_flow_name:["",a.kI.required],license_image:["",a.kI.required],license_image_name:["",a.kI.required],cdl_req:[""],gdlPractical:[!1],psvPractical:[!1],upgradeLicense:[!1],advanceLicense:[!1]})}getLicenseList(){this.licenseService.getLicenseClassList().subscribe(e=>{this.licenseClassData=e.data,this.licenseClassList=this.license_type.valueChanges.pipe((0,Q.O)(""),(0,b.U)(e=>e?this._filterLicenseType(e):this.licenseClassData.slice())),this.advanceLicenseData=e.data,this.advanceLicenseList=this.advance_license.valueChanges.pipe((0,Q.O)(""),(0,b.U)(e=>e?this._filterAdvanceLicenseType(e):this.advanceLicenseData.slice()))})}displayFnLicense(e){return e&&e.license_class?e.license_class:""}_filterLicenseType(e){const i=e.toLowerCase();return this.licenseClassData.filter(e=>e.license_class.toLowerCase().includes(i))}_filterAdvanceLicenseType(e){const i=e.toLowerCase();return this.advanceLicenseData.filter(e=>e.license_class.toLowerCase().includes(i))}add(e){const i=e.input,t=e.value;console.log("------------",t),(t||"").trim()&&this.license_selected.push(t),i&&(i.value=""),this.advance_license.setValue(null)}remove(e){alert("Removeeee"),console.log("license-----",e);const i=this.license_display.indexOf(e);i>=0&&this.license_display.splice(i,1),this.license_selected=this.license_selected.filter(i=>i.license_class!=e)}selectedListType(e){const i=e.option.value.license_class;console.log("newValue=======",i,this.license_selected.length),this.license_display.includes(i)?(this.license_display=[...this.license_display.filter(e=>e!==i)],this.license_selected=[...this.license_selected.filter(i=>i.id!==e.option.value.id)]):(this.license_display.push(i),this.license_selected.push({id:e.option.value.id,license_class:e.option.value.license_class})),this.AdvancelicenceInput.nativeElement.value="",this.advance_license.setValue(null),requestAnimationFrame(()=>{this.openAuto(this.matACTrigger)})}openAuto(e){e.openPanel(),this.AdvancelicenceInput.nativeElement.focus(),console.log(e)}checkUpgrade(e){this.showUpgradeLicense=1==e.checked}checkAdvance(e){this.showAdvanceLicense=1==e.checked}onFileChangeLicenseFlow(e){const i=new FileReader;if(e.target.files&&e.target.files.length){const[t]=e.target.files;i.readAsDataURL(t),i.onload=()=>{this.addLicenseForm.patchValue({license_flow:t}),console.log("this.documentForm===",this.addLicenseForm)}}}onFileChangeLicenseImage(e){const i=new FileReader;if(e.target.files&&e.target.files.length){const[t]=e.target.files;i.readAsDataURL(t),i.onload=()=>{this.addLicenseForm.patchValue({license_image:t}),console.log("this.documentForm===",this.addLicenseForm)}}}setLicenseDetails(){console.log("Editor===",this.addLicenseForm.value);const e=new FormData;e.append("baseRoot","root/License/"+this.addLicenseForm.value.license_class),e.append("licenseData",JSON.stringify(this.addLicenseForm.value)),e.append("licenseImage",this.addLicenseForm.value.license_image),e.append("licenseFlow",this.addLicenseForm.value.license_flow),e.append("license_type",JSON.stringify(this.license_type.value)),e.append("license_selected",JSON.stringify(this.license_selected)),console.log("this.license_selected=======",this.license_selected,this.license_type),1==this.addLicenseForm.value.upgradeLicense&&1==this.addLicenseForm.value.advanceLicense?this.license_type.valid&&this.license_selected.length>0?(this.disableSubmit=!0,this.spinner.show(),this.licenseService.setLicenseDetails(e).subscribe(e=>{this.spinner.hide(),this.disableSubmit=!1,"Success"==e.status?(this.toastrService.success("Registered Successfully!!"),this.addLicenseForm.reset(),this.router.navigate(["/admin/license/license-list"])):"Session Expired"==e.status?(this.toastrService.error("Session Expired!!!"),this.router.navigate(["/authentication/signin"])):this.toastrService.error(e.status)})):this.toastrService.warning("Please Select Upgrade and Advance License!!"):0==this.addLicenseForm.value.upgradeLicense&&1==this.addLicenseForm.value.advanceLicense?this.license_selected.length>0?(this.disableSubmit=!0,this.spinner.show(),this.licenseService.setLicenseDetails(e).subscribe(e=>{this.spinner.hide(),this.disableSubmit=!1,"Success"==e.status?(this.toastrService.success("Registered Successfully!!"),this.addLicenseForm.reset(),this.router.navigate(["/admin/license/license-list"])):"Session Expired"==e.status?(this.toastrService.error("Session Expired!!!"),this.router.navigate(["/authentication/signin"])):this.toastrService.error(e.status)})):this.toastrService.warning("Please Select Advance License!!"):1==this.addLicenseForm.value.upgradeLicense&&0==this.addLicenseForm.value.advanceLicense?this.license_type.valid?(this.disableSubmit=!0,this.spinner.show(),this.licenseService.setLicenseDetails(e).subscribe(e=>{this.spinner.hide(),this.disableSubmit=!1,"Success"==e.status?(this.toastrService.success("Registered Successfully!!"),this.addLicenseForm.reset(),this.router.navigate(["/admin/license/license-list"])):"Session Expired"==e.status?(this.toastrService.error("Session Expired!!!"),this.router.navigate(["/authentication/signin"])):this.toastrService.error(e.status)})):this.toastrService.warning("Please Select Upgrade License!!"):(this.disableSubmit=!0,this.spinner.show(),this.licenseService.setLicenseDetails(e).subscribe(e=>{this.spinner.hide(),this.disableSubmit=!1,"Success"==e.status?(this.toastrService.success("Registered Successfully!!"),this.addLicenseForm.reset(),this.router.navigate(["/admin/license/license-list"])):"Session Expired"==e.status?(this.toastrService.error("Session Expired!!!"),this.router.navigate(["/authentication/signin"])):this.toastrService.error(e.status)}))}goBack(){this.router.navigate(["/admin/license/license-list"])}}return e.\u0275fac=function(i){return new(i||e)(I.Y36(I.sBO),I.Y36(a.qu),I.Y36(k.T),I.Y36(U._W),I.Y36(w),I.Y36(S.F0),I.Y36(S.gz),I.Y36(F.t2))},e.\u0275cmp=I.Xpm({type:e,selectors:[["app-add-license"]],viewQuery:function(e,i){if(1&e&&(I.Gf(B,5),I.Gf($,5)),2&e){let e;I.iGM(e=I.CRH())&&(i.matACTrigger=e.first),I.iGM(e=I.CRH())&&(i.AdvancelicenceInput=e.first)}},decls:120,vars:64,consts:[["bdColor","rgba(51,51,51,0.8)","size","medium","color","#fff","type","ball-scale-multiple"],[2,"font-size","20px","color","white"],[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"row","clearfix"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"header"],[1,"body"],[1,"m-4",3,"formGroup"],[1,"col-xl-4","col-lg-4","col-md-12","col-sm-12","mb-2"],["appearance","outline",1,"example-full-width","mb-3"],["matInput","","formControlName","license_class","required",""],[4,"ngIf"],["matInput","","formControlName","minimum_age","maxlength","2"],["formControlName","cdl_req",1,"example-margin"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2"],["formControlName","license_desc_english",3,"editor"],["formControlName","license_desc_malay",3,"editor"],["formControlName","criteria_english",3,"editor"],["formControlName","criteria_malay",3,"editor"],["formControlName","license_image_name","required","",3,"change"],["matSuffix",""],["formControlName","license_flow_name","required","",3,"change"],["formControlName","gdlPractical",1,"example-margin"],["formControlName","psvPractical",1,"example-margin"],["formControlName","upgradeLicense",1,"example-margin",3,"change"],["formControlName","advanceLicense",1,"example-margin",3,"change"],["class","example-full-width mb-3","appearance","outline",4,"ngIf"],["class","example-full-width",4,"ngIf"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],["mat-raised-button","","color","primary",1,"btn-space",3,"disabled","click"],["type","button","mat-button","",3,"click"],["type","text","matInput","",3,"formControl","matAutocomplete"],[3,"displayWith"],["autoNric","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"value"],[1,"example-full-width"],["aria-label","Fruit selection"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["type","text","matInput","",3,"matChipInputFor","matChipInputSeparatorKeyCodes","formControl","matAutocomplete","matChipInputTokenEnd"],["AdvancelicenceInput","","autocompleteTrigger","matAutocompleteTrigger"],["autoActiveFirstOption","",3,"optionSelected"],["autoLicense","matAutocomplete"],["mat-icon-button","","matSuffix","",2,"width","34px","height","34px",3,"click"],[2,"width","34px"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],["color","primary",2,"padding","0 12px",3,"checked"]],template:function(e,i){1&e&&(I.TgZ(0,"ngx-spinner",0),I.TgZ(1,"p",1),I._uU(2,"Loading..."),I.qZA(),I.qZA(),I.TgZ(3,"section",2),I.TgZ(4,"div",3),I.TgZ(5,"div",4),I.TgZ(6,"div",5),I.TgZ(7,"div",6),I.TgZ(8,"ul",7),I.TgZ(9,"li",8),I.TgZ(10,"h4",9),I._uU(11),I.ALo(12,"translate"),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.TgZ(13,"div",10),I.TgZ(14,"div",11),I.TgZ(15,"div",12),I.TgZ(16,"div",13),I.TgZ(17,"h2"),I._uU(18),I.ALo(19,"translate"),I.qZA(),I.qZA(),I.TgZ(20,"div",14),I.TgZ(21,"form",15),I.TgZ(22,"div",5),I.TgZ(23,"div",16),I.TgZ(24,"mat-form-field",17),I.TgZ(25,"mat-label"),I._uU(26),I.ALo(27,"translate"),I.qZA(),I._UZ(28,"input",18),I.YNc(29,V,3,3,"mat-error",19),I.qZA(),I.qZA(),I.TgZ(30,"div",16),I.TgZ(31,"mat-form-field",17),I.TgZ(32,"mat-label"),I._uU(33),I.ALo(34,"translate"),I.qZA(),I._UZ(35,"input",20),I.qZA(),I.qZA(),I.TgZ(36,"div",16),I.TgZ(37,"mat-checkbox",21),I._uU(38),I.ALo(39,"translate"),I.qZA(),I.qZA(),I.qZA(),I.TgZ(40,"div",5),I.TgZ(41,"div",22),I.TgZ(42,"mat-label"),I._uU(43),I.ALo(44,"translate"),I.qZA(),I._UZ(45,"ckeditor",23),I.YNc(46,z,3,3,"mat-error",19),I.qZA(),I.TgZ(47,"div",22),I.TgZ(48,"mat-label"),I._uU(49),I.ALo(50,"translate"),I.qZA(),I._UZ(51,"ckeditor",24),I.YNc(52,X,3,3,"mat-error",19),I.qZA(),I.qZA(),I.TgZ(53,"div",5),I.TgZ(54,"div",22),I.TgZ(55,"mat-label"),I._uU(56),I.ALo(57,"translate"),I.qZA(),I._UZ(58,"ckeditor",25),I.YNc(59,W,3,3,"mat-error",19),I.qZA(),I.TgZ(60,"div",22),I.TgZ(61,"mat-label"),I._uU(62),I.ALo(63,"translate"),I.qZA(),I._UZ(64,"ckeditor",26),I.YNc(65,K,3,3,"mat-error",19),I.qZA(),I.qZA(),I.TgZ(66,"div",5),I.TgZ(67,"div",22),I.TgZ(68,"mat-form-field",17),I.TgZ(69,"mat-label"),I._uU(70),I.ALo(71,"translate"),I.qZA(),I.TgZ(72,"ngx-mat-file-input",27),I.NdJ("change",function(e){return i.onFileChangeLicenseImage(e)}),I.qZA(),I.TgZ(73,"mat-icon",28),I._uU(74,"cloud_upload"),I.qZA(),I.qZA(),I.qZA(),I.TgZ(75,"div",22),I.TgZ(76,"mat-form-field",17),I.TgZ(77,"mat-label"),I._uU(78),I.ALo(79,"translate"),I.qZA(),I.TgZ(80,"ngx-mat-file-input",29),I.NdJ("change",function(e){return i.onFileChangeLicenseFlow(e)}),I.qZA(),I.TgZ(81,"mat-icon",28),I._uU(82,"cloud_upload"),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.TgZ(83,"div",5),I.TgZ(84,"div",22),I.TgZ(85,"div",5),I.TgZ(86,"div",22),I.TgZ(87,"mat-checkbox",30),I._uU(88),I.ALo(89,"translate"),I.qZA(),I.qZA(),I.TgZ(90,"div",22),I.TgZ(91,"mat-checkbox",31),I._uU(92),I.ALo(93,"translate"),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.TgZ(94,"div",22),I.TgZ(95,"div",5),I.TgZ(96,"div",22),I.TgZ(97,"mat-checkbox",32),I.NdJ("change",function(e){return i.checkUpgrade(e)}),I._uU(98),I.ALo(99,"translate"),I.qZA(),I.qZA(),I.TgZ(100,"div",22),I.TgZ(101,"mat-checkbox",33),I.NdJ("change",function(e){return i.checkAdvance(e)}),I._uU(102),I.ALo(103,"translate"),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.TgZ(104,"div",5),I._UZ(105,"div",22),I.TgZ(106,"div",22),I.TgZ(107,"div",5),I.TgZ(108,"div",22),I.YNc(109,se,10,10,"mat-form-field",34),I.qZA(),I.TgZ(110,"div",22),I.YNc(111,le,17,11,"mat-form-field",35),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.TgZ(112,"div",5),I.TgZ(113,"div",36),I.TgZ(114,"button",37),I.NdJ("click",function(){return i.setLicenseDetails()}),I._uU(115),I.ALo(116,"translate"),I.qZA(),I.TgZ(117,"button",38),I.NdJ("click",function(){return i.goBack()}),I._uU(118),I.ALo(119,"translate"),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA()),2&e&&(I.xp6(11),I.Oqu(I.lcZ(12,30,"LICENSE.TITLE")),I.xp6(7),I.Oqu(I.lcZ(19,32,"LICENSE.TITLE")),I.xp6(3),I.Q6J("formGroup",i.addLicenseForm),I.xp6(5),I.Oqu(I.lcZ(27,34,"LICENSE.LIST.LICENSE-CLASS")),I.xp6(3),I.Q6J("ngIf",i.addLicenseForm.get("license_class").hasError("required")),I.xp6(4),I.Oqu(I.lcZ(34,36,"LICENSE.LIST.MIN-AGE")),I.xp6(5),I.Oqu(I.lcZ(39,38,"LICENSE.LIST.CDL-REQ")),I.xp6(5),I.hij("",I.lcZ(44,40,"LICENSE.LIST.LICENSE-ENGLISH"),"*"),I.xp6(2),I.Q6J("editor",i.Editor),I.xp6(1),I.Q6J("ngIf",i.addLicenseForm.get("license_desc_english").hasError("required")),I.xp6(3),I.hij("",I.lcZ(50,42,"LICENSE.LIST.LICENSE-MALAY"),"*"),I.xp6(2),I.Q6J("editor",i.Editor),I.xp6(1),I.Q6J("ngIf",i.addLicenseForm.get("license_desc_malay").hasError("required")),I.xp6(4),I.hij("",I.lcZ(57,44,"LICENSE.LIST.CRITERIA-ENGLISH"),"*"),I.xp6(2),I.Q6J("editor",i.Editor),I.xp6(1),I.Q6J("ngIf",i.addLicenseForm.get("criteria_english").hasError("required")),I.xp6(3),I.hij("",I.lcZ(63,46,"LICENSE.LIST.CRITERIA-MALAY"),"*"),I.xp6(2),I.Q6J("editor",i.Editor),I.xp6(1),I.Q6J("ngIf",i.addLicenseForm.get("criteria_malay").hasError("required")),I.xp6(5),I.Oqu(I.lcZ(71,48,"LICENSE.LIST.LICENSE-IMAGE")),I.xp6(8),I.Oqu(I.lcZ(79,50,"LICENSE.LIST.LICENSE-FLOW")),I.xp6(10),I.Oqu(I.lcZ(89,52,"LICENSE.LIST.GDL-PRACTICAL")),I.xp6(4),I.Oqu(I.lcZ(93,54,"LICENSE.LIST.PSV-PRACTICAL")),I.xp6(6),I.Oqu(I.lcZ(99,56,"LICENSE.LIST.UPGRADE")),I.xp6(4),I.Oqu(I.lcZ(103,58,"LICENSE.LIST.ADVANCE")),I.xp6(7),I.Q6J("ngIf",i.showUpgradeLicense),I.xp6(2),I.Q6J("ngIf",i.showAdvanceLicense),I.xp6(3),I.Q6J("disabled",!i.addLicenseForm.valid||i.disableSubmit),I.xp6(1),I.Oqu(I.lcZ(116,60,"BUTTON.ADD-BTN")),I.xp6(3),I.Oqu(I.lcZ(119,62,"BUTTON.CANCEL-BTN")))},directives:[F.Ro,a._Y,a.JL,a.sg,l.KE,l.hX,r.Nt,a.Fj,a.JJ,a.u,a.Q7,s.O5,a.nD,L.oG,H.u,A.Yh,u.Hw,l.R9,d.lW,l.TO,G.ZL,a.oH,G.XC,s.sg,j.ey,P.qn,P.oH,P.HS,P.qH],pipes:[O.X$,s.Ov],styles:["[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:400px}"]}),e})()},{path:"edit-license/:id",component:(()=>{class e{constructor(e,i,t,s,n,c,l,r){this.cdRef=e,this.fb=i,this.languageService=t,this.toastrService=s,this.licenseService=n,this.router=c,this.route=l,this.spinner=r,this.selectable=!0,this.removable=!0,this.separatorKeysCodes=[M.K5,M.OC],this.license_selected=[],this.license_display=[],this.license_type=new a.NI("",{validators:[e=>"string"==typeof e.value?{invalidAutocompleteObject:{value:e.value}}:null,a.kI.required]}),this.advance_license=new a.NI("",{validators:[e=>"string"==typeof e.value?{invalidAutocompleteObject:{value:e.value}}:null,a.kI.required]}),this.showUpgradeLicense=!1,this.showAdvanceLicense=!1,this.Editor=Y,this.apiURL=N.N.apiUrl,this.validation_msgs={license_type:[{type:"invalidAutocompleteObject",message:"License Class not recognized. Click one of the options."}],advance_license:[{type:"invalidAutocompleteObject",message:"License Class not recognized. Click one of the options."}]},this.licenseId=this.route.snapshot.paramMap.get("id"),this.editLicenseForm=this.fb.group({id:[""],prev_license_class:["",a.kI.required],license_class:["",a.kI.required],minimum_age:[""],license_desc_english:["",a.kI.required],license_desc_malay:["",a.kI.required],criteria_english:["",a.kI.required],criteria_malay:["",a.kI.required],license_flow:["",a.kI.required],license_flow_name:["",a.kI.required],license_image:["",a.kI.required],license_image_name:["",a.kI.required],cdl_req:[""],gdlPractical:[!1],psvPractical:[!1],isActive:[""],upgradeLicense:[!1],advanceLicense:[!1]}),this.getLicenseList()}ngOnInit(){this.spinner.show(),this.licenseService.getLicenseToEdit(this.licenseId).subscribe(e=>{let i=[],t=[];if(this.spinner.hide(),"Session Expired"==e.status)this.toastrService.error("Session Expired!!!"),this.router.navigate(["/authentication/signin"]);else if(e.data.length>0){let a=e.data[0];this.editLicenseForm.patchValue({id:a.id,prev_license_class:a.license_class,license_class:a.license_class,cdl_req:1==a.cdl_requirement,gdlPractical:1==a.gdl_practical,psvPractical:1==a.psv_practical,minimum_age:a.minimum_age,license_desc_english:a.license_desc_english,license_desc_malay:a.license_desc_malay,criteria_english:a.criteria_english,criteria_malay:a.criteria_malay,license_flow:a.license_flow,license_flow_name:a.license_flow,license_image:a.license_image,license_image_name:a.license_image,isActive:a.is_active});let n=e.advanceList.filter(e=>"Upgrade"==e.license_category),c=e.advanceList.filter(e=>"Advance"==e.license_category);if(n.length>0){this.showUpgradeLicense=!0,this.editLicenseForm.patchValue({upgradeLicense:!0});var s=this.licenseClassData.filter(e=>e.id==n[0].ext_license_id);this.license_type.setValue(s[0])}c.length>0&&(this.showAdvanceLicense=!0,this.editLicenseForm.patchValue({advanceLicense:!0}));for(let e=0;e<c.length;e++)i.push(c[e].license_class),t.push({id:c[e].ext_license_id,license_class:c[e].license_class});this.license_display=i,this.license_selected=t}else this.toastrService.error("No Data Found!!!")})}displayFnLicense(e){return e&&e.license_class?e.license_class:""}_filterLicenseType(e){const i=e.toLowerCase();return this.licenseClassData.filter(e=>e.license_class.toLowerCase().includes(i))}_filterAdvanceLicenseType(e){const i=e.toLowerCase();return this.advanceLicenseData.filter(e=>e.license_class.toLowerCase().includes(i))}add(e){const i=e.input,t=e.value;console.log("------------",t),(t||"").trim()&&this.license_selected.push(t),i&&(i.value=""),this.advance_license.setValue(null)}remove(e){alert("Removeeee"),console.log("license-----",e);const i=this.license_display.indexOf(e);i>=0&&this.license_display.splice(i,1),this.license_selected=this.license_selected.filter(i=>i.license_class!=e)}selectedListType(e){const i=e.option.value.license_class;console.log("newValue=======",i,this.license_selected.length),this.license_display.includes(i)?(this.license_display=[...this.license_display.filter(e=>e!==i)],this.license_selected=[...this.license_selected.filter(i=>i.id!==e.option.value.id)]):(this.license_display.push(i),this.license_selected.push({id:e.option.value.id,license_class:e.option.value.license_class})),this.AdvancelicenceInput.nativeElement.value="",this.advance_license.setValue(null),requestAnimationFrame(()=>{this.openAuto(this.matACTrigger)})}openAuto(e){e.openPanel(),this.AdvancelicenceInput.nativeElement.focus(),console.log(e)}checkUpgrade(e){this.showUpgradeLicense=1==e.checked}checkAdvance(e){this.showAdvanceLicense=1==e.checked}getLicenseList(){this.licenseService.getLicenseClassList().subscribe(e=>{this.licenseClassData=e.data,this.licenseClassList=this.license_type.valueChanges.pipe((0,Q.O)(""),(0,b.U)(e=>e?this._filterLicenseType(e):this.licenseClassData.slice())),this.advanceLicenseData=e.data,this.advanceLicenseList=this.advance_license.valueChanges.pipe((0,Q.O)(""),(0,b.U)(e=>e?this._filterAdvanceLicenseType(e):this.advanceLicenseData.slice()))})}onFileChangeLicenseFlow(e){const i=new FileReader;if(e.target.files&&e.target.files.length){const[t]=e.target.files;i.readAsDataURL(t),i.onload=()=>{this.licenseFlow_preview=i.result,this.editLicenseForm.patchValue({license_flow:t}),console.log("this.documentForm===",this.editLicenseForm)}}}onFileChangeLicenseImage(e){const i=new FileReader;if(e.target.files&&e.target.files.length){const[t]=e.target.files;i.readAsDataURL(t),i.onload=()=>{this.licenseImg_preview=i.result,this.editLicenseForm.patchValue({license_image:t}),console.log("this.documentForm===",this.editLicenseForm)}}}goBack(){this.router.navigate(["/admin/license/license-list"])}updateLicenseDetails(){console.log("Editor===",this.editLicenseForm.value),this.spinner.show();const e=new FormData;e.append("baseRoot","root/License/"+this.editLicenseForm.value.license_class),e.append("licenseData",JSON.stringify(this.editLicenseForm.value)),e.append("licenseImage",this.editLicenseForm.value.license_image),e.append("licenseFlow",this.editLicenseForm.value.license_flow),e.append("license_type",JSON.stringify(this.license_type.value)),e.append("license_selected",JSON.stringify(this.license_selected)),1==this.editLicenseForm.value.upgradeLicense&&1==this.editLicenseForm.value.advanceLicense?this.license_type.valid&&this.license_selected.length>0?(this.spinner.show(),this.licenseService.updateLicenseDetails(e).subscribe(e=>{this.spinner.hide(),"Success"==e.status?(this.toastrService.success("Updated Successfully!!"),this.editLicenseForm.reset(),this.router.navigate(["/admin/license/license-list"])):"Session Expired"==e.status?(this.toastrService.error("Session Expired!!!"),this.router.navigate(["/authentication/signin"])):this.toastrService.error(e.status)})):this.toastrService.warning("Please Select Upgrade and Advance License!!"):0==this.editLicenseForm.value.upgradeLicense&&1==this.editLicenseForm.value.advanceLicense?this.license_selected.length>0?(this.spinner.show(),this.licenseService.updateLicenseDetails(e).subscribe(e=>{this.spinner.hide(),"Success"==e.status?(this.toastrService.success("Updated Successfully!!"),this.editLicenseForm.reset(),this.router.navigate(["/admin/license/license-list"])):"Session Expired"==e.status?(this.toastrService.error("Session Expired!!!"),this.router.navigate(["/authentication/signin"])):this.toastrService.error(e.status)})):this.toastrService.warning("Please Select Advance License!!"):1==this.editLicenseForm.value.upgradeLicense&&0==this.editLicenseForm.value.advanceLicense?this.license_type.valid?(this.spinner.show(),this.licenseService.updateLicenseDetails(e).subscribe(e=>{this.spinner.hide(),"Success"==e.status?(this.toastrService.success("Updated Successfully!!"),this.editLicenseForm.reset(),this.router.navigate(["/admin/license/license-list"])):"Session Expired"==e.status?(this.toastrService.error("Session Expired!!!"),this.router.navigate(["/authentication/signin"])):this.toastrService.error(e.status)})):this.toastrService.warning("Please Select Upgrade License!!"):(this.spinner.show(),this.licenseService.updateLicenseDetails(e).subscribe(e=>{this.spinner.hide(),"Success"==e.status?(this.toastrService.success("Updated Successfully!!"),this.editLicenseForm.reset(),this.router.navigate(["/admin/license/license-list"])):"Session Expired"==e.status?(this.toastrService.error("Session Expired!!!"),this.router.navigate(["/authentication/signin"])):this.toastrService.error(e.status)}))}}return e.\u0275fac=function(i){return new(i||e)(I.Y36(I.sBO),I.Y36(a.qu),I.Y36(k.T),I.Y36(U._W),I.Y36(w),I.Y36(S.F0),I.Y36(S.gz),I.Y36(F.t2))},e.\u0275cmp=I.Xpm({type:e,selectors:[["app-edit-license"]],viewQuery:function(e,i){if(1&e&&(I.Gf(re,5),I.Gf(oe,5)),2&e){let e;I.iGM(e=I.CRH())&&(i.matACTrigger=e.first),I.iGM(e=I.CRH())&&(i.AdvancelicenceInput=e.first)}},decls:131,vars:66,consts:[["bdColor","rgba(51,51,51,0.8)","size","medium","color","#fff","type","ball-scale-multiple"],[2,"font-size","20px","color","white"],[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"row","clearfix"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"header"],[1,"body"],[1,"m-4",3,"formGroup"],[1,"col-xl-4","col-lg-4","col-md-12","col-sm-12","mb-2"],["appearance","outline",1,"example-full-width","mb-3"],["matInput","","formControlName","license_class","readonly",""],[4,"ngIf"],["matInput","","formControlName","minimum_age"],["formControlName","cdl_req",1,"example-margin"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2"],["formControlName","license_desc_english",3,"editor"],["formControlName","license_desc_malay",3,"editor"],["formControlName","criteria_english",3,"editor"],["formControlName","criteria_malay",3,"editor"],[2,"width","100%","height","50%",3,"src"],["formControlName","license_image_name","required","",3,"change"],["matSuffix",""],["formControlName","license_flow_name","required","",3,"change"],["formControlName","gdlPractical",1,"example-margin"],["formControlName","psvPractical",1,"example-margin"],["formControlName","isActive",1,"example-margin"],["formControlName","upgradeLicense",1,"example-margin",3,"change"],["formControlName","advanceLicense",1,"example-margin",3,"change"],["class","example-full-width mb-3","appearance","outline",4,"ngIf"],["class","example-full-width",4,"ngIf"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],["mat-raised-button","","color","primary",1,"btn-space",3,"disabled","click"],["type","button","mat-button","",3,"click"],["type","text","matInput","",3,"formControl","matAutocomplete"],[3,"displayWith"],["autoNric","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"value"],[1,"example-full-width"],["aria-label","Fruit selection"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["type","text","matInput","",3,"matChipInputFor","matChipInputSeparatorKeyCodes","formControl","matAutocomplete","matChipInputTokenEnd"],["AdvancelicenceInput","","autocompleteTrigger","matAutocompleteTrigger"],["autoActiveFirstOption","",3,"optionSelected"],["autoLicense","matAutocomplete"],["mat-icon-button","","matSuffix","",2,"width","34px","height","34px",3,"click"],[2,"width","34px"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],["color","primary",2,"padding","0 12px",3,"checked"]],template:function(e,i){1&e&&(I.TgZ(0,"ngx-spinner",0),I.TgZ(1,"p",1),I._uU(2,"Loading..."),I.qZA(),I.qZA(),I.TgZ(3,"section",2),I.TgZ(4,"div",3),I.TgZ(5,"div",4),I.TgZ(6,"div",5),I.TgZ(7,"div",6),I.TgZ(8,"ul",7),I.TgZ(9,"li",8),I.TgZ(10,"h4",9),I._uU(11),I.ALo(12,"translate"),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.TgZ(13,"div",10),I.TgZ(14,"div",11),I.TgZ(15,"div",12),I.TgZ(16,"div",13),I.TgZ(17,"h2"),I._uU(18),I.ALo(19,"translate"),I.qZA(),I.qZA(),I.TgZ(20,"div",14),I.TgZ(21,"form",15),I.TgZ(22,"div",5),I.TgZ(23,"div",16),I.TgZ(24,"mat-form-field",17),I.TgZ(25,"mat-label"),I._uU(26),I.ALo(27,"translate"),I.qZA(),I._UZ(28,"input",18),I.YNc(29,de,3,3,"mat-error",19),I.qZA(),I.qZA(),I.TgZ(30,"div",16),I.TgZ(31,"mat-form-field",17),I.TgZ(32,"mat-label"),I._uU(33),I.ALo(34,"translate"),I.qZA(),I._UZ(35,"input",20),I.qZA(),I.qZA(),I.TgZ(36,"div",16),I.TgZ(37,"mat-checkbox",21),I._uU(38),I.ALo(39,"translate"),I.qZA(),I.qZA(),I.qZA(),I.TgZ(40,"div",5),I.TgZ(41,"div",22),I.TgZ(42,"mat-label"),I._uU(43),I.ALo(44,"translate"),I.qZA(),I._UZ(45,"ckeditor",23),I.YNc(46,ue,3,3,"mat-error",19),I.qZA(),I.TgZ(47,"div",22),I.TgZ(48,"mat-label"),I._uU(49),I.ALo(50,"translate"),I.qZA(),I._UZ(51,"ckeditor",24),I.YNc(52,pe,3,3,"mat-error",19),I.qZA(),I.qZA(),I.TgZ(53,"div",5),I.TgZ(54,"div",22),I.TgZ(55,"mat-label"),I._uU(56),I.ALo(57,"translate"),I.qZA(),I._UZ(58,"ckeditor",25),I.YNc(59,me,3,3,"mat-error",19),I.qZA(),I.TgZ(60,"div",22),I.TgZ(61,"mat-label"),I._uU(62),I.ALo(63,"translate"),I.qZA(),I._UZ(64,"ckeditor",26),I.YNc(65,ge,3,3,"mat-error",19),I.qZA(),I.qZA(),I.TgZ(66,"div",5),I.TgZ(67,"div",22),I.TgZ(68,"div",5),I.TgZ(69,"div",22),I._UZ(70,"img",27),I.qZA(),I.TgZ(71,"div",22),I.TgZ(72,"mat-form-field",17),I.TgZ(73,"mat-label"),I._uU(74),I.ALo(75,"translate"),I.qZA(),I.TgZ(76,"ngx-mat-file-input",28),I.NdJ("change",function(e){return i.onFileChangeLicenseImage(e)}),I.qZA(),I.TgZ(77,"mat-icon",29),I._uU(78,"cloud_upload"),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.TgZ(79,"div",22),I.TgZ(80,"div",5),I.TgZ(81,"div",22),I._UZ(82,"img",27),I.qZA(),I.TgZ(83,"div",22),I.TgZ(84,"mat-form-field",17),I.TgZ(85,"mat-label"),I._uU(86),I.ALo(87,"translate"),I.qZA(),I.TgZ(88,"ngx-mat-file-input",30),I.NdJ("change",function(e){return i.onFileChangeLicenseFlow(e)}),I.qZA(),I.TgZ(89,"mat-icon",29),I._uU(90,"cloud_upload"),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.TgZ(91,"div",5),I.TgZ(92,"div",22),I.TgZ(93,"div",5),I.TgZ(94,"div",16),I.TgZ(95,"mat-checkbox",31),I._uU(96),I.ALo(97,"translate"),I.qZA(),I.qZA(),I.TgZ(98,"div",16),I.TgZ(99,"mat-checkbox",32),I._uU(100),I.ALo(101,"translate"),I.qZA(),I.qZA(),I.TgZ(102,"div",16),I.TgZ(103,"mat-checkbox",33),I._uU(104,"Active"),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.TgZ(105,"div",22),I.TgZ(106,"div",5),I.TgZ(107,"div",22),I.TgZ(108,"mat-checkbox",34),I.NdJ("change",function(e){return i.checkUpgrade(e)}),I._uU(109),I.ALo(110,"translate"),I.qZA(),I.qZA(),I.TgZ(111,"div",22),I.TgZ(112,"mat-checkbox",35),I.NdJ("change",function(e){return i.checkAdvance(e)}),I._uU(113),I.ALo(114,"translate"),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.TgZ(115,"div",5),I._UZ(116,"div",22),I.TgZ(117,"div",22),I.TgZ(118,"div",5),I.TgZ(119,"div",22),I.YNc(120,Ae,10,10,"mat-form-field",36),I.qZA(),I.TgZ(121,"div",22),I.YNc(122,_e,17,11,"mat-form-field",37),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.TgZ(123,"div",5),I.TgZ(124,"div",38),I.TgZ(125,"button",39),I.NdJ("click",function(){return i.updateLicenseDetails()}),I._uU(126),I.ALo(127,"translate"),I.qZA(),I.TgZ(128,"button",40),I.NdJ("click",function(){return i.goBack()}),I._uU(129),I.ALo(130,"translate"),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA(),I.qZA()),2&e&&(I.xp6(11),I.Oqu(I.lcZ(12,32,"LICENSE.EDITTITLE")),I.xp6(7),I.Oqu(I.lcZ(19,34,"LICENSE.EDITTITLE")),I.xp6(3),I.Q6J("formGroup",i.editLicenseForm),I.xp6(5),I.Oqu(I.lcZ(27,36,"LICENSE.LIST.LICENSE-CLASS")),I.xp6(3),I.Q6J("ngIf",i.editLicenseForm.get("license_class").hasError("required")),I.xp6(4),I.Oqu(I.lcZ(34,38,"LICENSE.LIST.MIN-AGE")),I.xp6(5),I.Oqu(I.lcZ(39,40,"LICENSE.LIST.CDL-REQ")),I.xp6(5),I.hij("",I.lcZ(44,42,"LICENSE.LIST.LICENSE-ENGLISH"),"*"),I.xp6(2),I.Q6J("editor",i.Editor),I.xp6(1),I.Q6J("ngIf",i.editLicenseForm.get("license_desc_english").hasError("required")),I.xp6(3),I.hij("",I.lcZ(50,44,"LICENSE.LIST.LICENSE-MALAY"),"*"),I.xp6(2),I.Q6J("editor",i.Editor),I.xp6(1),I.Q6J("ngIf",i.editLicenseForm.get("license_desc_malay").hasError("required")),I.xp6(4),I.hij("",I.lcZ(57,46,"LICENSE.LIST.CRITERIA-ENGLISH"),"*"),I.xp6(2),I.Q6J("editor",i.Editor),I.xp6(1),I.Q6J("ngIf",i.editLicenseForm.get("criteria_english").hasError("required")),I.xp6(3),I.hij("",I.lcZ(63,48,"LICENSE.LIST.CRITERIA-MALAY"),"*"),I.xp6(2),I.Q6J("editor",i.Editor),I.xp6(1),I.Q6J("ngIf",i.editLicenseForm.get("criteria_malay").hasError("required")),I.xp6(5),I.s9C("src",i.licenseImg_preview?i.licenseImg_preview:i.apiURL+"/"+i.editLicenseForm.value.license_image,I.LSH),I.xp6(4),I.Oqu(I.lcZ(75,50,"LICENSE.LIST.LICENSE-IMAGE")),I.xp6(8),I.s9C("src",i.licenseFlow_preview?i.licenseFlow_preview:i.apiURL+"/"+i.editLicenseForm.value.license_flow,I.LSH),I.xp6(4),I.Oqu(I.lcZ(87,52,"LICENSE.LIST.LICENSE-FLOW")),I.xp6(10),I.Oqu(I.lcZ(97,54,"LICENSE.LIST.GDL-PRACTICAL")),I.xp6(4),I.Oqu(I.lcZ(101,56,"LICENSE.LIST.PSV-PRACTICAL")),I.xp6(9),I.Oqu(I.lcZ(110,58,"LICENSE.LIST.UPGRADE")),I.xp6(4),I.Oqu(I.lcZ(114,60,"LICENSE.LIST.ADVANCE")),I.xp6(7),I.Q6J("ngIf",i.showUpgradeLicense),I.xp6(2),I.Q6J("ngIf",i.showAdvanceLicense),I.xp6(3),I.Q6J("disabled",!i.editLicenseForm.valid),I.xp6(1),I.Oqu(I.lcZ(127,62,"BUTTON.EDIT-BTN")),I.xp6(3),I.Oqu(I.lcZ(130,64,"BUTTON.CANCEL-BTN")))},directives:[F.Ro,a._Y,a.JL,a.sg,l.KE,l.hX,r.Nt,a.Fj,a.JJ,a.u,s.O5,L.oG,H.u,A.Yh,a.Q7,u.Hw,l.R9,d.lW,l.TO,G.ZL,a.oH,G.XC,s.sg,j.ey,P.qn,P.oH,P.HS,P.qH],pipes:[O.X$,s.Ov],styles:["[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:400px}"]}),e})()}];let Se=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=I.oAB({type:e}),e.\u0275inj=I.cJS({imports:[[S.Bz.forChild(qe)],S.Bz]}),e})(),Ce=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=I.oAB({type:e}),e.\u0275inj=I.cJS({providers:[w],imports:[[C.xD,H.d,s.ez,a.u5,a.UX,n.p0,c.TU,l.lN,r.c,o.ZX,d.ot,u.Ps,m.Is,g.JX,h.g0,p.LD,Z.FA,L.p9,P.Hi,v.Nh,f.Tx,A.Ad,Se,T.Cq,_.T5,q.yI,O.aw,G.Bb,F.ef]]}),e})()}}]);