(self.webpackChunksmart=self.webpackChunksmart||[]).push([[2850],{42850:function(t,e,i){"use strict";i.r(e),i.d(e,{TimelineModule:function(){return $}});var n=i(61116),o=i(35729),r=i(31041),s=i(81258),a=i(91681),l=i(35366),c=i(94784),u=i(50518),p=i(529),m=i(42693);let g=(()=>{class t{constructor(t){this.http=t}getAllNRICNumber(t){return this.http.post(`${p.N.apiUrl}/webRoutes/getAllNRICNumber`,{client:t}).pipe((0,a.U)(t=>t))}getAllPassportNumber(t){return this.http.post(`${p.N.apiUrl}/webRoutes/getAllPassportNumber`,{client:t}).pipe((0,a.U)(t=>t))}getTransactionNumberList(t,e){return this.http.post(`${p.N.apiUrl}/webRoutes/getTransactionNumberList`,{studentdt:t,client:e}).pipe((0,a.U)(t=>t))}getStatusList(){return this.http.get(`${p.N.apiUrl}/webRoutes/getStatusList`).pipe((0,a.U)(t=>t))}checkTimelineForStudent(t,e,i){return this.http.post(`${p.N.apiUrl}/webRoutes/checkTimelineForStudent`,{studentid:t,tranid:e,client:i}).pipe((0,a.U)(t=>t))}}return t.\u0275fac=function(e){return new(e||t)(l.LFG(m.eN))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var d=i(13070),b=i(9550),h=i(79961),f=i(87064),N=i(77307),Z=i(60649);function _(t,e){if(1&t&&(l.TgZ(0,"mat-option",20),l._uU(1),l.qZA()),2&t){const t=e.$implicit;l.Q6J("value",t),l.xp6(1),l.hij(" ",t.nric_number," ")}}function v(t,e){if(1&t&&(l.TgZ(0,"div"),l._uU(1),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.hij(" ",t.message," ")}}function A(t,e){if(1&t&&(l.TgZ(0,"mat-error"),l.YNc(1,v,2,1,"div",21),l.qZA()),2&t){const t=e.$implicit,i=l.oxw();l.xp6(1),l.Q6J("ngIf",i.nric_number.hasError(t.type))}}function T(t,e){if(1&t&&(l.TgZ(0,"mat-option",20),l._uU(1),l.qZA()),2&t){const t=e.$implicit;l.Q6J("value",t),l.xp6(1),l.hij(" ",t.passport_number," ")}}function x(t,e){if(1&t&&(l.TgZ(0,"div"),l._uU(1),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.hij(" ",t.message," ")}}function C(t,e){if(1&t&&(l.TgZ(0,"mat-error"),l.YNc(1,x,2,1,"div",21),l.qZA()),2&t){const t=e.$implicit,i=l.oxw();l.xp6(1),l.Q6J("ngIf",i.passport_number.hasError(t.type))}}function q(t,e){if(1&t&&(l.TgZ(0,"mat-option",20),l._uU(1),l.qZA()),2&t){const t=e.$implicit;l.Q6J("value",t),l.xp6(1),l.hij(" ",t.enrollment_no," ")}}function L(t,e){if(1&t&&(l.TgZ(0,"div"),l._uU(1),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.hij(" ",t.message," ")}}function O(t,e){if(1&t&&(l.TgZ(0,"mat-error"),l.YNc(1,L,2,1,"div",21),l.qZA()),2&t){const t=e.$implicit,i=l.oxw();l.xp6(1),l.Q6J("ngIf",i.enrollment_no.hasError(t.type))}}function U(t,e){if(1&t&&(l.TgZ(0,"span",33),l._uU(1),l.ALo(2,"date"),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.Oqu(l.xi3(2,1,t.scheduled_date,"dd-MM-YYYY"))}}function I(t,e){if(1&t&&(l.TgZ(0,"span",33),l._uU(1),l.ALo(2,"date"),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.Oqu(l.xi3(2,1,t.completed_date,"dd-MM-YYYY"))}}function y(t,e){if(1&t&&l._UZ(0,"div",32),2&t){const t=l.oxw().$implicit;l.Q6J("ngClass",t.BColor?"progline-green":"progline-orange")}}function S(t,e){if(1&t&&(l.TgZ(0,"li"),l.TgZ(1,"time",26),l.YNc(2,U,3,4,"span",27),l.YNc(3,I,3,4,"span",27),l.qZA(),l.TgZ(4,"div",28),l.TgZ(5,"mat-icon",29),l._uU(6,"done"),l.qZA(),l.qZA(),l.YNc(7,y,1,1,"div",30),l.TgZ(8,"div",31),l.TgZ(9,"span"),l._uU(10),l.qZA(),l._UZ(11,"div",32),l.qZA(),l.qZA()),2&t){const t=e.$implicit;l.xp6(2),l.Q6J("ngIf",t.scheduled_date),l.xp6(1),l.Q6J("ngIf",t.completed_date),l.xp6(1),l.Q6J("ngClass",t.BColor?"timeline-green":"timeline-orange"),l.xp6(3),l.Q6J("ngIf",15!=t.id),l.xp6(1),l.Q6J("ngClass",t.BColor?"bck-color":""),l.xp6(2),l.Oqu(t.status),l.xp6(1),l.Q6J("ngClass",t.BColor?"bck-right-color":"bck-orange-color")}}function w(t,e){if(1&t&&(l.TgZ(0,"div",22),l.TgZ(1,"div",23),l.TgZ(2,"div",3),l.TgZ(3,"div",24),l.TgZ(4,"ul",25),l.YNc(5,S,12,7,"li",16),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t){const t=l.oxw();l.xp6(5),l.Q6J("ngForOf",t.statusList)}}const J=[{path:"",component:(()=>{class t{constructor(t,e,i,n,o,s,a){this.cdRef=t,this.fb=e,this.languageService=i,this.toastrService=n,this.timelineService=o,this.router=s,this.route=a,this.nric_number=new r.NI("",{validators:[t=>"string"==typeof t.value?{invalidAutocompleteObject:{value:t.value}}:null]}),this.passport_number=new r.NI("",{validators:[t=>"string"==typeof t.value?{invalidAutocompleteObject:{value:t.value}}:null]}),this.enrollment_no=new r.NI("",{validators:[t=>"string"==typeof t.value?{invalidAutocompleteObject:{value:t.value}}:null]}),this.validation_msgs={nric_number:[{type:"invalidAutocompleteObject",message:"NRIC Number not recognized. Click one of the options."}],passport_number:[{type:"invalidAutocompleteObject",message:"Passport Number not recognized. Click one of the options."}],enrollment_no:[{type:"invalidAutocompleteObject",message:"Transaction Number not recognized. Click one of the options."}]}}ngOnInit(){this.getNRICNumber(),this.getPassportNumber(),this.getStatusList(),this.languageService.languageChanged.subscribe(t=>{this.translateVal="ml"==localStorage.lang?"malay":"english"})}getStatusList(){this.timelineService.getStatusList().subscribe(t=>{this.statusList=t})}getNRICNumber(){this.timelineService.getAllNRICNumber(sessionStorage.client).subscribe(t=>{this.nricNumberData=t,this.nricNumberList=this.nric_number.valueChanges.pipe((0,s.O)(""),(0,a.U)(t=>"string"==typeof t?t:t.nric_number),(0,a.U)(t=>t?this._filterNricNumber(t):this.nricNumberData.slice()))})}getPassportNumber(){this.timelineService.getAllPassportNumber(sessionStorage.client).subscribe(t=>{this.passportNumberData=t,this.passportNumberList=this.passport_number.valueChanges.pipe((0,s.O)(""),(0,a.U)(t=>"string"==typeof t?t:t.passport_number),(0,a.U)(t=>t?this._filterPassportNumber(t):this.passportNumberData.slice()))})}selectedNricNumber(t){console.log("event.option.value.id===",t.option.value.id),t.option.value.id&&(this.passport_number.setValue(""),this.enrollment_no.setValue(""),this.tranNumberData=[],this.timelineService.getTransactionNumberList(t.option.value.id,sessionStorage.client).subscribe(t=>{console.log("re----nric-----------",t),this.tranNumberData=t,this.tranNumberList=this.enrollment_no.valueChanges.pipe((0,s.O)(""),(0,a.U)(t=>"string"==typeof t?t:t.enrollment_no),(0,a.U)(t=>t?this._filterTranNumber(t):this.tranNumberData.slice()))}))}selectedPassportNumber(t){console.log("event.option.value.id===",t.option.value.id),t.option.value.id&&(this.nric_number.setValue(""),this.enrollment_no.setValue(""),this.tranNumberData=[],this.timelineService.getTransactionNumberList(t.option.value.id,sessionStorage.client).subscribe(t=>{this.tranNumberData=t,this.tranNumberList=this.enrollment_no.valueChanges.pipe((0,s.O)(""),(0,a.U)(t=>"string"==typeof t?t:t.enrollment_no),(0,a.U)(t=>t?this._filterTranNumber(t):this.tranNumberData.slice()))}))}checkTimelineForStudent(t){console.log("====",this.nric_number.value),t.option.value.id&&this.timelineService.checkTimelineForStudent(this.nric_number.value.id,t.option.value.id,sessionStorage.client).subscribe(t=>{console.log("res--===-----",t),this.statusDone=t;for(let e=0;e<this.statusList.length;e++){this.statusList[0].BColor="timeline-green",this.statusList[0].scheduled_date=this.nricNumberData?this.nricNumberData[0].cur_date:this.passportNumberData[0].cur_date;for(let t=0;t<this.statusDone.length;t++)this.statusList[e].id==this.statusDone[t].status_id&&(this.statusList[e].BColor="timeline-green",this.statusList[e].scheduled_date=this.statusDone[t].scheduled_date,this.statusList[e].completed_date=this.statusDone[t].completed_date)}console.log("this.statusList====",this.statusList)})}displayFnNRICNUmber(t){return t&&t.nric_number?t.nric_number:""}displayFnPassportNumber(t){return t&&t.passport_number?t.passport_number:""}displayFnTransactionNumber(t){return console.log("user===",t),t&&t.enrollment_no?t.enrollment_no:""}_filterNricNumber(t){const e=t.toLowerCase();return this.nricNumberData.filter(t=>t.nric_number.toLowerCase().includes(e))}_filterPassportNumber(t){const e=t.toLowerCase();return this.passportNumberData.filter(t=>t.passport_number.toLowerCase().includes(e))}_filterTranNumber(t){const e=t.toLowerCase();return this.tranNumberData.filter(t=>t.enrollment_no.toLowerCase().includes(e))}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(l.sBO),l.Y36(r.qu),l.Y36(c.T),l.Y36(u._W),l.Y36(g),l.Y36(o.F0),l.Y36(o.gz))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-timeline"]],decls:48,vars:34,consts:[[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"card"],[1,"m-4"],[1,"col-xl-4","col-lg-4","col-md-12","col-sm-12","mb-2"],["appearance","outline",1,"example-full-width","mb-3"],["type","text","matInput","",3,"formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["autoNric","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["autoPassport","matAutocomplete"],["autoTran","matAutocomplete"],["class","body",4,"ngIf"],[3,"value"],[4,"ngIf"],[1,"body"],[1,"container"],[1,"col-md-10"],[1,"left-timeline"],["datetime","2017-11-04T18:30",1,"left-time"],["class","hidden",4,"ngIf"],[1,"left-icon",3,"ngClass"],[2,"line-height","1.7 !important","color","white"],[3,"ngClass",4,"ngIf"],[1,"left-label","empty",3,"ngClass"],[3,"ngClass"],[1,"hidden"]],template:function(t,e){if(1&t&&(l.TgZ(0,"section",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"div",4),l.TgZ(5,"ul",5),l.TgZ(6,"li",6),l.TgZ(7,"h4",7),l._uU(8),l.ALo(9,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(10,"div",4),l.TgZ(11,"div",8),l.TgZ(12,"form",9),l.TgZ(13,"div",3),l.TgZ(14,"div",10),l.TgZ(15,"mat-form-field",11),l.TgZ(16,"mat-label"),l._uU(17),l.ALo(18,"translate"),l.qZA(),l._UZ(19,"input",12),l.TgZ(20,"mat-autocomplete",13,14),l.NdJ("optionSelected",function(t){return e.selectedNricNumber(t)}),l.YNc(22,_,2,2,"mat-option",15),l.ALo(23,"async"),l.qZA(),l.YNc(24,A,2,1,"mat-error",16),l.qZA(),l.qZA(),l.TgZ(25,"div",10),l.TgZ(26,"mat-form-field",11),l.TgZ(27,"mat-label"),l._uU(28),l.ALo(29,"translate"),l.qZA(),l._UZ(30,"input",12),l.TgZ(31,"mat-autocomplete",13,17),l.NdJ("optionSelected",function(t){return e.selectedPassportNumber(t)}),l.YNc(33,T,2,2,"mat-option",15),l.ALo(34,"async"),l.qZA(),l.YNc(35,C,2,1,"mat-error",16),l.qZA(),l.qZA(),l.TgZ(36,"div",10),l.TgZ(37,"mat-form-field",11),l.TgZ(38,"mat-label"),l._uU(39),l.ALo(40,"translate"),l.qZA(),l._UZ(41,"input",12),l.TgZ(42,"mat-autocomplete",13,18),l.NdJ("optionSelected",function(t){return e.checkTimelineForStudent(t)}),l.YNc(44,q,2,2,"mat-option",15),l.ALo(45,"async"),l.qZA(),l.YNc(46,O,2,1,"mat-error",16),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(47,w,6,1,"div",19),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t){const t=l.MAs(21),i=l.MAs(32),n=l.MAs(43);l.xp6(8),l.Oqu(l.lcZ(9,20,"TIMELINE.TITLE")),l.xp6(9),l.Oqu(l.lcZ(18,22,"TIMELINE.LIST.NRIC-NUMBER")),l.xp6(2),l.Q6J("formControl",e.nric_number)("matAutocomplete",t),l.xp6(1),l.Q6J("displayWith",e.displayFnNRICNUmber),l.xp6(2),l.Q6J("ngForOf",l.lcZ(23,24,e.nricNumberList)),l.xp6(2),l.Q6J("ngForOf",e.validation_msgs.nric_number),l.xp6(4),l.Oqu(l.lcZ(29,26,"TIMELINE.LIST.PASSPORT-NUMBER")),l.xp6(2),l.Q6J("formControl",e.passport_number)("matAutocomplete",i),l.xp6(1),l.Q6J("displayWith",e.displayFnPassportNumber),l.xp6(2),l.Q6J("ngForOf",l.lcZ(34,28,e.passportNumberList)),l.xp6(2),l.Q6J("ngForOf",e.validation_msgs.passport_number),l.xp6(4),l.Oqu(l.lcZ(40,30,"TIMELINE.LIST.TRANSACTION-NUMBER")),l.xp6(2),l.Q6J("formControl",e.enrollment_no)("matAutocomplete",n),l.xp6(1),l.Q6J("displayWith",e.displayFnTransactionNumber),l.xp6(2),l.Q6J("ngForOf",l.lcZ(45,32,e.tranNumberList)),l.xp6(2),l.Q6J("ngForOf",e.validation_msgs.enrollment_no),l.xp6(1),l.Q6J("ngIf",e.statusDone)}},directives:[r._Y,r.JL,r.F,d.KE,d.hX,b.Nt,r.Fj,h.ZL,r.JJ,r.oH,h.XC,n.sg,n.O5,f.ey,d.TO,n.mk,N.Hw],pipes:[Z.X$,n.Ov,n.uU],styles:['.timeline-green[_ngcontent-%COMP%]{background-color:green}.timeline-orange[_ngcontent-%COMP%]{background-color:#efd893fc}.progline-green[_ngcontent-%COMP%]{background:green}.progline-green[_ngcontent-%COMP%], .progline-orange[_ngcontent-%COMP%]{content:"";position:absolute;top:40px;bottom:0;width:3px;left:20%;margin-left:-6px;height:70px}.progline-orange[_ngcontent-%COMP%]{background:#efd893fc}.bck-color[_ngcontent-%COMP%]{background:#caf9be!important}.bck-right-color[_ngcontent-%COMP%]{border-right-color:#caf9be!important;border:10px solid transparent}.bck-orange-color[_ngcontent-%COMP%], .bck-right-color[_ngcontent-%COMP%]{right:100%;content:" ";height:0;width:0;position:absolute;pointer-events:none;top:10px}.bck-orange-color[_ngcontent-%COMP%]{border-right-color:#eee!important;border:10px solid transparent}']}),t})()}];let Y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[o.Bz.forChild(J)],o.Bz]}),t})();var k=i(63589),P=i(13841),Q=i(1325),F=i(84369),M=i(97070),D=i(40994),R=i(57173);let $=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[n.ez,Y,M.Tx,F.ot,N.Ps,Q.Ad,r.u5,r.UX,P.LD,k.ZX,b.c,d.lN,D.p9,R.Nh,h.Bb,Z.aw]]}),t})()}}]);