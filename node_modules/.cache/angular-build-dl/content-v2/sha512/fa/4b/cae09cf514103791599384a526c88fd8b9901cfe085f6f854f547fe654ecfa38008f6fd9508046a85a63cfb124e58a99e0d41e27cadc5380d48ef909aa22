(self.webpackChunksmart=self.webpackChunksmart||[]).push([[2538],{2538:function(e,i,t){"use strict";t.r(i),t.d(i,{LicenseModule:function(){return ie}});var a=t(61116),r=t(31041),l=t(39199),s=t(5609),n=t(13070),o=t(9550),c=t(63589),d=t(84369),Z=t(77307),g=t(13841),u=t(92935),m=t(59241),h=t(37112),p=t(69024),T=t(40994),A=t(1325),L=t(57173),q=t(97070),_=t(87672),f=t(44716),E=t(51601),I=t(35729),v=t(17647),S=t(35366),b=t(42693),N=t(97425),C=t(91681),x=t(529);let w=(()=>{class e{constructor(e){this.http=e,this.isTblLoading=!0,this.dataChange=new N.X([])}get data(){return this.dataChange.value}setLicenseDetails(e){return this.http.post(`${x.N.apiUrl}/webRoutes/setLicenseDetails`,e).pipe((0,C.U)(e=>e))}getLicenseListPerClient(){return this.http.get(`${x.N.apiUrl}/webRoutes/getLicenseListPerClient`).pipe((0,C.U)(e=>(this.isTblLoading=!1,this.dataChange.next(e),e)))}deleteLicenseDetails(e){return this.http.post(`${x.N.apiUrl}/webRoutes/deleteLicenseDetails`,{rowToDelete:e}).pipe((0,C.U)(e=>e))}getLicenseToEdit(e){return this.http.post(`${x.N.apiUrl}/webRoutes/getLicenseToEdit`,{licenseId:e}).pipe((0,C.U)(e=>e))}updateLicenseDetails(e){return this.http.post(`${x.N.apiUrl}/webRoutes/updateLicenseDetails`,e).pipe((0,C.U)(e=>e))}getClientCodeForFolder(e){return this.http.get(`${x.N.apiUrl}/webRoutes/getClientCodeForFolder`).pipe((0,C.U)(e=>e))}}return e.\u0275fac=function(i){return new(i||e)(S.LFG(b.eN))},e.\u0275prov=S.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var U=t(24486),F=t(50518),k=t(31269),y=t(94784),D=t(60649);function J(e,i){if(1&e){const e=S.EpF();S.TgZ(0,"span"),S.TgZ(1,"button",37),S.NdJ("click",function(){const i=S.CHM(e),t=i.row,a=i.rowIndex;return S.oxw().editLicense(t,a)}),S.TgZ(2,"mat-icon",38),S._uU(3,"edit "),S.qZA(),S.qZA(),S.TgZ(4,"button",39),S.NdJ("click",function(){const i=S.CHM(e),t=i.row,a=i.rowIndex,r=S.oxw(),l=S.MAs(59);return r.deleteLicense(t,a,l)}),S.TgZ(5,"mat-icon",40),S._uU(6,"delete "),S.qZA(),S.qZA(),S.qZA()}}function O(e,i){if(1&e){const e=S.EpF();S.TgZ(0,"div",41),S.TgZ(1,"h4",42),S.TgZ(2,"div",43),S.TgZ(3,"div",44),S.TgZ(4,"div",45),S._uU(5),S.ALo(6,"translate"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(7,"button",46),S.NdJ("click",function(){return S.CHM(e).$implicit.dismiss("Cross click")}),S.TgZ(8,"span",47),S.TgZ(9,"i",48),S._uU(10,"close"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(11,"div",49),S.TgZ(12,"p"),S._uU(13),S.ALo(14,"translate"),S.qZA(),S.TgZ(15,"div",50),S.TgZ(16,"div",51),S.TgZ(17,"button",52),S.NdJ("click",function(){return S.CHM(e),S.oxw().deleteLicensDetails()}),S._uU(18),S.ALo(19,"translate"),S.qZA(),S.TgZ(20,"button",53),S.NdJ("click",function(){return S.CHM(e).$implicit.close()}),S._uU(21),S.ALo(22,"translate"),S.qZA(),S.qZA(),S.qZA(),S.qZA()}2&e&&(S.xp6(5),S.hij(" ",S.lcZ(6,4,"LICENSE.DELETETITLE"),""),S.xp6(8),S.Oqu(S.lcZ(14,6,"BUTTON.CONFIRMATION")),S.xp6(5),S.Oqu(S.lcZ(19,8,"BUTTON.DEL-BTN")),S.xp6(3),S.Oqu(S.lcZ(22,10,"BUTTON.CANCEL-BTN")))}let Y=(()=>{class e{constructor(e,i,t,a,r,l,s,n,o){this.httpClient=e,this.dialog=i,this.licenseService=t,this.snackBar=a,this.router=r,this.modalService=l,this.toastrService=s,this.spinner=n,this.languageService=o,this.columns=[{name:"License Class"},{name:"Minimum Age"},{name:"License Description"},{name:"Actions"}],this.data=[],this.filteredData=[],this.translateVal="ml"==localStorage.lang?"malay":"english"}ngOnInit(){this.loadData(),this.languageService.languageChanged.subscribe(e=>{this.translateVal="ml"==localStorage.lang?"malay":"english",this.loadData()})}refresh(){this.loadData()}addNewLicense(){this.router.navigate(["/admin/license/add-license"])}loadData(){this.spinner.show(),this.licenseService.getLicenseListPerClient().subscribe(e=>{this.spinner.hide();for(let i=0;i<e.data.length;i++)e.data[i].license_desc=e.data[i]["license_desc_"+this.translateVal];this.data=e.data,this.filteredData=e.data})}filterDatatable(e){const i=e.target.value.toLowerCase(),t=this.columns.length,a=Object.keys(this.filteredData[0]);this.data=this.filteredData.filter(function(e){for(let r=0;r<t;r++)if(-1!==e[a[r]].toString().toLowerCase().indexOf(i)||!i)return!0}),this.table.offset=0}editLicense(e,i){console.log("rowww===",e),this.router.navigate(["/admin/license/edit-license",e.id])}deleteLicense(e,i,t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}),this.rowToDelete=e}deleteLicensDetails(){this.licenseService.deleteLicenseDetails(this.rowToDelete).subscribe(e=>{"Success"==e.status&&(this.toastrService.success("Deleted Successfully!!!"),this.modalService.dismissAll(),this.loadData()),"Session Expired"==e.status&&(this.toastrService.error("Session Expired!!!"),this.router.navigate(["/authentication/signin"]))})}}return e.\u0275fac=function(i){return new(i||e)(S.Y36(b.eN),S.Y36(u.uw),S.Y36(w),S.Y36(c.ux),S.Y36(I.F0),S.Y36(U.FF),S.Y36(F._W),S.Y36(k.t2),S.Y36(y.T))},e.\u0275cmp=S.Xpm({type:e,selectors:[["app-license-list"]],viewQuery:function(e,i){if(1&e&&S.Gf(v.nE,5),2&e){let e;S.iGM(e=S.CRH())&&(i.table=e.first)}},decls:60,vars:30,consts:[["bdColor","rgba(51,51,51,0.8)","size","medium","color","#fff","type","ball-scale-multiple"],[2,"font-size","20px","color","white"],[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"col-md-12"],[1,"mt-5"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"body"],[1,"table-responsive"],[1,"materialTableHeader"],[1,"col-8"],[1,"header-buttons-left","ml-0"],[1,"dropdown"],[1,"dropdown","m-l-20"],["for","search-input"],[1,"material-icons","search-icon"],["placeholder","Search","type","text","aria-label","Search box",1,"browser-default","search-field",3,"keyup"],[1,"col-4"],[1,"header-buttons"],[1,"icon-button-demo"],["mat-mini-fab","","color","primary",3,"click"],[1,"col-white"],[1,"material",3,"rows","columns","sortType","columnMode","headerHeight","footerHeight","rowHeight","limit"],["table",""],["prop","license_class",3,"name","width"],["prop","minimum_age",3,"name","width"],["prop","license_desc",3,"name","width"],["sortable","false",3,"name","width"],["ngx-datatable-cell-template",""],["deleteRecord",""],["mat-icon-button","","color","accent",1,"btn-tbl-edit",3,"click"],["aria-label","Edit",1,"col-white"],["mat-icon-button","","color","accent",1,"btn-tbl-delete",3,"click"],["aria-label","Delete",1,"col-white"],[1,"modal-header","deleteRowModal"],["id","modal-basic-title",1,"modal-title"],[1,"modal-header"],[1,"modal-about"],[1,"font-weight-bold","p-t-10","font-17"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"material-icons"],[1,"modal-body"],[1,"modal-footer"],[1,"button-demo"],["mat-raised-button","","type","submit","color","primary",3,"click"],["mat-button","","type","button",3,"click"]],template:function(e,i){1&e&&(S.TgZ(0,"ngx-spinner",0),S.TgZ(1,"p",1),S._uU(2,"Loading..."),S.qZA(),S.qZA(),S.TgZ(3,"section",2),S.TgZ(4,"div",3),S.TgZ(5,"div",4),S.TgZ(6,"div",5),S.TgZ(7,"div",6),S.TgZ(8,"ul",7),S.TgZ(9,"li",8),S.TgZ(10,"h4",9),S._uU(11),S.ALo(12,"translate"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(13,"div",5),S.TgZ(14,"div",10),S.TgZ(15,"div",11),S.TgZ(16,"div",12),S.TgZ(17,"div",13),S.TgZ(18,"div",14),S.TgZ(19,"div",15),S.TgZ(20,"div",16),S.TgZ(21,"div",5),S.TgZ(22,"div",17),S.TgZ(23,"ul",18),S.TgZ(24,"li",19),S.TgZ(25,"h2"),S.TgZ(26,"strong"),S._uU(27),S.ALo(28,"translate"),S.qZA(),S.qZA(),S.qZA(),S.TgZ(29,"li",20),S.TgZ(30,"label",21),S.TgZ(31,"i",22),S._uU(32,"search"),S.qZA(),S.qZA(),S.TgZ(33,"input",23),S.NdJ("keyup",function(e){return i.filterDatatable(e)}),S.qZA(),S.qZA(),S._UZ(34,"li"),S.qZA(),S.qZA(),S.TgZ(35,"div",24),S.TgZ(36,"ul",25),S.TgZ(37,"li"),S.TgZ(38,"div",26),S.TgZ(39,"button",27),S.NdJ("click",function(){return i.addNewLicense()}),S.TgZ(40,"mat-icon",28),S._uU(41,"add"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(42,"li"),S.TgZ(43,"div",26),S.TgZ(44,"button",27),S.NdJ("click",function(){return i.refresh()}),S.TgZ(45,"mat-icon",28),S._uU(46,"refresh "),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(47,"ngx-datatable",29,30),S._UZ(49,"ngx-datatable-column",31),S.ALo(50,"translate"),S._UZ(51,"ngx-datatable-column",32),S.ALo(52,"translate"),S._UZ(53,"ngx-datatable-column",33),S.ALo(54,"translate"),S.TgZ(55,"ngx-datatable-column",34),S.ALo(56,"translate"),S.YNc(57,J,7,0,"ng-template",35),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.YNc(58,O,23,12,"ng-template",null,36,S.W1O)),2&e&&(S.xp6(11),S.Oqu(S.lcZ(12,18,"LICENSE.LISTTITLE")),S.xp6(16),S.Oqu(S.lcZ(28,20,"LICENSE.LISTTITLE")),S.xp6(20),S.Q6J("rows",i.data)("columns",i.columns)("sortType","multi")("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","60")("limit",10),S.xp6(2),S.s9C("name",S.lcZ(50,22,"LICENSE.LIST.LICENSE-CLASS")),S.Q6J("width",130),S.xp6(2),S.s9C("name",S.lcZ(52,24,"LICENSE.LIST.MIN-AGE")),S.Q6J("width",130),S.xp6(2),S.s9C("name",S.lcZ(54,26,"LICENSE.LIST.LICENSE-DESC")),S.Q6J("width",130),S.xp6(2),S.s9C("name",S.lcZ(56,28,"LICENSE.ACTIONS")),S.Q6J("width",120))},directives:[k.Ro,d.lW,Z.Hw,v.nE,v.UC,v.vq],pipes:[D.X$],styles:[""]}),e})();var R=t(22567),Q=t(46739);function M(e,i){1&e&&(S.TgZ(0,"mat-error"),S._uU(1),S.ALo(2,"translate"),S.qZA()),2&e&&(S.xp6(1),S.hij(" ",S.lcZ(2,1,"LICENSE.LIST.LICENSE-CLASS")," is required "))}function B(e,i){1&e&&(S.TgZ(0,"mat-error"),S._uU(1),S.ALo(2,"translate"),S.qZA()),2&e&&(S.xp6(1),S.hij(" ",S.lcZ(2,1,"LICENSE.LIST.LICENSE-ENGLISH")," is required "))}function H(e,i){1&e&&(S.TgZ(0,"mat-error"),S._uU(1),S.ALo(2,"translate"),S.qZA()),2&e&&(S.xp6(1),S.hij(" ",S.lcZ(2,1,"LICENSE.LIST.LICENSE-MALAY")," is required "))}function j(e,i){1&e&&(S.TgZ(0,"mat-error"),S._uU(1),S.ALo(2,"translate"),S.qZA()),2&e&&(S.xp6(1),S.hij(" ",S.lcZ(2,1,"LICENSE.LIST.CRITERIA-ENGLISH")," is required "))}function G(e,i){1&e&&(S.TgZ(0,"mat-error"),S._uU(1),S.ALo(2,"translate"),S.qZA()),2&e&&(S.xp6(1),S.hij(" ",S.lcZ(2,1,"LICENSE.LIST.CRITERIA-MALAY")," is required "))}function P(e,i){1&e&&(S.TgZ(0,"mat-error"),S._uU(1),S.ALo(2,"translate"),S.qZA()),2&e&&(S.xp6(1),S.hij(" ",S.lcZ(2,1,"LICENSE.LIST.LICENSE-CLASS")," is required "))}function z(e,i){1&e&&(S.TgZ(0,"mat-error"),S._uU(1),S.ALo(2,"translate"),S.qZA()),2&e&&(S.xp6(1),S.hij(" ",S.lcZ(2,1,"LICENSE.LIST.LICENSE-ENGLISH")," is required "))}function X(e,i){1&e&&(S.TgZ(0,"mat-error"),S._uU(1),S.ALo(2,"translate"),S.qZA()),2&e&&(S.xp6(1),S.hij(" ",S.lcZ(2,1,"LICENSE.LIST.LICENSE-MALAY")," is required "))}function $(e,i){1&e&&(S.TgZ(0,"mat-error"),S._uU(1),S.ALo(2,"translate"),S.qZA()),2&e&&(S.xp6(1),S.hij(" ",S.lcZ(2,1,"LICENSE.LIST.CRITERIA-ENGLISH")," is required "))}function V(e,i){1&e&&(S.TgZ(0,"mat-error"),S._uU(1),S.ALo(2,"translate"),S.qZA()),2&e&&(S.xp6(1),S.hij(" ",S.lcZ(2,1,"LICENSE.LIST.CRITERIA-MALAY")," is required "))}const W=[{path:"license-list",component:Y},{path:"add-license",component:(()=>{class e{constructor(e,i,t,a,r,l,s,n){this.cdRef=e,this.fb=i,this.languageService=t,this.toastrService=a,this.licenseService=r,this.router=l,this.route=s,this.spinner=n,this.disableSubmit=!1,this.Editor=R}ngOnInit(){this.addLicenseForm=this.fb.group({license_class:["",r.kI.required],minimum_age:[""],license_desc_english:["",r.kI.required],license_desc_malay:["",r.kI.required],criteria_english:["",r.kI.required],criteria_malay:["",r.kI.required],license_flow:["",r.kI.required],license_flow_name:["",r.kI.required],license_image:["",r.kI.required],license_image_name:["",r.kI.required],cdl_req:[""],gdlPractical:[!1],psvPractical:[!1]})}onFileChangeLicenseFlow(e){const i=new FileReader;if(e.target.files&&e.target.files.length){const[t]=e.target.files;i.readAsDataURL(t),i.onload=()=>{this.addLicenseForm.patchValue({license_flow:t}),console.log("this.documentForm===",this.addLicenseForm)}}}onFileChangeLicenseImage(e){const i=new FileReader;if(e.target.files&&e.target.files.length){const[t]=e.target.files;i.readAsDataURL(t),i.onload=()=>{this.addLicenseForm.patchValue({license_image:t}),console.log("this.documentForm===",this.addLicenseForm)}}}setLicenseDetails(){this.disableSubmit=!0,this.spinner.show(),console.log("Editor===",this.addLicenseForm.value);const e=new FormData;e.append("baseRoot","root/License/"+this.addLicenseForm.value.license_class),e.append("licenseData",JSON.stringify(this.addLicenseForm.value)),e.append("licenseImage",this.addLicenseForm.value.license_image),e.append("licenseFlow",this.addLicenseForm.value.license_flow),this.licenseService.setLicenseDetails(e).subscribe(e=>{this.spinner.hide(),this.disableSubmit=!1,"Success"==e.status?(this.toastrService.success("Registered Successfully!!"),this.addLicenseForm.reset(),this.router.navigate(["/admin/license/license-list"])):"Session Expired"==e.status?(this.toastrService.error("Session Expired!!!"),this.router.navigate(["/authentication/signin"])):this.toastrService.error(e.status)})}goBack(){this.router.navigate(["/admin/license/license-list"])}}return e.\u0275fac=function(i){return new(i||e)(S.Y36(S.sBO),S.Y36(r.qu),S.Y36(y.T),S.Y36(F._W),S.Y36(w),S.Y36(I.F0),S.Y36(I.gz),S.Y36(k.t2))},e.\u0275cmp=S.Xpm({type:e,selectors:[["app-add-license"]],decls:100,vars:50,consts:[["bdColor","rgba(51,51,51,0.8)","size","medium","color","#fff","type","ball-scale-multiple"],[2,"font-size","20px","color","white"],[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"row","clearfix"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"header"],[1,"body"],[1,"m-4",3,"formGroup"],[1,"col-xl-4","col-lg-4","col-md-12","col-sm-12","mb-2"],["appearance","outline",1,"example-full-width","mb-3"],["matInput","","formControlName","license_class","required",""],[4,"ngIf"],["matInput","","formControlName","minimum_age","maxlength","2"],["formControlName","cdl_req",1,"example-margin"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2"],["formControlName","license_desc_english",3,"editor"],["formControlName","license_desc_malay",3,"editor"],["formControlName","criteria_english",3,"editor"],["formControlName","criteria_malay",3,"editor"],["formControlName","license_image_name","required","",3,"change"],["matSuffix",""],["formControlName","license_flow_name","required","",3,"change"],["formControlName","gdlPractical",1,"example-margin"],["formControlName","psvPractical",1,"example-margin"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],["mat-raised-button","","color","primary",1,"btn-space",3,"disabled","click"],["type","button","mat-button","",3,"click"]],template:function(e,i){1&e&&(S.TgZ(0,"ngx-spinner",0),S.TgZ(1,"p",1),S._uU(2,"Loading..."),S.qZA(),S.qZA(),S.TgZ(3,"section",2),S.TgZ(4,"div",3),S.TgZ(5,"div",4),S.TgZ(6,"div",5),S.TgZ(7,"div",6),S.TgZ(8,"ul",7),S.TgZ(9,"li",8),S.TgZ(10,"h4",9),S._uU(11),S.ALo(12,"translate"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(13,"div",10),S.TgZ(14,"div",11),S.TgZ(15,"div",12),S.TgZ(16,"div",13),S.TgZ(17,"h2"),S._uU(18),S.ALo(19,"translate"),S.qZA(),S.qZA(),S.TgZ(20,"div",14),S.TgZ(21,"form",15),S.TgZ(22,"div",5),S.TgZ(23,"div",16),S.TgZ(24,"mat-form-field",17),S.TgZ(25,"mat-label"),S._uU(26),S.ALo(27,"translate"),S.qZA(),S._UZ(28,"input",18),S.YNc(29,M,3,3,"mat-error",19),S.qZA(),S.qZA(),S.TgZ(30,"div",16),S.TgZ(31,"mat-form-field",17),S.TgZ(32,"mat-label"),S._uU(33),S.ALo(34,"translate"),S.qZA(),S._UZ(35,"input",20),S.qZA(),S.qZA(),S.TgZ(36,"div",16),S.TgZ(37,"mat-checkbox",21),S._uU(38),S.ALo(39,"translate"),S.qZA(),S.qZA(),S.qZA(),S.TgZ(40,"div",5),S.TgZ(41,"div",22),S.TgZ(42,"mat-label"),S._uU(43),S.ALo(44,"translate"),S.qZA(),S._UZ(45,"ckeditor",23),S.YNc(46,B,3,3,"mat-error",19),S.qZA(),S.TgZ(47,"div",22),S.TgZ(48,"mat-label"),S._uU(49),S.ALo(50,"translate"),S.qZA(),S._UZ(51,"ckeditor",24),S.YNc(52,H,3,3,"mat-error",19),S.qZA(),S.qZA(),S.TgZ(53,"div",5),S.TgZ(54,"div",22),S.TgZ(55,"mat-label"),S._uU(56),S.ALo(57,"translate"),S.qZA(),S._UZ(58,"ckeditor",25),S.YNc(59,j,3,3,"mat-error",19),S.qZA(),S.TgZ(60,"div",22),S.TgZ(61,"mat-label"),S._uU(62),S.ALo(63,"translate"),S.qZA(),S._UZ(64,"ckeditor",26),S.YNc(65,G,3,3,"mat-error",19),S.qZA(),S.qZA(),S.TgZ(66,"div",5),S.TgZ(67,"div",22),S.TgZ(68,"mat-form-field",17),S.TgZ(69,"mat-label"),S._uU(70),S.ALo(71,"translate"),S.qZA(),S.TgZ(72,"ngx-mat-file-input",27),S.NdJ("change",function(e){return i.onFileChangeLicenseImage(e)}),S.qZA(),S.TgZ(73,"mat-icon",28),S._uU(74,"cloud_upload"),S.qZA(),S.qZA(),S.qZA(),S.TgZ(75,"div",22),S.TgZ(76,"mat-form-field",17),S.TgZ(77,"mat-label"),S._uU(78),S.ALo(79,"translate"),S.qZA(),S.TgZ(80,"ngx-mat-file-input",29),S.NdJ("change",function(e){return i.onFileChangeLicenseFlow(e)}),S.qZA(),S.TgZ(81,"mat-icon",28),S._uU(82,"cloud_upload"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(83,"div",5),S.TgZ(84,"div",22),S.TgZ(85,"div",5),S.TgZ(86,"div",22),S.TgZ(87,"mat-checkbox",30),S._uU(88,"GDL Practical"),S.qZA(),S.qZA(),S.TgZ(89,"div",22),S.TgZ(90,"mat-checkbox",31),S._uU(91,"PSV Practical"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(92,"div",5),S.TgZ(93,"div",32),S.TgZ(94,"button",33),S.NdJ("click",function(){return i.setLicenseDetails()}),S._uU(95),S.ALo(96,"translate"),S.qZA(),S.TgZ(97,"button",34),S.NdJ("click",function(){return i.goBack()}),S._uU(98),S.ALo(99,"translate"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA()),2&e&&(S.xp6(11),S.Oqu(S.lcZ(12,24,"LICENSE.TITLE")),S.xp6(7),S.Oqu(S.lcZ(19,26,"LICENSE.TITLE")),S.xp6(3),S.Q6J("formGroup",i.addLicenseForm),S.xp6(5),S.Oqu(S.lcZ(27,28,"LICENSE.LIST.LICENSE-CLASS")),S.xp6(3),S.Q6J("ngIf",i.addLicenseForm.get("license_class").hasError("required")),S.xp6(4),S.Oqu(S.lcZ(34,30,"LICENSE.LIST.MIN-AGE")),S.xp6(5),S.Oqu(S.lcZ(39,32,"LICENSE.LIST.CDL-REQ")),S.xp6(5),S.hij("",S.lcZ(44,34,"LICENSE.LIST.LICENSE-ENGLISH"),"*"),S.xp6(2),S.Q6J("editor",i.Editor),S.xp6(1),S.Q6J("ngIf",i.addLicenseForm.get("license_desc_english").hasError("required")),S.xp6(3),S.hij("",S.lcZ(50,36,"LICENSE.LIST.LICENSE-MALAY"),"*"),S.xp6(2),S.Q6J("editor",i.Editor),S.xp6(1),S.Q6J("ngIf",i.addLicenseForm.get("license_desc_malay").hasError("required")),S.xp6(4),S.hij("",S.lcZ(57,38,"LICENSE.LIST.CRITERIA-ENGLISH"),"*"),S.xp6(2),S.Q6J("editor",i.Editor),S.xp6(1),S.Q6J("ngIf",i.addLicenseForm.get("criteria_english").hasError("required")),S.xp6(3),S.hij("",S.lcZ(63,40,"LICENSE.LIST.CRITERIA-MALAY"),"*"),S.xp6(2),S.Q6J("editor",i.Editor),S.xp6(1),S.Q6J("ngIf",i.addLicenseForm.get("criteria_malay").hasError("required")),S.xp6(5),S.Oqu(S.lcZ(71,42,"LICENSE.LIST.LICENSE-IMAGE")),S.xp6(8),S.Oqu(S.lcZ(79,44,"LICENSE.LIST.LICENSE-FLOW")),S.xp6(16),S.Q6J("disabled",!i.addLicenseForm.valid||i.disableSubmit),S.xp6(1),S.Oqu(S.lcZ(96,46,"BUTTON.ADD-BTN")),S.xp6(3),S.Oqu(S.lcZ(99,48,"BUTTON.CANCEL-BTN")))},directives:[k.Ro,r._Y,r.JL,r.sg,n.KE,n.hX,o.Nt,r.Fj,r.JJ,r.u,r.Q7,a.O5,r.nD,T.oG,Q.u,A.Yh,Z.Hw,n.R9,d.lW,n.TO],pipes:[D.X$],styles:["[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:400px}"]}),e})()},{path:"edit-license/:id",component:(()=>{class e{constructor(e,i,t,a,l,s,n,o){this.cdRef=e,this.fb=i,this.languageService=t,this.toastrService=a,this.licenseService=l,this.router=s,this.route=n,this.spinner=o,this.Editor=R,this.apiURL=x.N.apiUrl,this.licenseId=this.route.snapshot.paramMap.get("id"),this.editLicenseForm=this.fb.group({id:[""],prev_license_class:["",r.kI.required],license_class:["",r.kI.required],minimum_age:[""],license_desc_english:["",r.kI.required],license_desc_malay:["",r.kI.required],criteria_english:["",r.kI.required],criteria_malay:["",r.kI.required],license_flow:["",r.kI.required],license_flow_name:["",r.kI.required],license_image:["",r.kI.required],license_image_name:["",r.kI.required],cdl_req:[""],gdlPractical:[!1],psvPractical:[!1]})}ngOnInit(){this.spinner.show(),this.licenseService.getLicenseToEdit(this.licenseId).subscribe(e=>{if(this.spinner.hide(),"Session Expired"==e.status)this.toastrService.error("Session Expired!!!"),this.router.navigate(["/authentication/signin"]);else if(e.data.length>0){let i=e.data[0];this.editLicenseForm.patchValue({id:i.id,prev_license_class:i.license_class,license_class:i.license_class,cdl_req:1==i.cdl_requirement,gdlPractical:1==i.gdl_practical,psvPractical:1==i.psv_practical,minimum_age:i.minimum_age,license_desc_english:i.license_desc_english,license_desc_malay:i.license_desc_malay,criteria_english:i.criteria_english,criteria_malay:i.criteria_malay,license_flow:i.license_flow,license_flow_name:i.license_flow,license_image:i.license_image,license_image_name:i.license_image})}else this.toastrService.error("No Data Found!!!")})}onFileChangeLicenseFlow(e){const i=new FileReader;if(e.target.files&&e.target.files.length){const[t]=e.target.files;i.readAsDataURL(t),i.onload=()=>{this.licenseFlow_preview=i.result,this.editLicenseForm.patchValue({license_flow:t}),console.log("this.documentForm===",this.editLicenseForm)}}}onFileChangeLicenseImage(e){const i=new FileReader;if(e.target.files&&e.target.files.length){const[t]=e.target.files;i.readAsDataURL(t),i.onload=()=>{this.licenseImg_preview=i.result,this.editLicenseForm.patchValue({license_image:t}),console.log("this.documentForm===",this.editLicenseForm)}}}goBack(){this.router.navigate(["/admin/license/license-list"])}updateLicenseDetails(){console.log("Editor===",this.editLicenseForm.value),this.spinner.show();const e=new FormData;e.append("baseRoot","root/License/"+this.editLicenseForm.value.license_class),e.append("licenseData",JSON.stringify(this.editLicenseForm.value)),e.append("licenseImage",this.editLicenseForm.value.license_image),e.append("licenseFlow",this.editLicenseForm.value.license_flow),this.licenseService.updateLicenseDetails(e).subscribe(e=>{this.spinner.hide(),"Success"==e.status?(this.toastrService.success("Updated Successfully!!"),this.editLicenseForm.reset(),this.router.navigate(["/admin/license/license-list"])):"Session Expired"==e.status?(this.toastrService.error("Session Expired!!!"),this.router.navigate(["/authentication/signin"])):this.toastrService.error(e.status)})}}return e.\u0275fac=function(i){return new(i||e)(S.Y36(S.sBO),S.Y36(r.qu),S.Y36(y.T),S.Y36(F._W),S.Y36(w),S.Y36(I.F0),S.Y36(I.gz),S.Y36(k.t2))},e.\u0275cmp=S.Xpm({type:e,selectors:[["app-edit-license"]],decls:108,vars:52,consts:[["bdColor","rgba(51,51,51,0.8)","size","medium","color","#fff","type","ball-scale-multiple"],[2,"font-size","20px","color","white"],[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"row","clearfix"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"header"],[1,"body"],[1,"m-4",3,"formGroup"],[1,"col-xl-4","col-lg-4","col-md-12","col-sm-12","mb-2"],["appearance","outline",1,"example-full-width","mb-3"],["matInput","","formControlName","license_class","readonly",""],[4,"ngIf"],["matInput","","formControlName","minimum_age"],["formControlName","cdl_req",1,"example-margin"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2"],["formControlName","license_desc_english",3,"editor"],["formControlName","license_desc_malay",3,"editor"],["formControlName","criteria_english",3,"editor"],["formControlName","criteria_malay",3,"editor"],[2,"width","100%","height","50%",3,"src"],["formControlName","license_image_name","required","",3,"change"],["matSuffix",""],["formControlName","license_flow_name","required","",3,"change"],["formControlName","gdlPractical",1,"example-margin"],["formControlName","psvPractical",1,"example-margin"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],["mat-raised-button","","color","primary",1,"btn-space",3,"disabled","click"],["type","button","mat-button","",3,"click"]],template:function(e,i){1&e&&(S.TgZ(0,"ngx-spinner",0),S.TgZ(1,"p",1),S._uU(2,"Loading..."),S.qZA(),S.qZA(),S.TgZ(3,"section",2),S.TgZ(4,"div",3),S.TgZ(5,"div",4),S.TgZ(6,"div",5),S.TgZ(7,"div",6),S.TgZ(8,"ul",7),S.TgZ(9,"li",8),S.TgZ(10,"h4",9),S._uU(11),S.ALo(12,"translate"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(13,"div",10),S.TgZ(14,"div",11),S.TgZ(15,"div",12),S.TgZ(16,"div",13),S.TgZ(17,"h2"),S._uU(18),S.ALo(19,"translate"),S.qZA(),S.qZA(),S.TgZ(20,"div",14),S.TgZ(21,"form",15),S.TgZ(22,"div",5),S.TgZ(23,"div",16),S.TgZ(24,"mat-form-field",17),S.TgZ(25,"mat-label"),S._uU(26),S.ALo(27,"translate"),S.qZA(),S._UZ(28,"input",18),S.YNc(29,P,3,3,"mat-error",19),S.qZA(),S.qZA(),S.TgZ(30,"div",16),S.TgZ(31,"mat-form-field",17),S.TgZ(32,"mat-label"),S._uU(33),S.ALo(34,"translate"),S.qZA(),S._UZ(35,"input",20),S.qZA(),S.qZA(),S.TgZ(36,"div",16),S.TgZ(37,"mat-checkbox",21),S._uU(38),S.ALo(39,"translate"),S.qZA(),S.qZA(),S.qZA(),S.TgZ(40,"div",5),S.TgZ(41,"div",22),S.TgZ(42,"mat-label"),S._uU(43),S.ALo(44,"translate"),S.qZA(),S._UZ(45,"ckeditor",23),S.YNc(46,z,3,3,"mat-error",19),S.qZA(),S.TgZ(47,"div",22),S.TgZ(48,"mat-label"),S._uU(49),S.ALo(50,"translate"),S.qZA(),S._UZ(51,"ckeditor",24),S.YNc(52,X,3,3,"mat-error",19),S.qZA(),S.qZA(),S.TgZ(53,"div",5),S.TgZ(54,"div",22),S.TgZ(55,"mat-label"),S._uU(56),S.ALo(57,"translate"),S.qZA(),S._UZ(58,"ckeditor",25),S.YNc(59,$,3,3,"mat-error",19),S.qZA(),S.TgZ(60,"div",22),S.TgZ(61,"mat-label"),S._uU(62),S.ALo(63,"translate"),S.qZA(),S._UZ(64,"ckeditor",26),S.YNc(65,V,3,3,"mat-error",19),S.qZA(),S.qZA(),S.TgZ(66,"div",5),S.TgZ(67,"div",22),S.TgZ(68,"div",5),S.TgZ(69,"div",22),S._UZ(70,"img",27),S.qZA(),S.TgZ(71,"div",22),S.TgZ(72,"mat-form-field",17),S.TgZ(73,"mat-label"),S._uU(74),S.ALo(75,"translate"),S.qZA(),S.TgZ(76,"ngx-mat-file-input",28),S.NdJ("change",function(e){return i.onFileChangeLicenseImage(e)}),S.qZA(),S.TgZ(77,"mat-icon",29),S._uU(78,"cloud_upload"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(79,"div",22),S.TgZ(80,"div",5),S.TgZ(81,"div",22),S._UZ(82,"img",27),S.qZA(),S.TgZ(83,"div",22),S.TgZ(84,"mat-form-field",17),S.TgZ(85,"mat-label"),S._uU(86),S.ALo(87,"translate"),S.qZA(),S.TgZ(88,"ngx-mat-file-input",30),S.NdJ("change",function(e){return i.onFileChangeLicenseFlow(e)}),S.qZA(),S.TgZ(89,"mat-icon",29),S._uU(90,"cloud_upload"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(91,"div",5),S.TgZ(92,"div",22),S.TgZ(93,"div",5),S.TgZ(94,"div",22),S.TgZ(95,"mat-checkbox",31),S._uU(96,"GDL Practical"),S.qZA(),S.qZA(),S.TgZ(97,"div",22),S.TgZ(98,"mat-checkbox",32),S._uU(99,"PSV Practical"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.TgZ(100,"div",5),S.TgZ(101,"div",33),S.TgZ(102,"button",34),S.NdJ("click",function(){return i.updateLicenseDetails()}),S._uU(103),S.ALo(104,"translate"),S.qZA(),S.TgZ(105,"button",35),S.NdJ("click",function(){return i.goBack()}),S._uU(106),S.ALo(107,"translate"),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA(),S.qZA()),2&e&&(S.xp6(11),S.Oqu(S.lcZ(12,26,"LICENSE.EDITTITLE")),S.xp6(7),S.Oqu(S.lcZ(19,28,"LICENSE.EDITTITLE")),S.xp6(3),S.Q6J("formGroup",i.editLicenseForm),S.xp6(5),S.Oqu(S.lcZ(27,30,"LICENSE.LIST.LICENSE-CLASS")),S.xp6(3),S.Q6J("ngIf",i.editLicenseForm.get("license_class").hasError("required")),S.xp6(4),S.Oqu(S.lcZ(34,32,"LICENSE.LIST.MIN-AGE")),S.xp6(5),S.Oqu(S.lcZ(39,34,"LICENSE.LIST.CDL-REQ")),S.xp6(5),S.hij("",S.lcZ(44,36,"LICENSE.LIST.LICENSE-ENGLISH"),"*"),S.xp6(2),S.Q6J("editor",i.Editor),S.xp6(1),S.Q6J("ngIf",i.editLicenseForm.get("license_desc_english").hasError("required")),S.xp6(3),S.hij("",S.lcZ(50,38,"LICENSE.LIST.LICENSE-MALAY"),"*"),S.xp6(2),S.Q6J("editor",i.Editor),S.xp6(1),S.Q6J("ngIf",i.editLicenseForm.get("license_desc_malay").hasError("required")),S.xp6(4),S.hij("",S.lcZ(57,40,"LICENSE.LIST.CRITERIA-ENGLISH"),"*"),S.xp6(2),S.Q6J("editor",i.Editor),S.xp6(1),S.Q6J("ngIf",i.editLicenseForm.get("criteria_english").hasError("required")),S.xp6(3),S.hij("",S.lcZ(63,42,"LICENSE.LIST.CRITERIA-MALAY"),"*"),S.xp6(2),S.Q6J("editor",i.Editor),S.xp6(1),S.Q6J("ngIf",i.editLicenseForm.get("criteria_malay").hasError("required")),S.xp6(5),S.s9C("src",i.licenseImg_preview?i.licenseImg_preview:i.apiURL+"/"+i.editLicenseForm.value.license_image,S.LSH),S.xp6(4),S.Oqu(S.lcZ(75,44,"LICENSE.LIST.LICENSE-IMAGE")),S.xp6(8),S.s9C("src",i.licenseFlow_preview?i.licenseFlow_preview:i.apiURL+"/"+i.editLicenseForm.value.license_flow,S.LSH),S.xp6(4),S.Oqu(S.lcZ(87,46,"LICENSE.LIST.LICENSE-FLOW")),S.xp6(16),S.Q6J("disabled",!i.editLicenseForm.valid),S.xp6(1),S.Oqu(S.lcZ(104,48,"BUTTON.EDIT-BTN")),S.xp6(3),S.Oqu(S.lcZ(107,50,"BUTTON.CANCEL-BTN")))},directives:[k.Ro,r._Y,r.JL,r.sg,n.KE,n.hX,o.Nt,r.Fj,r.JJ,r.u,a.O5,T.oG,Q.u,A.Yh,r.Q7,Z.Hw,n.R9,d.lW,n.TO],pipes:[D.X$],styles:["[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:400px}"]}),e})()}];let K=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=S.oAB({type:e}),e.\u0275inj=S.cJS({imports:[[I.Bz.forChild(W)],I.Bz]}),e})();var ee=t(79961);let ie=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=S.oAB({type:e}),e.\u0275inj=S.cJS({providers:[w],imports:[[v.xD,Q.d,a.ez,r.u5,r.UX,l.p0,s.TU,n.lN,o.c,c.ZX,d.ot,Z.Ps,u.Is,m.JX,h.g0,g.LD,p.FA,T.p9,L.Nh,q.Tx,A.Ad,K,_.Cq,f.T5,E.yI,D.aw,ee.Bb,k.ef]]}),e})()}}]);