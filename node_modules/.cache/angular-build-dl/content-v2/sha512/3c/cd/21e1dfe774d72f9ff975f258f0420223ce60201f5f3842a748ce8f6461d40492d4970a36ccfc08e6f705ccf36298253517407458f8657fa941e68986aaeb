(self.webpackChunksmart=self.webpackChunksmart||[]).push([[2538],{2538:function(e,i,t){"use strict";t.r(i),t.d(i,{LicenseModule:function(){return ie}});var r=t(61116),a=t(31041),s=t(39199),l=t(5609),n=t(13070),o=t(9550),c=t(63589),d=t(84369),u=t(77307),Z=t(13841),g=t(92935),m=t(59241),h=t(37112),p=t(69024),T=t(40994),L=t(1325),A=t(57173),q=t(97070),_=t(87672),f=t(44716),E=t(51601),I=t(35729),S=t(17647),b=t(35366),v=t(42693),N=t(97425),C=t(91681),x=t(529);let w=(()=>{class e{constructor(e){this.http=e,this.isTblLoading=!0,this.dataChange=new N.X([])}get data(){return this.dataChange.value}setLicenseDetails(e){return this.http.post(`${x.N.apiUrl}/webRoutes/setLicenseDetails`,e).pipe((0,C.U)(e=>e))}getLicenseListPerClient(){return this.http.get(`${x.N.apiUrl}/webRoutes/getLicenseListPerClient`).pipe((0,C.U)(e=>(this.isTblLoading=!1,this.dataChange.next(e),e)))}deleteLicenseDetails(e){return this.http.post(`${x.N.apiUrl}/webRoutes/deleteLicenseDetails`,{rowToDelete:e}).pipe((0,C.U)(e=>e))}getLicenseToEdit(e){return this.http.post(`${x.N.apiUrl}/webRoutes/getLicenseToEdit`,{licenseId:e}).pipe((0,C.U)(e=>e))}updateLicenseDetails(e){return this.http.post(`${x.N.apiUrl}/webRoutes/updateLicenseDetails`,e).pipe((0,C.U)(e=>e))}getClientCodeForFolder(e){return this.http.get(`${x.N.apiUrl}/webRoutes/getClientCodeForFolder`).pipe((0,C.U)(e=>e))}}return e.\u0275fac=function(i){return new(i||e)(b.LFG(v.eN))},e.\u0275prov=b.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var U=t(24486),F=t(50518),k=t(31269),y=t(94784),D=t(60649);function J(e,i){if(1&e){const e=b.EpF();b.TgZ(0,"span"),b.TgZ(1,"button",37),b.NdJ("click",function(){const i=b.CHM(e),t=i.row,r=i.rowIndex;return b.oxw().editLicense(t,r)}),b.TgZ(2,"mat-icon",38),b._uU(3,"edit "),b.qZA(),b.qZA(),b.TgZ(4,"button",39),b.NdJ("click",function(){const i=b.CHM(e),t=i.row,r=i.rowIndex,a=b.oxw(),s=b.MAs(59);return a.deleteLicense(t,r,s)}),b.TgZ(5,"mat-icon",40),b._uU(6,"delete "),b.qZA(),b.qZA(),b.qZA()}}function O(e,i){if(1&e){const e=b.EpF();b.TgZ(0,"div",41),b.TgZ(1,"h4",42),b.TgZ(2,"div",43),b.TgZ(3,"div",44),b.TgZ(4,"div",45),b._uU(5),b.ALo(6,"translate"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(7,"button",46),b.NdJ("click",function(){return b.CHM(e).$implicit.dismiss("Cross click")}),b.TgZ(8,"span",47),b.TgZ(9,"i",48),b._uU(10,"close"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(11,"div",49),b.TgZ(12,"p"),b._uU(13),b.ALo(14,"translate"),b.qZA(),b.TgZ(15,"div",50),b.TgZ(16,"div",51),b.TgZ(17,"button",52),b.NdJ("click",function(){return b.CHM(e),b.oxw().deleteLicensDetails()}),b._uU(18),b.ALo(19,"translate"),b.qZA(),b.TgZ(20,"button",53),b.NdJ("click",function(){return b.CHM(e).$implicit.close()}),b._uU(21),b.ALo(22,"translate"),b.qZA(),b.qZA(),b.qZA(),b.qZA()}2&e&&(b.xp6(5),b.hij(" ",b.lcZ(6,4,"LICENSE.DELETETITLE"),""),b.xp6(8),b.Oqu(b.lcZ(14,6,"BUTTON.CONFIRMATION")),b.xp6(5),b.Oqu(b.lcZ(19,8,"BUTTON.DEL-BTN")),b.xp6(3),b.Oqu(b.lcZ(22,10,"BUTTON.CANCEL-BTN")))}let Y=(()=>{class e{constructor(e,i,t,r,a,s,l,n,o){this.httpClient=e,this.dialog=i,this.licenseService=t,this.snackBar=r,this.router=a,this.modalService=s,this.toastrService=l,this.spinner=n,this.languageService=o,this.columns=[{name:"License Class"},{name:"Minimum Age"},{name:"License Description"},{name:"Actions"}],this.data=[],this.filteredData=[],this.translateVal="ml"==localStorage.lang?"malay":"english"}ngOnInit(){this.loadData(),this.languageService.languageChanged.subscribe(e=>{this.translateVal="ml"==localStorage.lang?"malay":"english",this.loadData()})}refresh(){this.loadData()}addNewLicense(){this.router.navigate(["/admin/license/add-license"])}loadData(){this.spinner.show(),this.licenseService.getLicenseListPerClient().subscribe(e=>{this.spinner.hide();for(let i=0;i<e.data.length;i++)e.data[i].license_desc=e.data[i]["license_desc_"+this.translateVal];this.data=e.data,this.filteredData=e.data})}filterDatatable(e){const i=e.target.value.toLowerCase(),t=this.columns.length,r=Object.keys(this.filteredData[0]);this.data=this.filteredData.filter(function(e){for(let a=0;a<t;a++)if(-1!==e[r[a]].toString().toLowerCase().indexOf(i)||!i)return!0}),this.table.offset=0}editLicense(e,i){console.log("rowww===",e),this.router.navigate(["/admin/license/edit-license",e.id])}deleteLicense(e,i,t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}),this.rowToDelete=e}deleteLicensDetails(){this.licenseService.deleteLicenseDetails(this.rowToDelete).subscribe(e=>{"Success"==e.status&&(this.toastrService.success("Deleted Successfully!!!"),this.modalService.dismissAll(),this.loadData()),"Session Expired"==e.status&&(this.toastrService.error("Session Expired!!!"),this.router.navigate(["/authentication/signin"]))})}}return e.\u0275fac=function(i){return new(i||e)(b.Y36(v.eN),b.Y36(g.uw),b.Y36(w),b.Y36(c.ux),b.Y36(I.F0),b.Y36(U.FF),b.Y36(F._W),b.Y36(k.t2),b.Y36(y.T))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-license-list"]],viewQuery:function(e,i){if(1&e&&b.Gf(S.nE,5),2&e){let e;b.iGM(e=b.CRH())&&(i.table=e.first)}},decls:60,vars:30,consts:[["bdColor","rgba(51,51,51,0.8)","size","medium","color","#fff","type","ball-scale-multiple"],[2,"font-size","20px","color","white"],[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"col-md-12"],[1,"mt-5"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"body"],[1,"table-responsive"],[1,"materialTableHeader"],[1,"col-8"],[1,"header-buttons-left","ml-0"],[1,"dropdown"],[1,"dropdown","m-l-20"],["for","search-input"],[1,"material-icons","search-icon"],["placeholder","Search","type","text","aria-label","Search box",1,"browser-default","search-field",3,"keyup"],[1,"col-4"],[1,"header-buttons"],[1,"icon-button-demo"],["mat-mini-fab","","color","primary",3,"click"],[1,"col-white"],[1,"material",3,"rows","columns","sortType","columnMode","headerHeight","footerHeight","rowHeight","limit"],["table",""],["prop","license_class",3,"name","width"],["prop","minimum_age",3,"name","width"],["prop","license_desc",3,"name","width"],["sortable","false",3,"name","width"],["ngx-datatable-cell-template",""],["deleteRecord",""],["mat-icon-button","","color","accent",1,"btn-tbl-edit",3,"click"],["aria-label","Edit",1,"col-white"],["mat-icon-button","","color","accent",1,"btn-tbl-delete",3,"click"],["aria-label","Delete",1,"col-white"],[1,"modal-header","deleteRowModal"],["id","modal-basic-title",1,"modal-title"],[1,"modal-header"],[1,"modal-about"],[1,"font-weight-bold","p-t-10","font-17"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"material-icons"],[1,"modal-body"],[1,"modal-footer"],[1,"button-demo"],["mat-raised-button","","type","submit","color","primary",3,"click"],["mat-button","","type","button",3,"click"]],template:function(e,i){1&e&&(b.TgZ(0,"ngx-spinner",0),b.TgZ(1,"p",1),b._uU(2,"Loading..."),b.qZA(),b.qZA(),b.TgZ(3,"section",2),b.TgZ(4,"div",3),b.TgZ(5,"div",4),b.TgZ(6,"div",5),b.TgZ(7,"div",6),b.TgZ(8,"ul",7),b.TgZ(9,"li",8),b.TgZ(10,"h4",9),b._uU(11),b.ALo(12,"translate"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(13,"div",5),b.TgZ(14,"div",10),b.TgZ(15,"div",11),b.TgZ(16,"div",12),b.TgZ(17,"div",13),b.TgZ(18,"div",14),b.TgZ(19,"div",15),b.TgZ(20,"div",16),b.TgZ(21,"div",5),b.TgZ(22,"div",17),b.TgZ(23,"ul",18),b.TgZ(24,"li",19),b.TgZ(25,"h2"),b.TgZ(26,"strong"),b._uU(27),b.ALo(28,"translate"),b.qZA(),b.qZA(),b.qZA(),b.TgZ(29,"li",20),b.TgZ(30,"label",21),b.TgZ(31,"i",22),b._uU(32,"search"),b.qZA(),b.qZA(),b.TgZ(33,"input",23),b.NdJ("keyup",function(e){return i.filterDatatable(e)}),b.qZA(),b.qZA(),b._UZ(34,"li"),b.qZA(),b.qZA(),b.TgZ(35,"div",24),b.TgZ(36,"ul",25),b.TgZ(37,"li"),b.TgZ(38,"div",26),b.TgZ(39,"button",27),b.NdJ("click",function(){return i.addNewLicense()}),b.TgZ(40,"mat-icon",28),b._uU(41,"add"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(42,"li"),b.TgZ(43,"div",26),b.TgZ(44,"button",27),b.NdJ("click",function(){return i.refresh()}),b.TgZ(45,"mat-icon",28),b._uU(46,"refresh "),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(47,"ngx-datatable",29,30),b._UZ(49,"ngx-datatable-column",31),b.ALo(50,"translate"),b._UZ(51,"ngx-datatable-column",32),b.ALo(52,"translate"),b._UZ(53,"ngx-datatable-column",33),b.ALo(54,"translate"),b.TgZ(55,"ngx-datatable-column",34),b.ALo(56,"translate"),b.YNc(57,J,7,0,"ng-template",35),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.YNc(58,O,23,12,"ng-template",null,36,b.W1O)),2&e&&(b.xp6(11),b.Oqu(b.lcZ(12,18,"LICENSE.LISTTITLE")),b.xp6(16),b.Oqu(b.lcZ(28,20,"LICENSE.LISTTITLE")),b.xp6(20),b.Q6J("rows",i.data)("columns",i.columns)("sortType","multi")("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","60")("limit",10),b.xp6(2),b.s9C("name",b.lcZ(50,22,"LICENSE.LIST.LICENSE-CLASS")),b.Q6J("width",130),b.xp6(2),b.s9C("name",b.lcZ(52,24,"LICENSE.LIST.MIN-AGE")),b.Q6J("width",130),b.xp6(2),b.s9C("name",b.lcZ(54,26,"LICENSE.LIST.LICENSE-DESC")),b.Q6J("width",130),b.xp6(2),b.s9C("name",b.lcZ(56,28,"LICENSE.ACTIONS")),b.Q6J("width",120))},directives:[k.Ro,d.lW,u.Hw,S.nE,S.UC,S.vq],pipes:[D.X$],styles:[""]}),e})();var R=t(22567),Q=t(46739);function M(e,i){1&e&&(b.TgZ(0,"mat-error"),b._uU(1),b.ALo(2,"translate"),b.qZA()),2&e&&(b.xp6(1),b.hij(" ",b.lcZ(2,1,"LICENSE.LIST.LICENSE-CLASS")," is required "))}function B(e,i){1&e&&(b.TgZ(0,"mat-error"),b._uU(1),b.ALo(2,"translate"),b.qZA()),2&e&&(b.xp6(1),b.hij(" ",b.lcZ(2,1,"LICENSE.LIST.LICENSE-ENGLISH")," is required "))}function H(e,i){1&e&&(b.TgZ(0,"mat-error"),b._uU(1),b.ALo(2,"translate"),b.qZA()),2&e&&(b.xp6(1),b.hij(" ",b.lcZ(2,1,"LICENSE.LIST.LICENSE-MALAY")," is required "))}function j(e,i){1&e&&(b.TgZ(0,"mat-error"),b._uU(1),b.ALo(2,"translate"),b.qZA()),2&e&&(b.xp6(1),b.hij(" ",b.lcZ(2,1,"LICENSE.LIST.CRITERIA-ENGLISH")," is required "))}function G(e,i){1&e&&(b.TgZ(0,"mat-error"),b._uU(1),b.ALo(2,"translate"),b.qZA()),2&e&&(b.xp6(1),b.hij(" ",b.lcZ(2,1,"LICENSE.LIST.CRITERIA-MALAY")," is required "))}function z(e,i){1&e&&(b.TgZ(0,"mat-error"),b._uU(1),b.ALo(2,"translate"),b.qZA()),2&e&&(b.xp6(1),b.hij(" ",b.lcZ(2,1,"LICENSE.LIST.LICENSE-CLASS")," is required "))}function X(e,i){1&e&&(b.TgZ(0,"mat-error"),b._uU(1),b.ALo(2,"translate"),b.qZA()),2&e&&(b.xp6(1),b.hij(" ",b.lcZ(2,1,"LICENSE.LIST.LICENSE-ENGLISH")," is required "))}function $(e,i){1&e&&(b.TgZ(0,"mat-error"),b._uU(1),b.ALo(2,"translate"),b.qZA()),2&e&&(b.xp6(1),b.hij(" ",b.lcZ(2,1,"LICENSE.LIST.LICENSE-MALAY")," is required "))}function W(e,i){1&e&&(b.TgZ(0,"mat-error"),b._uU(1),b.ALo(2,"translate"),b.qZA()),2&e&&(b.xp6(1),b.hij(" ",b.lcZ(2,1,"LICENSE.LIST.CRITERIA-ENGLISH")," is required "))}function V(e,i){1&e&&(b.TgZ(0,"mat-error"),b._uU(1),b.ALo(2,"translate"),b.qZA()),2&e&&(b.xp6(1),b.hij(" ",b.lcZ(2,1,"LICENSE.LIST.CRITERIA-MALAY")," is required "))}const P=[{path:"license-list",component:Y},{path:"add-license",component:(()=>{class e{constructor(e,i,t,r,a,s,l,n){this.cdRef=e,this.fb=i,this.languageService=t,this.toastrService=r,this.licenseService=a,this.router=s,this.route=l,this.spinner=n,this.disableSubmit=!1,this.Editor=R}ngOnInit(){this.addLicenseForm=this.fb.group({license_class:["",a.kI.required],minimum_age:[""],license_desc_english:["",a.kI.required],license_desc_malay:["",a.kI.required],criteria_english:["",a.kI.required],criteria_malay:["",a.kI.required],license_flow:["",a.kI.required],license_flow_name:["",a.kI.required],license_image:["",a.kI.required],license_image_name:["",a.kI.required],cdl_req:[""]})}onFileChangeLicenseFlow(e){const i=new FileReader;if(e.target.files&&e.target.files.length){const[t]=e.target.files;i.readAsDataURL(t),i.onload=()=>{this.addLicenseForm.patchValue({license_flow:t}),console.log("this.documentForm===",this.addLicenseForm)}}}onFileChangeLicenseImage(e){const i=new FileReader;if(e.target.files&&e.target.files.length){const[t]=e.target.files;i.readAsDataURL(t),i.onload=()=>{this.addLicenseForm.patchValue({license_image:t}),console.log("this.documentForm===",this.addLicenseForm)}}}setLicenseDetails(){this.disableSubmit=!0,this.spinner.show(),console.log("Editor===",this.addLicenseForm.value);const e=new FormData;e.append("baseRoot","root/License/"+this.addLicenseForm.value.license_class),e.append("licenseData",JSON.stringify(this.addLicenseForm.value)),e.append("licenseImage",this.addLicenseForm.value.license_image),e.append("licenseFlow",this.addLicenseForm.value.license_flow),this.licenseService.setLicenseDetails(e).subscribe(e=>{this.spinner.hide(),this.disableSubmit=!1,"Success"==e.status?(this.toastrService.success("Registered Successfully!!"),this.addLicenseForm.reset(),this.router.navigate(["/admin/license/license-list"])):"Session Expired"==e.status?(this.toastrService.error("Session Expired!!!"),this.router.navigate(["/authentication/signin"])):this.toastrService.error(e.status)})}goBack(){this.router.navigate(["/admin/license/license-list"])}}return e.\u0275fac=function(i){return new(i||e)(b.Y36(b.sBO),b.Y36(a.qu),b.Y36(y.T),b.Y36(F._W),b.Y36(w),b.Y36(I.F0),b.Y36(I.gz),b.Y36(k.t2))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-add-license"]],decls:91,vars:50,consts:[["bdColor","rgba(51,51,51,0.8)","size","medium","color","#fff","type","ball-scale-multiple"],[2,"font-size","20px","color","white"],[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"row","clearfix"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"header"],[1,"body"],[1,"m-4",3,"formGroup"],[1,"col-xl-4","col-lg-4","col-md-12","col-sm-12","mb-2"],["appearance","outline",1,"example-full-width","mb-3"],["matInput","","formControlName","license_class","required",""],[4,"ngIf"],["matInput","","formControlName","minimum_age","maxlength","2"],["formControlName","cdl_req",1,"example-margin"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2"],["formControlName","license_desc_english",3,"editor"],["formControlName","license_desc_malay",3,"editor"],["formControlName","criteria_english",3,"editor"],["formControlName","criteria_malay",3,"editor"],["formControlName","license_image_name","required","",3,"change"],["matSuffix",""],["formControlName","license_flow_name","required","",3,"change"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],["mat-raised-button","","color","primary",1,"btn-space",3,"disabled","click"],["type","button","mat-button","",3,"click"]],template:function(e,i){1&e&&(b.TgZ(0,"ngx-spinner",0),b.TgZ(1,"p",1),b._uU(2,"Loading..."),b.qZA(),b.qZA(),b.TgZ(3,"section",2),b.TgZ(4,"div",3),b.TgZ(5,"div",4),b.TgZ(6,"div",5),b.TgZ(7,"div",6),b.TgZ(8,"ul",7),b.TgZ(9,"li",8),b.TgZ(10,"h4",9),b._uU(11),b.ALo(12,"translate"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(13,"div",10),b.TgZ(14,"div",11),b.TgZ(15,"div",12),b.TgZ(16,"div",13),b.TgZ(17,"h2"),b._uU(18),b.ALo(19,"translate"),b.qZA(),b.qZA(),b.TgZ(20,"div",14),b.TgZ(21,"form",15),b.TgZ(22,"div",5),b.TgZ(23,"div",16),b.TgZ(24,"mat-form-field",17),b.TgZ(25,"mat-label"),b._uU(26),b.ALo(27,"translate"),b.qZA(),b._UZ(28,"input",18),b.YNc(29,M,3,3,"mat-error",19),b.qZA(),b.qZA(),b.TgZ(30,"div",16),b.TgZ(31,"mat-form-field",17),b.TgZ(32,"mat-label"),b._uU(33),b.ALo(34,"translate"),b.qZA(),b._UZ(35,"input",20),b.qZA(),b.qZA(),b.TgZ(36,"div",16),b.TgZ(37,"mat-checkbox",21),b._uU(38),b.ALo(39,"translate"),b.qZA(),b.qZA(),b.qZA(),b.TgZ(40,"div",5),b.TgZ(41,"div",22),b.TgZ(42,"mat-label"),b._uU(43),b.ALo(44,"translate"),b.qZA(),b._UZ(45,"ckeditor",23),b.YNc(46,B,3,3,"mat-error",19),b.qZA(),b.TgZ(47,"div",22),b.TgZ(48,"mat-label"),b._uU(49),b.ALo(50,"translate"),b.qZA(),b._UZ(51,"ckeditor",24),b.YNc(52,H,3,3,"mat-error",19),b.qZA(),b.qZA(),b.TgZ(53,"div",5),b.TgZ(54,"div",22),b.TgZ(55,"mat-label"),b._uU(56),b.ALo(57,"translate"),b.qZA(),b._UZ(58,"ckeditor",25),b.YNc(59,j,3,3,"mat-error",19),b.qZA(),b.TgZ(60,"div",22),b.TgZ(61,"mat-label"),b._uU(62),b.ALo(63,"translate"),b.qZA(),b._UZ(64,"ckeditor",26),b.YNc(65,G,3,3,"mat-error",19),b.qZA(),b.qZA(),b.TgZ(66,"div",5),b.TgZ(67,"div",22),b.TgZ(68,"mat-form-field",17),b.TgZ(69,"mat-label"),b._uU(70),b.ALo(71,"translate"),b.qZA(),b.TgZ(72,"ngx-mat-file-input",27),b.NdJ("change",function(e){return i.onFileChangeLicenseImage(e)}),b.qZA(),b.TgZ(73,"mat-icon",28),b._uU(74,"cloud_upload"),b.qZA(),b.qZA(),b.qZA(),b.TgZ(75,"div",22),b.TgZ(76,"mat-form-field",17),b.TgZ(77,"mat-label"),b._uU(78),b.ALo(79,"translate"),b.qZA(),b.TgZ(80,"ngx-mat-file-input",29),b.NdJ("change",function(e){return i.onFileChangeLicenseFlow(e)}),b.qZA(),b.TgZ(81,"mat-icon",28),b._uU(82,"cloud_upload"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(83,"div",5),b.TgZ(84,"div",30),b.TgZ(85,"button",31),b.NdJ("click",function(){return i.setLicenseDetails()}),b._uU(86),b.ALo(87,"translate"),b.qZA(),b.TgZ(88,"button",32),b.NdJ("click",function(){return i.goBack()}),b._uU(89),b.ALo(90,"translate"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA()),2&e&&(b.xp6(11),b.Oqu(b.lcZ(12,24,"LICENSE.TITLE")),b.xp6(7),b.Oqu(b.lcZ(19,26,"LICENSE.TITLE")),b.xp6(3),b.Q6J("formGroup",i.addLicenseForm),b.xp6(5),b.Oqu(b.lcZ(27,28,"LICENSE.LIST.LICENSE-CLASS")),b.xp6(3),b.Q6J("ngIf",i.addLicenseForm.get("license_class").hasError("required")),b.xp6(4),b.Oqu(b.lcZ(34,30,"LICENSE.LIST.MIN-AGE")),b.xp6(5),b.Oqu(b.lcZ(39,32,"LICENSE.LIST.CDL-REQ")),b.xp6(5),b.hij("",b.lcZ(44,34,"LICENSE.LIST.LICENSE-ENGLISH"),"*"),b.xp6(2),b.Q6J("editor",i.Editor),b.xp6(1),b.Q6J("ngIf",i.addLicenseForm.get("license_desc_english").hasError("required")),b.xp6(3),b.hij("",b.lcZ(50,36,"LICENSE.LIST.LICENSE-MALAY"),"*"),b.xp6(2),b.Q6J("editor",i.Editor),b.xp6(1),b.Q6J("ngIf",i.addLicenseForm.get("license_desc_malay").hasError("required")),b.xp6(4),b.hij("",b.lcZ(57,38,"LICENSE.LIST.CRITERIA-ENGLISH"),"*"),b.xp6(2),b.Q6J("editor",i.Editor),b.xp6(1),b.Q6J("ngIf",i.addLicenseForm.get("criteria_english").hasError("required")),b.xp6(3),b.hij("",b.lcZ(63,40,"LICENSE.LIST.CRITERIA-MALAY"),"*"),b.xp6(2),b.Q6J("editor",i.Editor),b.xp6(1),b.Q6J("ngIf",i.addLicenseForm.get("criteria_malay").hasError("required")),b.xp6(5),b.Oqu(b.lcZ(71,42,"LICENSE.LIST.LICENSE-IMAGE")),b.xp6(8),b.Oqu(b.lcZ(79,44,"LICENSE.LIST.LICENSE-FLOW")),b.xp6(7),b.Q6J("disabled",!i.addLicenseForm.valid||i.disableSubmit),b.xp6(1),b.Oqu(b.lcZ(87,46,"BUTTON.ADD-BTN")),b.xp6(3),b.Oqu(b.lcZ(90,48,"BUTTON.CANCEL-BTN")))},directives:[k.Ro,a._Y,a.JL,a.sg,n.KE,n.hX,o.Nt,a.Fj,a.JJ,a.u,a.Q7,r.O5,a.nD,T.oG,Q.u,L.Yh,u.Hw,n.R9,d.lW,n.TO],pipes:[D.X$],styles:["[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:400px}"]}),e})()},{path:"edit-license/:id",component:(()=>{class e{constructor(e,i,t,r,s,l,n,o){this.cdRef=e,this.fb=i,this.languageService=t,this.toastrService=r,this.licenseService=s,this.router=l,this.route=n,this.spinner=o,this.Editor=R,this.apiURL=x.N.apiUrl,this.licenseId=this.route.snapshot.paramMap.get("id"),this.editLicenseForm=this.fb.group({id:[""],prev_license_class:["",a.kI.required],license_class:["",a.kI.required],minimum_age:[""],license_desc_english:["",a.kI.required],license_desc_malay:["",a.kI.required],criteria_english:["",a.kI.required],criteria_malay:["",a.kI.required],license_flow:["",a.kI.required],license_flow_name:["",a.kI.required],license_image:["",a.kI.required],license_image_name:["",a.kI.required],cdl_req:[""]})}ngOnInit(){this.spinner.show(),this.licenseService.getLicenseToEdit(this.licenseId).subscribe(e=>{if(this.spinner.hide(),"Session Expired"==e.status)this.toastrService.error("Session Expired!!!"),this.router.navigate(["/authentication/signin"]);else if(e.data.length>0){let i=e.data[0];this.editLicenseForm.patchValue({id:i.id,prev_license_class:i.license_class,license_class:i.license_class,cdl_req:1==i.cdl_requirement,minimum_age:i.minimum_age,license_desc_english:i.license_desc_english,license_desc_malay:i.license_desc_malay,criteria_english:i.criteria_english,criteria_malay:i.criteria_malay,license_flow:i.license_flow,license_flow_name:i.license_flow,license_image:i.license_image,license_image_name:i.license_image})}else this.toastrService.error("No Data Found!!!")})}onFileChangeLicenseFlow(e){const i=new FileReader;if(e.target.files&&e.target.files.length){const[t]=e.target.files;i.readAsDataURL(t),i.onload=()=>{this.licenseFlow_preview=i.result,this.editLicenseForm.patchValue({license_flow:t}),console.log("this.documentForm===",this.editLicenseForm)}}}onFileChangeLicenseImage(e){const i=new FileReader;if(e.target.files&&e.target.files.length){const[t]=e.target.files;i.readAsDataURL(t),i.onload=()=>{this.licenseImg_preview=i.result,this.editLicenseForm.patchValue({license_image:t}),console.log("this.documentForm===",this.editLicenseForm)}}}goBack(){this.router.navigate(["/admin/license/license-list"])}updateLicenseDetails(){console.log("Editor===",this.editLicenseForm.value),this.spinner.show();const e=new FormData;e.append("baseRoot","root/License/"+this.editLicenseForm.value.license_class),e.append("licenseData",JSON.stringify(this.editLicenseForm.value)),e.append("licenseImage",this.editLicenseForm.value.license_image),e.append("licenseFlow",this.editLicenseForm.value.license_flow),this.licenseService.updateLicenseDetails(e).subscribe(e=>{this.spinner.hide(),"Success"==e.status?(this.toastrService.success("Updated Successfully!!"),this.editLicenseForm.reset(),this.router.navigate(["/admin/license/license-list"])):"Session Expired"==e.status?(this.toastrService.error("Session Expired!!!"),this.router.navigate(["/authentication/signin"])):this.toastrService.error(e.status)})}}return e.\u0275fac=function(i){return new(i||e)(b.Y36(b.sBO),b.Y36(a.qu),b.Y36(y.T),b.Y36(F._W),b.Y36(w),b.Y36(I.F0),b.Y36(I.gz),b.Y36(k.t2))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-edit-license"]],decls:99,vars:52,consts:[["bdColor","rgba(51,51,51,0.8)","size","medium","color","#fff","type","ball-scale-multiple"],[2,"font-size","20px","color","white"],[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"row","clearfix"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"header"],[1,"body"],[1,"m-4",3,"formGroup"],[1,"col-xl-4","col-lg-4","col-md-12","col-sm-12","mb-2"],["appearance","outline",1,"example-full-width","mb-3"],["matInput","","formControlName","license_class","required",""],[4,"ngIf"],["matInput","","formControlName","minimum_age"],["formControlName","cdl_req",1,"example-margin"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2"],["formControlName","license_desc_english",3,"editor"],["formControlName","license_desc_malay",3,"editor"],["formControlName","criteria_english",3,"editor"],["formControlName","criteria_malay",3,"editor"],[2,"width","100%","height","50%",3,"src"],["formControlName","license_image_name","required","",3,"change"],["matSuffix",""],["formControlName","license_flow_name","required","",3,"change"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],["mat-raised-button","","color","primary",1,"btn-space",3,"disabled","click"],["type","button","mat-button","",3,"click"]],template:function(e,i){1&e&&(b.TgZ(0,"ngx-spinner",0),b.TgZ(1,"p",1),b._uU(2,"Loading..."),b.qZA(),b.qZA(),b.TgZ(3,"section",2),b.TgZ(4,"div",3),b.TgZ(5,"div",4),b.TgZ(6,"div",5),b.TgZ(7,"div",6),b.TgZ(8,"ul",7),b.TgZ(9,"li",8),b.TgZ(10,"h4",9),b._uU(11),b.ALo(12,"translate"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(13,"div",10),b.TgZ(14,"div",11),b.TgZ(15,"div",12),b.TgZ(16,"div",13),b.TgZ(17,"h2"),b._uU(18),b.ALo(19,"translate"),b.qZA(),b.qZA(),b.TgZ(20,"div",14),b.TgZ(21,"form",15),b.TgZ(22,"div",5),b.TgZ(23,"div",16),b.TgZ(24,"mat-form-field",17),b.TgZ(25,"mat-label"),b._uU(26),b.ALo(27,"translate"),b.qZA(),b._UZ(28,"input",18),b.YNc(29,z,3,3,"mat-error",19),b.qZA(),b.qZA(),b.TgZ(30,"div",16),b.TgZ(31,"mat-form-field",17),b.TgZ(32,"mat-label"),b._uU(33),b.ALo(34,"translate"),b.qZA(),b._UZ(35,"input",20),b.qZA(),b.qZA(),b.TgZ(36,"div",16),b.TgZ(37,"mat-checkbox",21),b._uU(38),b.ALo(39,"translate"),b.qZA(),b.qZA(),b.qZA(),b.TgZ(40,"div",5),b.TgZ(41,"div",22),b.TgZ(42,"mat-label"),b._uU(43),b.ALo(44,"translate"),b.qZA(),b._UZ(45,"ckeditor",23),b.YNc(46,X,3,3,"mat-error",19),b.qZA(),b.TgZ(47,"div",22),b.TgZ(48,"mat-label"),b._uU(49),b.ALo(50,"translate"),b.qZA(),b._UZ(51,"ckeditor",24),b.YNc(52,$,3,3,"mat-error",19),b.qZA(),b.qZA(),b.TgZ(53,"div",5),b.TgZ(54,"div",22),b.TgZ(55,"mat-label"),b._uU(56),b.ALo(57,"translate"),b.qZA(),b._UZ(58,"ckeditor",25),b.YNc(59,W,3,3,"mat-error",19),b.qZA(),b.TgZ(60,"div",22),b.TgZ(61,"mat-label"),b._uU(62),b.ALo(63,"translate"),b.qZA(),b._UZ(64,"ckeditor",26),b.YNc(65,V,3,3,"mat-error",19),b.qZA(),b.qZA(),b.TgZ(66,"div",5),b.TgZ(67,"div",22),b.TgZ(68,"div",5),b.TgZ(69,"div",22),b._UZ(70,"img",27),b.qZA(),b.TgZ(71,"div",22),b.TgZ(72,"mat-form-field",17),b.TgZ(73,"mat-label"),b._uU(74),b.ALo(75,"translate"),b.qZA(),b.TgZ(76,"ngx-mat-file-input",28),b.NdJ("change",function(e){return i.onFileChangeLicenseImage(e)}),b.qZA(),b.TgZ(77,"mat-icon",29),b._uU(78,"cloud_upload"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(79,"div",22),b.TgZ(80,"div",5),b.TgZ(81,"div",22),b._UZ(82,"img",27),b.qZA(),b.TgZ(83,"div",22),b.TgZ(84,"mat-form-field",17),b.TgZ(85,"mat-label"),b._uU(86),b.ALo(87,"translate"),b.qZA(),b.TgZ(88,"ngx-mat-file-input",30),b.NdJ("change",function(e){return i.onFileChangeLicenseFlow(e)}),b.qZA(),b.TgZ(89,"mat-icon",29),b._uU(90,"cloud_upload"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(91,"div",5),b.TgZ(92,"div",31),b.TgZ(93,"button",32),b.NdJ("click",function(){return i.updateLicenseDetails()}),b._uU(94),b.ALo(95,"translate"),b.qZA(),b.TgZ(96,"button",33),b.NdJ("click",function(){return i.goBack()}),b._uU(97),b.ALo(98,"translate"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA()),2&e&&(b.xp6(11),b.Oqu(b.lcZ(12,26,"LICENSE.EDITTITLE")),b.xp6(7),b.Oqu(b.lcZ(19,28,"LICENSE.EDITTITLE")),b.xp6(3),b.Q6J("formGroup",i.editLicenseForm),b.xp6(5),b.Oqu(b.lcZ(27,30,"LICENSE.LIST.LICENSE-CLASS")),b.xp6(3),b.Q6J("ngIf",i.editLicenseForm.get("license_class").hasError("required")),b.xp6(4),b.Oqu(b.lcZ(34,32,"LICENSE.LIST.MIN-AGE")),b.xp6(5),b.Oqu(b.lcZ(39,34,"LICENSE.LIST.CDL-REQ")),b.xp6(5),b.hij("",b.lcZ(44,36,"LICENSE.LIST.LICENSE-ENGLISH"),"*"),b.xp6(2),b.Q6J("editor",i.Editor),b.xp6(1),b.Q6J("ngIf",i.editLicenseForm.get("license_desc_english").hasError("required")),b.xp6(3),b.hij("",b.lcZ(50,38,"LICENSE.LIST.LICENSE-MALAY"),"*"),b.xp6(2),b.Q6J("editor",i.Editor),b.xp6(1),b.Q6J("ngIf",i.editLicenseForm.get("license_desc_malay").hasError("required")),b.xp6(4),b.hij("",b.lcZ(57,40,"LICENSE.LIST.CRITERIA-ENGLISH"),"*"),b.xp6(2),b.Q6J("editor",i.Editor),b.xp6(1),b.Q6J("ngIf",i.editLicenseForm.get("criteria_english").hasError("required")),b.xp6(3),b.hij("",b.lcZ(63,42,"LICENSE.LIST.CRITERIA-MALAY"),"*"),b.xp6(2),b.Q6J("editor",i.Editor),b.xp6(1),b.Q6J("ngIf",i.editLicenseForm.get("criteria_malay").hasError("required")),b.xp6(5),b.s9C("src",i.licenseImg_preview?i.licenseImg_preview:i.apiURL+"/"+i.editLicenseForm.value.license_image,b.LSH),b.xp6(4),b.Oqu(b.lcZ(75,44,"LICENSE.LIST.LICENSE-IMAGE")),b.xp6(8),b.s9C("src",i.licenseFlow_preview?i.licenseFlow_preview:i.apiURL+"/"+i.editLicenseForm.value.license_flow,b.LSH),b.xp6(4),b.Oqu(b.lcZ(87,46,"LICENSE.LIST.LICENSE-FLOW")),b.xp6(7),b.Q6J("disabled",!i.editLicenseForm.valid),b.xp6(1),b.Oqu(b.lcZ(95,48,"BUTTON.EDIT-BTN")),b.xp6(3),b.Oqu(b.lcZ(98,50,"BUTTON.CANCEL-BTN")))},directives:[k.Ro,a._Y,a.JL,a.sg,n.KE,n.hX,o.Nt,a.Fj,a.JJ,a.u,a.Q7,r.O5,T.oG,Q.u,L.Yh,u.Hw,n.R9,d.lW,n.TO],pipes:[D.X$],styles:["[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:400px}"]}),e})()}];let K=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=b.oAB({type:e}),e.\u0275inj=b.cJS({imports:[[I.Bz.forChild(P)],I.Bz]}),e})();var ee=t(79961);let ie=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=b.oAB({type:e}),e.\u0275inj=b.cJS({providers:[w],imports:[[S.xD,Q.d,r.ez,a.u5,a.UX,s.p0,l.TU,n.lN,o.c,c.ZX,d.ot,u.Ps,g.Is,m.JX,h.g0,Z.LD,p.FA,T.p9,A.Nh,q.Tx,L.Ad,K,_.Cq,f.T5,E.yI,D.aw,ee.Bb,k.ef]]}),e})()}}]);