(self.webpackChunksmart=self.webpackChunksmart||[]).push([[7278],{47278:function(e,t,i){"use strict";i.r(t),i.d(t,{ProfileModule:function(){return w}});var r=i(61116),s=i(35729),a=i(31041),u=i(35366),l=i(28086),o=i(50518),n=i(57173),Z=i(13070),c=i(9550),g=i(84369),d=i(1325),m=i(77307);function p(e,t){1&e&&(u.TgZ(0,"mat-icon",46),u._uU(1,"face"),u.qZA(),u._uU(2," About Me "))}function q(e,t){1&e&&(u.TgZ(0,"div",23),u.TgZ(1,"h2"),u.TgZ(2,"strong"),u._uU(3,"Update Logo"),u.qZA(),u.qZA(),u.qZA())}function h(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",24),u.TgZ(1,"div",30),u.TgZ(2,"mat-form-field",42),u.TgZ(3,"ngx-mat-file-input",47),u.NdJ("change",function(t){return u.CHM(e),u.oxw().onFileChange(t)}),u.qZA(),u.TgZ(4,"mat-icon",44),u._uU(5,"cloud_upload"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(6,"button",45),u.NdJ("click",function(){return u.CHM(e),u.oxw().updateClientLogo()}),u._uU(7,"Save"),u.qZA(),u.qZA()}}function A(e,t){1&e&&(u.TgZ(0,"mat-icon",46),u._uU(1,"settings"),u.qZA(),u._uU(2," Settings "))}const f=[{path:"",component:(()=>{class e{constructor(e,t,i){this.fb=e,this.authService=t,this.toastrService=i}ngOnInit(){this.securityForm=this.fb.group({user_name:["",a.kI.required],new_username:["",a.kI.required],password:["",a.kI.required],current_password:["",a.kI.required],new_password:["",a.kI.required]}),this.accountsForm=this.fb.group({name:["",a.kI.required],mobile_no:["",a.kI.required],email_id:["",a.kI.required],profile:[""],profile_type:[""]}),this.authService.checkUserLoggedIn().subscribe(e=>{this.userDetails=e.data,this.userImg=e.data.img,this.securityForm.patchValue({user_name:this.userDetails.user_name,new_username:this.userDetails.user_name,password:this.userDetails.password}),this.accountsForm.patchValue({name:this.userDetails.name,mobile_no:this.userDetails.mobile_no,email_id:this.userDetails.email_id,profile:this.userDetails.img})})}onFileChange(e){if(new FileReader,e.target.files&&e.target.files.length){const[t]=e.target.files,i=new Blob([t],{type:e.target.files[0].type});this.newLogo=i,this.newLogoType=e.target.files[0].type}}onFileChangeProfile(e){if(new FileReader,e.target.files&&e.target.files.length){const[t]=e.target.files,i=new Blob([t],{type:e.target.files[0].type});this.accountsForm.patchValue({profile:i,profile_type:e.target.files[0].type})}}updateClientLogo(){if(this.newLogo){var e=new FormData;e.append("newLogo",this.newLogo),e.append("newLogoType",this.newLogoType),this.authService.updateClientLogo(e).subscribe(e=>{this.authService.currentUserSubject.next(!0),this.toastrService.success("Updated Successfully!!!")})}}updateUserCredentials(){this.securityForm.value.password==this.securityForm.value.current_password?this.authService.updateUserCredentials(this.securityForm.value).subscribe(e=>{"Success"==e.status?(this.authService.currentUserSubject.next(!0),this.toastrService.success("Updated Successfully!!!")):this.toastrService.error("User Name Already Exists!!")}):this.toastrService.error("Current Password is not Correct!!")}updateAccountDetails(){var e=new FormData;e.append("accountData",JSON.stringify(this.accountsForm.value)),e.append("profile",this.accountsForm.value.profile),this.authService.updateAccountDetails(e).subscribe(e=>{this.authService.currentUserSubject.next(!0),this.toastrService.success("Updated Successfully!!!"),this.authService.checkUserLoggedIn().subscribe(e=>{this.userDetails=e.data,this.securityForm.patchValue({user_name:this.userDetails.user_name,new_username:this.userDetails.user_name,password:this.userDetails.password}),this.accountsForm.patchValue({name:this.userDetails.name,mobile_no:this.userDetails.mobile_no,email_id:this.userDetails.email_id,profile:this.userDetails.img})})})}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(a.qu),u.Y36(l.e),u.Y36(o._W))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-profile"]],decls:122,vars:13,consts:[[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"row","clearfix"],[1,"col-lg-4","col-md-12"],[1,"card"],[1,"m-b-20"],[1,"contact-grid"],[1,"profile-header","bg-dark"],[1,"user-name"],[1,"name-center"],["alt","",1,"user-img",2,"width","100%","height","100px",3,"src"],[1,"phone"],[1,"material-icons"],[1,"col-lg-8","col-md-12"],["mat-tab-label",""],[1,"col-lg-12","col-md-12","col-sm-12"],[1,"project_widget"],[1,"header"],[1,"body"],[1,"col-md-3","col-6","b-r"],[1,"text-muted"],["class","header",4,"ngIf"],["class","body",4,"ngIf"],[3,"formGroup"],[1,"example-container"],["appearance","fill",1,"example-full-width"],["matInput","","formControlName","new_username"],["matInput","","type","password","formControlName","current_password"],["matInput","","type","password","formControlName","new_password"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"col-md-12"],[1,"form-group"],["matInput","","formControlName","name"],[1,"col-lg-6","col-md-12"],["matInput","","formControlName","mobile_no"],["matInput","","formControlName","email_id"],[1,"example-full-width"],["placeholder","Profile",3,"change"],["matSuffix",""],["mat-raised-button","","color","primary",3,"click"],[1,"example-tab-icon","msr-2"],["placeholder","Company Logo",3,"change"]],template:function(e,t){1&e&&(u.TgZ(0,"section",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"div",3),u.TgZ(4,"div",4),u.TgZ(5,"ul",5),u.TgZ(6,"li",6),u.TgZ(7,"h4",7),u._uU(8,"Profile"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(9,"div",8),u.TgZ(10,"div",9),u.TgZ(11,"div",10),u.TgZ(12,"div",11),u.TgZ(13,"div",12),u.TgZ(14,"div",13),u.TgZ(15,"div",14),u._uU(16),u.qZA(),u.TgZ(17,"div",15),u._uU(18),u.qZA(),u.qZA(),u._UZ(19,"img",16),u.TgZ(20,"div"),u.TgZ(21,"span",17),u.TgZ(22,"i",18),u._uU(23,"phone"),u.qZA(),u._uU(24),u.qZA(),u.qZA(),u.TgZ(25,"div"),u.TgZ(26,"span",17),u.TgZ(27,"i",18),u._uU(28,"email"),u.qZA(),u._uU(29),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(30,"div",19),u.TgZ(31,"div",10),u.TgZ(32,"mat-tab-group"),u.TgZ(33,"mat-tab"),u.YNc(34,p,3,0,"ng-template",20),u.TgZ(35,"div",21),u.TgZ(36,"div",22),u.TgZ(37,"div",23),u.TgZ(38,"h2"),u.TgZ(39,"strong"),u._uU(40,"About"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(41,"div",24),u.TgZ(42,"div",3),u.TgZ(43,"div",25),u.TgZ(44,"strong"),u._uU(45,"Full Name"),u.qZA(),u._UZ(46,"br"),u.TgZ(47,"p",26),u._uU(48),u.qZA(),u.qZA(),u.TgZ(49,"div",25),u.TgZ(50,"strong"),u._uU(51,"Mobile"),u.qZA(),u._UZ(52,"br"),u.TgZ(53,"p",26),u._uU(54),u.qZA(),u.qZA(),u.TgZ(55,"div",25),u.TgZ(56,"strong"),u._uU(57,"Email"),u.qZA(),u._UZ(58,"br"),u.TgZ(59,"p",26),u._uU(60),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(61,q,4,0,"div",27),u.YNc(62,h,8,0,"div",28),u.qZA(),u.qZA(),u.qZA(),u.TgZ(63,"mat-tab"),u.YNc(64,A,3,0,"ng-template",20),u.TgZ(65,"div",23),u.TgZ(66,"h2"),u.TgZ(67,"strong"),u._uU(68,"Security"),u.qZA(),u._uU(69," Settings"),u.qZA(),u.qZA(),u.TgZ(70,"div",24),u.TgZ(71,"form",29),u.TgZ(72,"div",30),u.TgZ(73,"mat-form-field",31),u.TgZ(74,"mat-label"),u._uU(75,"Username"),u.qZA(),u._UZ(76,"input",32),u.qZA(),u.TgZ(77,"mat-form-field",31),u.TgZ(78,"mat-label"),u._uU(79,"Current Password"),u.qZA(),u._UZ(80,"input",33),u.qZA(),u.TgZ(81,"mat-form-field",31),u.TgZ(82,"mat-label"),u._uU(83,"New Password"),u.qZA(),u._UZ(84,"input",34),u.qZA(),u.qZA(),u.TgZ(85,"button",35),u.NdJ("click",function(){return t.updateUserCredentials()}),u._uU(86,"Save"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(87,"div",23),u.TgZ(88,"h2"),u.TgZ(89,"strong"),u._uU(90,"Account"),u.qZA(),u._uU(91," Settings"),u.qZA(),u.qZA(),u.TgZ(92,"div",24),u.TgZ(93,"form",29),u.TgZ(94,"div",8),u.TgZ(95,"div",36),u.TgZ(96,"div",37),u.TgZ(97,"mat-form-field",31),u.TgZ(98,"mat-label"),u._uU(99,"Name"),u.qZA(),u._UZ(100,"input",38),u.qZA(),u.qZA(),u.qZA(),u.TgZ(101,"div",39),u.TgZ(102,"div",37),u.TgZ(103,"mat-form-field",31),u.TgZ(104,"mat-label"),u._uU(105,"Mobile No"),u.qZA(),u._UZ(106,"input",40),u.qZA(),u.qZA(),u.qZA(),u.TgZ(107,"div",39),u.TgZ(108,"div",37),u.TgZ(109,"mat-form-field",31),u.TgZ(110,"mat-label"),u._uU(111,"Email Id"),u.qZA(),u._UZ(112,"input",41),u.qZA(),u.qZA(),u.qZA(),u.TgZ(113,"div",36),u.TgZ(114,"div",37),u.TgZ(115,"mat-form-field",42),u.TgZ(116,"ngx-mat-file-input",43),u.NdJ("change",function(e){return t.onFileChangeProfile(e)}),u.qZA(),u.TgZ(117,"mat-icon",44),u._uU(118,"cloud_upload"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(119,"div",36),u.TgZ(120,"button",45),u.NdJ("click",function(){return t.updateAccountDetails()}),u._uU(121,"Save Changes"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(16),u.Oqu(null==t.userDetails?null:t.userDetails.name),u.xp6(2),u.Oqu(null==t.userDetails?null:t.userDetails.role),u.xp6(1),u.s9C("src",t.userImg?t.userImg:"assets/images/nouser.png",u.LSH),u.xp6(5),u.Oqu(null==t.userDetails?null:t.userDetails.mobile_no),u.xp6(5),u.Oqu(null==t.userDetails?null:t.userDetails.email_id),u.xp6(19),u.Oqu(null==t.userDetails?null:t.userDetails.name),u.xp6(6),u.Oqu(null==t.userDetails?null:t.userDetails.mobile_no),u.xp6(6),u.Oqu(null==t.userDetails?null:t.userDetails.email_id),u.xp6(1),u.Q6J("ngIf","Admin"==(null==t.userDetails?null:t.userDetails.role)),u.xp6(1),u.Q6J("ngIf","Admin"==(null==t.userDetails?null:t.userDetails.role)),u.xp6(9),u.Q6J("formGroup",t.securityForm),u.xp6(14),u.Q6J("disabled",!t.securityForm.valid),u.xp6(8),u.Q6J("formGroup",t.accountsForm))},directives:[n.SP,n.uX,n.uD,r.O5,a._Y,a.JL,a.sg,Z.KE,Z.hX,c.Nt,a.Fj,a.JJ,a.u,g.lW,d.Yh,m.Hw,Z.R9],styles:[""]}),e})()}];let T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[s.Bz.forChild(f)],s.Bz]}),e})();var _=i(63589),v=i(13841),b=i(97070),U=i(40994);let w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[r.ez,T,b.Tx,g.ot,m.Ps,d.Ad,a.u5,a.UX,v.LD,_.ZX,c.c,Z.lN,U.p9,n.Nh]]}),e})()}}]);