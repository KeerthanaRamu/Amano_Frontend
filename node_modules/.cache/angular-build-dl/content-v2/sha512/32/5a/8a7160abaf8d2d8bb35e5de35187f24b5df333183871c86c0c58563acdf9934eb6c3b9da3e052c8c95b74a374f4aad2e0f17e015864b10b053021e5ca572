(self.webpackChunksmart=self.webpackChunksmart||[]).push([[5640],{55640:function(t,e,a){"use strict";a.r(e),a.d(e,{ReportsModule:function(){return F}});var r=a(61116),o=a(31041),i=a(39199),n=a(5609),l=a(13070),s=a(9550),c=a(84369),m=a(77307),d=a(92935),p=a(59241),g=a(69024),u=a(40994),T=a(97070),Z=a(87672),h=a(60649),A=a(79961),f=a(17647),R=a(31269),E=a(22797),b=a(7436),q=a(91681),_=a(529),x=a(35366),N=a(42693);let v=(()=>{class t{constructor(t){this.http=t}getRegistrationReportForAdmin(t,e){return this.http.post(`${_.N.apiUrl}/report/getRegistrationReportForAdmin`,{dateObj:t,client:e}).pipe((0,q.U)(t=>t))}getRevenueReportForAdmin(t,e){return this.http.post(`${_.N.apiUrl}/report/getRevenueReportForAdmin`,{dateObj:t,client:e}).pipe((0,q.U)(t=>t))}}return t.\u0275fac=function(e){return new(e||t)(x.LFG(N.eN))},t.\u0275prov=x.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var U=a(35729),S=a(64762),w=a(59365),I=a(29609),O=a(50518);function L(t,e){1&t&&(x.TgZ(0,"mat-error"),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&t&&(x.xp6(1),x.hij(" ",x.lcZ(2,1,"REVENUE-REPORT.LIST.FROMDATE")," is required "))}function D(t,e){1&t&&(x.TgZ(0,"mat-error"),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&t&&(x.xp6(1),x.hij(" ",x.lcZ(2,1,"REVENUE-REPORT.LIST.TODATE")," is required "))}function k(t,e){1&t&&(x.TgZ(0,"mat-error"),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&t&&(x.xp6(1),x.hij(" ",x.lcZ(2,1,"REGISTRATION-REPORT.LIST.FROMDATE")," is required "))}function J(t,e){1&t&&(x.TgZ(0,"mat-error"),x._uU(1),x.ALo(2,"translate"),x.qZA()),2&t&&(x.xp6(1),x.hij(" ",x.lcZ(2,1,"REGISTRATION-REPORT.LIST.TODATE")," is required "))}function C(t,e){if(1&t&&(x.TgZ(0,"td",44),x._UZ(1,"img",45),x.qZA()),2&t){const t=e.value;x.xp6(1),x.s9C("src",t||"assets/images/nologo.png",x.LSH)}}const P=[{path:"revenue-report",component:(()=>{class t{constructor(t,e,a){this.reportService=t,this.toastrService=e,this.fb=a,this.columns=[{name:"Student Name"},{name:"Transaction Number"},{name:"Package"},{name:"Package Type"},{name:"Package Amount"},{name:"Payment Status"},{name:"Amount Paid"},{name:"Status"}],this.data=[],this.filteredData=[],this.translateVal="ml"==localStorage.lang?"malay":"english",this.regReportForm=this.fb.group({from_date:[new Date],to_date:[new Date]})}ngOnInit(){this.getRevenueReportForAdmin()}refresh(){this.getRevenueReportForAdmin()}getRevenueReportForAdmin(){console.log("this.regReportForm.value===",this.regReportForm.value),this.reportService.getRevenueReportForAdmin(this.regReportForm.value,sessionStorage.client).subscribe(t=>{for(let e=0;e<t.data.length;e++)t.data[e].package_english=t.data[e]["package_"+this.translateVal],t.data[e].english=t.data[e][this.translateVal];this.data=t.data,this.filteredData=t.data})}getRevenueReport(){this.getRevenueReportForAdmin()}filterDatatable(t){const e=t.target.value.toLowerCase(),a=this.columns.length,r=Object.keys(this.filteredData[0]);this.data=this.filteredData.filter(function(t){for(let o=0;o<a;o++)if(-1!==t[r[o]].toString().toLowerCase().indexOf(e)||!e)return!0}),this.table.offset=0}exportToExcel(){if(this.filteredData.length>0){var t={fieldSeparator:",",quoteStrings:'"',decimalseparator:".",showLabels:!0,showTitle:!0,title:"Revenue Report - "+I(new Date).format("YYYY-MM-DD"),useBom:!0,noDownload:!1,headers:["Student Name","Transaction No","Package","Payment Phase","Package Amount","Payment Status","Amount Paid","Status"]};let e="Revenue_Report_"+I(new Date).format("YYYY-MM-DD");console.log("this.filteredData========",this.filteredData,e);const a=this.filteredData.map(t=>{var e=(0,S._T)(t,["id","malay","package_malay"]);return Object.assign({},e)});console.log("result======",a),new w.J0(a,e,t)}}}return t.\u0275fac=function(e){return new(e||t)(x.Y36(v),x.Y36(O._W),x.Y36(o.qu))},t.\u0275cmp=x.Xpm({type:t,selectors:[["app-revenue-report"]],viewQuery:function(t,e){if(1&t&&x.Gf(f.nE,5),2&t){let t;x.iGM(t=x.CRH())&&(e.table=t.first)}},decls:74,vars:62,consts:[[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"col-md-12"],[1,"mt-5"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"body"],[1,"table-responsive"],[1,"materialTableHeader"],[3,"formGroup"],[1,"col-4"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","from_date",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],[4,"ngIf"],["matInput","","formControlName","to_date",3,"matDatepicker"],["topicker",""],[1,"col-2",2,"padding","10px"],["mat-raised-button","","color","primary",3,"click"],[1,"col-1",2,"padding","10px"],["mat-raised-button","",1,"btn","btn-success",3,"click"],[1,"fas","fa-file-excel"],[1,"col-1"],[1,"header-buttons"],[1,"icon-button-demo"],["mat-mini-fab","","color","primary",3,"click"],[1,"col-white"],[1,"material",3,"rows","columns","sortType","columnMode","headerHeight","footerHeight","rowHeight","limit"],["table",""],["prop","name",3,"name","width"],["prop","enrollment_no",3,"name","width"],["prop","package_english",3,"name","width"],["prop","english",3,"name","width"],["prop","final_package_price",3,"name","width"],["prop","payment_status",3,"name","width"],["prop","amountPaid",3,"name","width"],["prop","status",3,"name","width"]],template:function(t,e){if(1&t&&(x.TgZ(0,"section",0),x.TgZ(1,"div",1),x.TgZ(2,"div",2),x.TgZ(3,"div",3),x.TgZ(4,"div",4),x.TgZ(5,"ul",5),x.TgZ(6,"li",6),x.TgZ(7,"h4",7),x._uU(8),x.ALo(9,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(10,"div",3),x.TgZ(11,"div",8),x.TgZ(12,"div",9),x.TgZ(13,"div",10),x.TgZ(14,"div",11),x.TgZ(15,"div",12),x.TgZ(16,"div",13),x.TgZ(17,"div",14),x.TgZ(18,"form",15),x.TgZ(19,"div",3),x.TgZ(20,"div",16),x.TgZ(21,"mat-form-field",17),x.TgZ(22,"mat-label"),x._uU(23),x.ALo(24,"translate"),x.qZA(),x._UZ(25,"input",18),x._UZ(26,"mat-datepicker-toggle",19),x._UZ(27,"mat-datepicker",null,20),x.YNc(29,L,3,3,"mat-error",21),x.qZA(),x.qZA(),x.TgZ(30,"div",16),x.TgZ(31,"mat-form-field",17),x.TgZ(32,"mat-label"),x._uU(33),x.ALo(34,"translate"),x.qZA(),x._UZ(35,"input",22),x._UZ(36,"mat-datepicker-toggle",19),x._UZ(37,"mat-datepicker",null,23),x.YNc(39,D,3,3,"mat-error",21),x.qZA(),x.qZA(),x.TgZ(40,"div",24),x.TgZ(41,"button",25),x.NdJ("click",function(){return e.getRevenueReport()}),x._uU(42),x.ALo(43,"translate"),x.qZA(),x.qZA(),x.TgZ(44,"div",26),x.TgZ(45,"button",27),x.NdJ("click",function(){return e.exportToExcel()}),x._uU(46),x.ALo(47,"translate"),x._UZ(48,"i",28),x.qZA(),x.qZA(),x.TgZ(49,"div",29),x.TgZ(50,"ul",30),x.TgZ(51,"li"),x.TgZ(52,"div",31),x.TgZ(53,"button",32),x.NdJ("click",function(){return e.refresh()}),x.TgZ(54,"mat-icon",33),x._uU(55,"refresh "),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(56,"ngx-datatable",34,35),x._UZ(58,"ngx-datatable-column",36),x.ALo(59,"translate"),x._UZ(60,"ngx-datatable-column",37),x.ALo(61,"translate"),x._UZ(62,"ngx-datatable-column",38),x.ALo(63,"translate"),x._UZ(64,"ngx-datatable-column",39),x.ALo(65,"translate"),x._UZ(66,"ngx-datatable-column",40),x.ALo(67,"translate"),x._UZ(68,"ngx-datatable-column",41),x.ALo(69,"translate"),x._UZ(70,"ngx-datatable-column",42),x.ALo(71,"translate"),x._UZ(72,"ngx-datatable-column",43),x.ALo(73,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()),2&t){const t=x.MAs(28),a=x.MAs(38);x.xp6(8),x.Oqu(x.lcZ(9,36,"REVENUE-REPORT.TITLE")),x.xp6(10),x.Q6J("formGroup",e.regReportForm),x.xp6(5),x.hij("",x.lcZ(24,38,"REVENUE-REPORT.LIST.FROMDATE"),"*"),x.xp6(2),x.Q6J("matDatepicker",t),x.xp6(1),x.Q6J("for",t),x.xp6(3),x.Q6J("ngIf",e.regReportForm.get("from_date").hasError("required")),x.xp6(4),x.hij("",x.lcZ(34,40,"REVENUE-REPORT.LIST.TODATE"),"*"),x.xp6(2),x.Q6J("matDatepicker",a),x.xp6(1),x.Q6J("for",t),x.xp6(3),x.Q6J("ngIf",e.regReportForm.get("to_date").hasError("required")),x.xp6(3),x.Oqu(x.lcZ(43,42,"BUTTON.SEARCH-BTN")),x.xp6(4),x.hij("",x.lcZ(47,44,"BUTTON.EXCEL-BTN")," "),x.xp6(10),x.Q6J("rows",e.data)("columns",e.columns)("sortType","multi")("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","60")("limit",10),x.xp6(2),x.s9C("name",x.lcZ(59,46,"REVENUE-REPORT.LIST.STUDENT-NAME")),x.Q6J("width",130),x.xp6(2),x.s9C("name",x.lcZ(61,48,"REVENUE-REPORT.LIST.TRAN-NO")),x.Q6J("width",130),x.xp6(2),x.s9C("name",x.lcZ(63,50,"REVENUE-REPORT.LIST.PACKAGE")),x.Q6J("width",200),x.xp6(2),x.s9C("name",x.lcZ(65,52,"REVENUE-REPORT.LIST.PACKAGE-TYPE")),x.Q6J("width",200),x.xp6(2),x.s9C("name",x.lcZ(67,54,"REVENUE-REPORT.LIST.PACKAGE-AMOUNT")),x.Q6J("width",200),x.xp6(2),x.s9C("name",x.lcZ(69,56,"REVENUE-REPORT.LIST.PAYMENT-STATUS")),x.Q6J("width",200),x.xp6(2),x.s9C("name",x.lcZ(71,58,"REVENUE-REPORT.LIST.AMOUNT-PAID")),x.Q6J("width",200),x.xp6(2),x.s9C("name",x.lcZ(73,60,"REVENUE-REPORT.LIST.STATUS")),x.Q6J("width",200)}},directives:[o._Y,o.JL,o.sg,l.KE,l.hX,s.Nt,o.Fj,g.hl,o.JJ,o.u,g.nW,l.R9,g.Mq,r.O5,c.lW,m.Hw,f.nE,f.UC,l.TO],pipes:[h.X$],styles:[""]}),t})()},{path:"registration-report",component:(()=>{class t{constructor(t,e,a){this.reportService=t,this.toastrService=e,this.fb=a,this.columns=[{name:"Name"},{name:"NRIC Number"},{name:"Passport Number"},{name:"Gender"},{name:"Mobile"},{name:"Email"},{name:"Status"}],this.data=[],this.filteredData=[],this.translateVal="ml"==localStorage.lang?"malay":"english",this.regReportForm=this.fb.group({from_date:[new Date],to_date:[new Date]})}ngOnInit(){this.getRegistrationReportForAdmin()}refresh(){this.getRegistrationReportForAdmin()}getRegistrationReportForAdmin(){console.log("this.regReportForm.value===",this.regReportForm.value),this.reportService.getRegistrationReportForAdmin(this.regReportForm.value,sessionStorage.client).subscribe(t=>{for(let e=0;e<t.data.length;e++)t.data[e].nric_english=t.data[e]["nric_"+this.translateVal],t.data[e].placebirth_english=t.data[e]["placebirth_"+this.translateVal],t.data[e].race_english=t.data[e]["race_"+this.translateVal],t.data[e].pref_english=t.data[e]["pref_"+this.translateVal],t.data[e].english=t.data[e][this.translateVal];this.data=t.data,this.filteredData=t.data})}getRegistrationReport(){this.getRegistrationReportForAdmin()}filterDatatable(t){const e=t.target.value.toLowerCase(),a=this.columns.length,r=Object.keys(this.filteredData[0]);this.data=this.filteredData.filter(function(t){for(let o=0;o<a;o++)if(-1!==t[r[o]].toString().toLowerCase().indexOf(e)||!e)return!0}),this.table.offset=0}exportToExcel(){if(this.filteredData.length>0){var t={fieldSeparator:",",quoteStrings:'"',decimalseparator:".",showLabels:!0,showTitle:!0,title:"Registration Report - "+I(new Date).format("YYYY-MM-DD"),useBom:!0,noDownload:!1,headers:["Student Name","NRIC Type","NRIC Number","Passport Number","Date Of Birth","Gender","Place Of Birth","Nationality","NRIC Address","Address 1","Address 2","Postal Code","City","State","Email Address","Moile Number","Race","Other Race","Prefered Language","Emergency Contact Name","Emergency Contact Number","Username","Password","Status"]};let e="Registration_Report_"+I(new Date).format("YYYY-MM-DD");console.log("this.filteredData========",this.filteredData,e);const a=this.filteredData.map(t=>{var e=(0,S._T)(t,["id","profile_img","nric_malay","placebirth_malay","race_malay","pref_malay","english"]);return Object.assign({},e)});new w.J0(a,e,t)}}}return t.\u0275fac=function(e){return new(e||t)(x.Y36(v),x.Y36(O._W),x.Y36(o.qu))},t.\u0275cmp=x.Xpm({type:t,selectors:[["app-registration-report"]],viewQuery:function(t,e){if(1&t&&x.Gf(f.nE,5),2&t){let t;x.iGM(t=x.CRH())&&(e.table=t.first)}},decls:72,vars:55,consts:[[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"col-md-12"],[1,"mt-5"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"body"],[1,"table-responsive"],[1,"materialTableHeader"],[3,"formGroup"],[1,"col-4"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","from_date",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],[4,"ngIf"],["matInput","","formControlName","to_date",3,"matDatepicker"],["topicker",""],[1,"col-2",2,"padding","10px"],["mat-raised-button","","color","primary",3,"click"],[1,"col-1",2,"padding","10px"],["mat-raised-button","",1,"btn","btn-success",3,"click"],[1,"fas","fa-file-excel"],[1,"col-1"],[1,"header-buttons"],[1,"icon-button-demo"],["mat-mini-fab","","color","primary",3,"click"],[1,"col-white"],[1,"material",3,"rows","columns","sortType","columnMode","headerHeight","footerHeight","rowHeight","limit"],["table",""],["name","Image","sortable","false","prop","profile_img",3,"width"],["ngx-datatable-cell-template",""],["prop","name",3,"name","width"],["prop","nric_number",3,"name","width"],["prop","passport_number",3,"name","width"],["prop","mobile_number",3,"name","width"],["prop","email_id",3,"name","width"],["prop","status",3,"name","width"],[1,"table-img","padding-0"],["width","40",3,"src"]],template:function(t,e){if(1&t&&(x.TgZ(0,"section",0),x.TgZ(1,"div",1),x.TgZ(2,"div",2),x.TgZ(3,"div",3),x.TgZ(4,"div",4),x.TgZ(5,"ul",5),x.TgZ(6,"li",6),x.TgZ(7,"h4",7),x._uU(8),x.ALo(9,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(10,"div",3),x.TgZ(11,"div",8),x.TgZ(12,"div",9),x.TgZ(13,"div",10),x.TgZ(14,"div",11),x.TgZ(15,"div",12),x.TgZ(16,"div",13),x.TgZ(17,"div",14),x.TgZ(18,"form",15),x.TgZ(19,"div",3),x.TgZ(20,"div",16),x.TgZ(21,"mat-form-field",17),x.TgZ(22,"mat-label"),x._uU(23),x.ALo(24,"translate"),x.qZA(),x._UZ(25,"input",18),x._UZ(26,"mat-datepicker-toggle",19),x._UZ(27,"mat-datepicker",null,20),x.YNc(29,k,3,3,"mat-error",21),x.qZA(),x.qZA(),x.TgZ(30,"div",16),x.TgZ(31,"mat-form-field",17),x.TgZ(32,"mat-label"),x._uU(33),x.ALo(34,"translate"),x.qZA(),x._UZ(35,"input",22),x._UZ(36,"mat-datepicker-toggle",19),x._UZ(37,"mat-datepicker",null,23),x.YNc(39,J,3,3,"mat-error",21),x.qZA(),x.qZA(),x.TgZ(40,"div",24),x.TgZ(41,"button",25),x.NdJ("click",function(){return e.getRegistrationReport()}),x._uU(42),x.ALo(43,"translate"),x.qZA(),x.qZA(),x.TgZ(44,"div",26),x.TgZ(45,"button",27),x.NdJ("click",function(){return e.exportToExcel()}),x._uU(46),x.ALo(47,"translate"),x._UZ(48,"i",28),x.qZA(),x.qZA(),x.TgZ(49,"div",29),x.TgZ(50,"ul",30),x.TgZ(51,"li"),x.TgZ(52,"div",31),x.TgZ(53,"button",32),x.NdJ("click",function(){return e.refresh()}),x.TgZ(54,"mat-icon",33),x._uU(55,"refresh "),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(56,"ngx-datatable",34,35),x.TgZ(58,"ngx-datatable-column",36),x.YNc(59,C,2,1,"ng-template",37),x.qZA(),x._UZ(60,"ngx-datatable-column",38),x.ALo(61,"translate"),x._UZ(62,"ngx-datatable-column",39),x.ALo(63,"translate"),x._UZ(64,"ngx-datatable-column",40),x.ALo(65,"translate"),x._UZ(66,"ngx-datatable-column",41),x.ALo(67,"translate"),x._UZ(68,"ngx-datatable-column",42),x.ALo(69,"translate"),x._UZ(70,"ngx-datatable-column",43),x.ALo(71,"translate"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()),2&t){const t=x.MAs(28),a=x.MAs(38);x.xp6(8),x.Oqu(x.lcZ(9,33,"REGISTRATION-REPORT.TITLE")),x.xp6(10),x.Q6J("formGroup",e.regReportForm),x.xp6(5),x.hij("",x.lcZ(24,35,"REGISTRATION-REPORT.LIST.FROMDATE"),"*"),x.xp6(2),x.Q6J("matDatepicker",t),x.xp6(1),x.Q6J("for",t),x.xp6(3),x.Q6J("ngIf",e.regReportForm.get("from_date").hasError("required")),x.xp6(4),x.hij("",x.lcZ(34,37,"REGISTRATION-REPORT.LIST.TODATE"),"*"),x.xp6(2),x.Q6J("matDatepicker",a),x.xp6(1),x.Q6J("for",t),x.xp6(3),x.Q6J("ngIf",e.regReportForm.get("to_date").hasError("required")),x.xp6(3),x.Oqu(x.lcZ(43,39,"BUTTON.SEARCH-BTN")),x.xp6(4),x.hij("",x.lcZ(47,41,"BUTTON.EXCEL-BTN")," "),x.xp6(10),x.Q6J("rows",e.data)("columns",e.columns)("sortType","multi")("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","60")("limit",10),x.xp6(2),x.Q6J("width",100),x.xp6(2),x.s9C("name",x.lcZ(61,43,"STUDENT-REGISTRATION.LIST.NAME")),x.Q6J("width",130),x.xp6(2),x.s9C("name",x.lcZ(63,45,"STUDENT-REGISTRATION.LIST.NRIC")),x.Q6J("width",130),x.xp6(2),x.s9C("name",x.lcZ(65,47,"STUDENT-REGISTRATION.LIST.PASSPORT")),x.Q6J("width",200),x.xp6(2),x.s9C("name",x.lcZ(67,49,"STUDENT-REGISTRATION.LIST.MOBILENO")),x.Q6J("width",200),x.xp6(2),x.s9C("name",x.lcZ(69,51,"STUDENT-REGISTRATION.LIST.EMAIL")),x.Q6J("width",200),x.xp6(2),x.s9C("name",x.lcZ(71,53,"STUDENT-REGISTRATION.LIST.STATUS")),x.Q6J("width",200)}},directives:[o._Y,o.JL,o.sg,l.KE,l.hX,s.Nt,o.Fj,g.hl,o.JJ,o.u,g.nW,l.R9,g.Mq,r.O5,c.lW,m.Hw,f.nE,f.UC,f.vq,l.TO],pipes:[h.X$],styles:[""]}),t})()}];let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=x.oAB({type:t}),t.\u0275inj=x.cJS({imports:[[U.Bz.forChild(P)],U.Bz]}),t})(),F=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=x.oAB({type:t}),t.\u0275inj=x.cJS({providers:[v],imports:[[R.ef,E.QW,b.Fk,f.xD,r.ez,o.u5,o.UX,i.p0,n.TU,l.lN,s.c,c.ot,m.Ps,d.Is,p.JX,g.FA,u.p9,T.Tx,Z.Cq,h.aw,A.Bb,y]]}),t})()}}]);