(self.webpackChunksmart=self.webpackChunksmart||[]).push([[8098],{28098:function(e,t,s){"use strict";s.r(t),s.d(t,{ScheduleModule:function(){return V}});var a=s(61116),i=s(31041),n=s(39199),r=s(5609),l=s(13070),d=s(9550),o=s(63589),c=s(84369),h=s(77307),u=s(13841),g=s(92935),p=s(59241),v=s(37112),m=s(69024),Z=s(40994),f=s(1325),_=s(57173),A=s(97070),T=s(87672),w=s(44716),D=s(51601),q=s(35729),b=s(35366),C=s(97425),k=s(42693),y=s(89647),E=s(51816),I=s(529),S=s(91681);let x=(()=>{class e{constructor(e){this.http=e,this.API_URL="assets/data/calendar.json",this.httpOptions={headers:new k.WM({"Content-Type":"application/json"})},this.dataChange=new C.X([])}get data(){return this.dataChange.value}getDialogData(){return this.dialogData}getAllCalendars(){return this.http.get(this.API_URL).pipe((0,E.K)(this.errorHandler))}deleteCalendar(e){this.dialogData=e}errorHandler(e){let t="";return t=e.error instanceof ErrorEvent?e.error.message:`Error Code: ${e.status}\nMessage: ${e.message}`,console.log(t),(0,y._)(t)}getScheduleList(){return this.http.get(`${I.N.apiUrl}/webRoutes/getScheduleList`).pipe((0,S.U)(e=>e))}getScheduleDetailsForInstructor(e,t){return this.http.post(`${I.N.apiUrl}/instructor/getScheduleDetailsForInstructor`,{client:e,authToken:t}).pipe((0,S.U)(e=>e))}}return e.\u0275fac=function(t){return new(t||e)(b.LFG(k.eN))},e.\u0275prov=b.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var U=s(50518),L=s(60649);let M=(()=>{class e{constructor(e,t,s,a,i){this.dialogRef=e,this.data=t,this.calendarService=s,this.fb=a,this.toastrService=i,this.showDeleteBtn=!1,this.action=t.action,"edit"===this.action&&(this.dialogTitle=t.calendar.title,this.calendar=t.calendar,console.log("this.calendar------------------",this.calendar))}onNoClick(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(g.so),b.Y36(g.WI),b.Y36(x),b.Y36(i.qu),b.Y36(U._W))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-form-dialog"]],decls:20,vars:7,consts:[[1,"addContainer"],[1,"modalHeader"],[1,"editRowModal"],[1,"modalHeader","clearfix"],[1,"modal-about"],[1,"font-weight-bold","p-t-5","p-l-10","font-17"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","",2,"overflow","hidden"],[1,"row"],[1,"list-group","list-group-unbordered"],[1,"list-group-item"],[1,"profile-desc-item","float-end"]],template:function(e,t){1&e&&(b.TgZ(0,"div",0),b.TgZ(1,"div",1),b.TgZ(2,"div",2),b.TgZ(3,"div",3),b.TgZ(4,"div",4),b.TgZ(5,"div",5),b._uU(6),b.ALo(7,"translate"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(8,"button",6),b.NdJ("click",function(){return t.dialogRef.close()}),b.TgZ(9,"mat-icon"),b._uU(10,"close"),b.qZA(),b.qZA(),b.qZA(),b.TgZ(11,"div",7),b.TgZ(12,"div",8),b.TgZ(13,"ul",9),b.TgZ(14,"li",10),b.TgZ(15,"b"),b._uU(16),b.ALo(17,"translate"),b.qZA(),b.TgZ(18,"div",11),b._uU(19),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA()),2&e&&(b.xp6(6),b.hij(" ",b.lcZ(7,3,"SCHEDULE.VIEWTITLE"),""),b.xp6(10),b.hij("",b.lcZ(17,5,"SCHEDULE.LIST.SCHEDULE")," "),b.xp6(3),b.Oqu(t.calendar.title))},directives:[c.lW,h.Hw,g.xY],pipes:[L.X$],styles:[""]}),e})();class F{constructor(e){this.id=e.id||this.getRandomID(),this.lead_time=e.lead_time||"",this.schedule_name=e.schedule_name||"",this.schedule_owner=e.schedule_owner||"",this.schedule_view=e.schedule_view||"",this.schedule_view_assignment=e.schedule_view_assignment||"",this.startDate=(0,a.p6)(new Date,"yyyy-MM-dd","en")||"",this.endDate=(0,a.p6)(new Date,"yyyy-MM-dd","en")||""}getRandomID(){const e=()=>(65536*(1+Math.random())|0).toString(16).substring(1);return e()+e()}}var O=s(60352),H=s(11757);const N=["calendar"];function P(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"li"),b.TgZ(1,"mat-checkbox",18),b.NdJ("change",function(t){const s=b.CHM(e).$implicit;return b.oxw().changeCategory(t,s)}),b._uU(2),b.qZA(),b.qZA()}if(2&e){const e=t.$implicit;b.xp6(1),b.Q6J("checked",e.checked)("value",e.status),b.xp6(1),b.hij(" ",e.status," ")}}const Y=[{path:"",component:(()=>{class e extends O.n{constructor(e,t,s,a){super(),this.fb=e,this.dialog=t,this.calendarService=s,this.snackBar=a,this.scheduleList=[],this.filterOptions="All",this.calendarData=[],this.filterItems=[],this.calendarOptions={headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},initialView:"dayGridMonth",displayEventTime:!1,weekends:!0,editable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,eventClick:this.handleEventClick.bind(this),eventsSet:this.handleEvents.bind(this)},this.dialogTitle="Add New Event",this.calendar=new F({}),this.addCusForm=this.createCalendarForm(this.calendar)}ngOnInit(){this.getScheduleDetails()}getScheduleDetails(){this.calendarData=[],this.calendarService.getScheduleDetailsForInstructor(sessionStorage.client,sessionStorage.currentUser).subscribe(e=>{console.log("----res['data']----",e.data);for(let t=0;t<e.data.length;t++)this.scheduleList.some(s=>s.status==e.data[t].status)||(this.scheduleList.push({status:e.data[t].status,checked:!0}),this.filterItems.push(e.data[t].status)),this.calendarData.push({title:e.data[t].status,start:new Date(e.data[t].startDate),end:new Date(e.data[t].endDate),className:e.data[t].schedule_color,id:e.data[t].id,lead_time:e.data[t].lead_time,schedule_name:e.data[t].schedule_id,schedule_view:e.data[t].schedule_view,schedule_view_assignment:e.data[t].schedule_assignment,startDate:new Date(e.data[t].startDate),endDate:new Date(e.data[t].endDate)});this.calendarEvents=this.calendarData,this.tempEvents=this.calendarEvents,this.calendarOptions.events=this.calendarEvents})}changeCategory(e,t){console.log("---------",t),e.checked?this.filterItems.push(t.status):this.filterItems.splice(this.filterItems.indexOf(t.status),1),this.filterEvent(this.filterItems)}filterEvent(e){const t=this.calendarEvents.filter(t=>e.map(e=>e).includes(t.title));this.calendarOptions.events=t}handleEventClick(e){this.eventClick(e)}eventClick(e){console.log("row===",e.event._def.extendedProps);const t={id:e.event.id,title:e.event.title,statusid:e.event._def.extendedProps.statusid,schedule_name:e.event._def.extendedProps.schedule_name,startDate:e.event.start};let s;s="true"===localStorage.getItem("isRtl")?"rtl":"ltr";const a=this.dialog.open(M,{data:{calendar:t,action:"edit"},direction:s});this.subs.sink=a.afterClosed().subscribe(e=>{"submit"===e?(this.getScheduleDetails(),this.addCusForm.reset()):"delete"===e&&this.getScheduleDetails()})}handleEvents(e){}createCalendarForm(e){return this.fb.group({id:[e.id],lead_time:[e.lead_time,[i.kI.required,i.kI.pattern("[a-zA-Z]+([a-zA-Z ]+)*")]],schedule_name:[e.schedule_name],schedule_view:[e.schedule_view],schedule_view_assignment:[e.schedule_view_assignment],startDate:[e.startDate,[i.kI.required]],endDate:[e.endDate,[i.kI.required]]})}showNotification(e,t,s,a){this.snackBar.open(t,"",{duration:2e3,verticalPosition:s,horizontalPosition:a,panelClass:e})}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(i.qu),b.Y36(g.uw),b.Y36(x),b.Y36(o.ux))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-add-schedule"]],viewQuery:function(e,t){if(1&e&&b.Gf(N,5),2&e){let e;b.iGM(e=b.CRH())&&(t.calendar=e.first)}},features:[b.qOj],decls:23,vars:5,consts:[[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"col-md-12","col-sm-12"],[1,"card"],[1,"card-body"],[1,"col-md-2","col-sm-12","p-l-30"],[1,"m-b-25"],[1,"filter-container"],[4,"ngFor","ngForOf"],[1,"col-md-10","col-sm-12"],[1,"panel-body"],[3,"options"],["color","primary",3,"checked","value","change"]],template:function(e,t){1&e&&(b.TgZ(0,"section",0),b.TgZ(1,"div",1),b.TgZ(2,"div",2),b.TgZ(3,"div",3),b.TgZ(4,"div",4),b.TgZ(5,"ul",5),b.TgZ(6,"li",6),b.TgZ(7,"h4",7),b._uU(8),b.ALo(9,"translate"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(10,"div",3),b.TgZ(11,"div",8),b.TgZ(12,"div",9),b.TgZ(13,"div",10),b.TgZ(14,"div",3),b.TgZ(15,"div",11),b._UZ(16,"div",12),b.TgZ(17,"div",13),b.TgZ(18,"ul"),b.YNc(19,P,3,3,"li",14),b.qZA(),b.qZA(),b.qZA(),b.TgZ(20,"div",15),b.TgZ(21,"div",16),b._UZ(22,"full-calendar",17),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA()),2&e&&(b.xp6(8),b.Oqu(b.lcZ(9,3,"SCHEDULE.TITLE")),b.xp6(11),b.Q6J("ngForOf",t.scheduleList),b.xp6(3),b.Q6J("options",t.calendarOptions))},directives:[a.sg,H.woE,Z.oG],pipes:[L.X$],styles:[""]}),e})()}];let R=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=b.oAB({type:e}),e.\u0275inj=b.cJS({imports:[[q.Bz.forChild(Y)],q.Bz]}),e})();var z=s(79961),j=s(46739),B=s(17647),G=s(95522),J=s(37192),X=s(279),$=s(9451),W=s(85256),Q=s(52352);H.z1U.registerPlugins([X.ZP,$.ZP,W.Z,Q.ZP]);let V=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=b.oAB({type:e}),e.\u0275inj=b.cJS({providers:[x],imports:[[B.xD,G.Hi,j.d,a.ez,i.u5,i.UX,n.p0,r.TU,l.lN,d.c,o.ZX,c.ot,h.Ps,g.Is,p.JX,v.g0,u.LD,m.FA,Z.p9,_.Nh,A.Tx,f.Ad,R,T.Cq,w.T5,D.yI,L.aw,z.Bb,H.z1U,J.Ll,J.x]]}),e})()}}]);