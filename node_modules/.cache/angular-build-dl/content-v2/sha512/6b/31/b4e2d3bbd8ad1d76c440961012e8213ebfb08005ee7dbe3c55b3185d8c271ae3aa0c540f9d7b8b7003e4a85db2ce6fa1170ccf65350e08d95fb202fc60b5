(self.webpackChunksmart=self.webpackChunksmart||[]).push([[7278],{47278:function(e,t,r){"use strict";r.r(t),r.d(t,{ProfileModule:function(){return w}});var i=r(61116),s=r(35729),a=r(31041),o=r(35366),u=r(28086),n=r(50518),l=r(57173),Z=r(13070),c=r(9550),g=r(84369),d=r(1325),m=r(77307);function p(e,t){1&e&&(o.TgZ(0,"mat-icon",46),o._uU(1,"face"),o.qZA(),o._uU(2," About Me "))}function q(e,t){1&e&&(o.TgZ(0,"div",23),o.TgZ(1,"h2"),o.TgZ(2,"strong"),o._uU(3,"Update Logo"),o.qZA(),o.qZA(),o.qZA())}function A(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",24),o.TgZ(1,"div",30),o.TgZ(2,"mat-form-field",42),o.TgZ(3,"ngx-mat-file-input",47),o.NdJ("change",function(t){return o.CHM(e),o.oxw().onFileChange(t)}),o.qZA(),o.TgZ(4,"mat-icon",44),o._uU(5,"cloud_upload"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(6,"button",45),o.NdJ("click",function(){return o.CHM(e),o.oxw().updateClientLogo()}),o._uU(7,"Save"),o.qZA(),o.qZA()}}function h(e,t){1&e&&(o.TgZ(0,"mat-icon",46),o._uU(1,"settings"),o.qZA(),o._uU(2," Settings "))}const T=[{path:"",component:(()=>{class e{constructor(e,t,r){this.fb=e,this.authService=t,this.toastrService=r}ngOnInit(){this.securityForm=this.fb.group({user_name:["",a.kI.required],new_username:["",a.kI.required],password:["",a.kI.required],current_password:["",a.kI.required],new_password:["",a.kI.required]}),this.accountsForm=this.fb.group({name:["",a.kI.required],mobile_no:["",a.kI.required],email_id:["",a.kI.required],profile:[""]}),this.authService.currentUserValue(sessionStorage.currentUser).subscribe(e=>{this.userDetails=e,this.securityForm.patchValue({user_name:this.userDetails.user_name,new_username:this.userDetails.user_name,password:this.userDetails.password}),this.accountsForm.patchValue({name:this.userDetails.name,mobile_no:this.userDetails.mobile_no,email_id:this.userDetails.email_id,profile:this.userDetails.img})})}onFileChange(e){const t=new FileReader;if(e.target.files&&e.target.files.length){const[r]=e.target.files;t.readAsDataURL(r),t.onload=()=>{this.newLogo=t.result}}}onFileChangeProfile(e){const t=new FileReader;if(e.target.files&&e.target.files.length){const[r]=e.target.files;t.readAsDataURL(r),t.onload=()=>{this.accountsForm.patchValue({profile:t.result})}}}updateClientLogo(){this.newLogo&&this.authService.updateClientLogo(sessionStorage.client,this.newLogo).subscribe(e=>{this.authService.currentUserSubject.next(!0),this.toastrService.success("Updated Successfully!!!")})}updateUserCredentials(){this.securityForm.value.password==this.securityForm.value.current_password?this.authService.updateUserCredentials(this.securityForm.value,sessionStorage.currentUser).subscribe(e=>{"Success"==e.status?(this.authService.currentUserSubject.next(!0),this.toastrService.success("Updated Successfully!!!")):this.toastrService.error("User Name Already Exists!!")}):this.toastrService.error("Current Password is not Correct!!")}updateAccountDetails(){this.authService.updateAccountDetails(this.accountsForm.value,sessionStorage.currentUser).subscribe(e=>{this.authService.currentUserSubject.next(!0),this.toastrService.success("Updated Successfully!!!"),this.authService.currentUserValue(sessionStorage.currentUser).subscribe(e=>{this.userDetails=e,this.securityForm.patchValue({user_name:this.userDetails.user_name,new_username:this.userDetails.user_name,password:this.userDetails.password}),this.accountsForm.patchValue({name:this.userDetails.name,mobile_no:this.userDetails.mobile_no,email_id:this.userDetails.email_id,profile:this.userDetails.img})})})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(a.qu),o.Y36(u.e),o.Y36(n._W))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-profile"]],decls:122,vars:13,consts:[[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"row","clearfix"],[1,"col-lg-4","col-md-12"],[1,"card"],[1,"m-b-20"],[1,"contact-grid"],[1,"profile-header","bg-dark"],[1,"user-name"],[1,"name-center"],["alt","",1,"user-img",2,"width","100%","height","100px",3,"src"],[1,"phone"],[1,"material-icons"],[1,"col-lg-8","col-md-12"],["mat-tab-label",""],[1,"col-lg-12","col-md-12","col-sm-12"],[1,"project_widget"],[1,"header"],[1,"body"],[1,"col-md-3","col-6","b-r"],[1,"text-muted"],["class","header",4,"ngIf"],["class","body",4,"ngIf"],[3,"formGroup"],[1,"example-container"],["appearance","fill",1,"example-full-width"],["matInput","","formControlName","new_username"],["matInput","","type","password","formControlName","current_password"],["matInput","","type","password","formControlName","new_password"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"col-md-12"],[1,"form-group"],["matInput","","formControlName","name"],[1,"col-lg-6","col-md-12"],["matInput","","formControlName","mobile_no"],["matInput","","formControlName","email_id"],[1,"example-full-width"],["placeholder","Profile",3,"change"],["matSuffix",""],["mat-raised-button","","color","primary",3,"click"],[1,"example-tab-icon","msr-2"],["placeholder","Company Logo",3,"change"]],template:function(e,t){1&e&&(o.TgZ(0,"section",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o.TgZ(4,"div",4),o.TgZ(5,"ul",5),o.TgZ(6,"li",6),o.TgZ(7,"h4",7),o._uU(8,"Profile"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(9,"div",8),o.TgZ(10,"div",9),o.TgZ(11,"div",10),o.TgZ(12,"div",11),o.TgZ(13,"div",12),o.TgZ(14,"div",13),o.TgZ(15,"div",14),o._uU(16),o.qZA(),o.TgZ(17,"div",15),o._uU(18),o.qZA(),o.qZA(),o._UZ(19,"img",16),o.TgZ(20,"div"),o.TgZ(21,"span",17),o.TgZ(22,"i",18),o._uU(23,"phone"),o.qZA(),o._uU(24),o.qZA(),o.qZA(),o.TgZ(25,"div"),o.TgZ(26,"span",17),o.TgZ(27,"i",18),o._uU(28,"email"),o.qZA(),o._uU(29),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(30,"div",19),o.TgZ(31,"div",10),o.TgZ(32,"mat-tab-group"),o.TgZ(33,"mat-tab"),o.YNc(34,p,3,0,"ng-template",20),o.TgZ(35,"div",21),o.TgZ(36,"div",22),o.TgZ(37,"div",23),o.TgZ(38,"h2"),o.TgZ(39,"strong"),o._uU(40,"About"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(41,"div",24),o.TgZ(42,"div",3),o.TgZ(43,"div",25),o.TgZ(44,"strong"),o._uU(45,"Full Name"),o.qZA(),o._UZ(46,"br"),o.TgZ(47,"p",26),o._uU(48),o.qZA(),o.qZA(),o.TgZ(49,"div",25),o.TgZ(50,"strong"),o._uU(51,"Mobile"),o.qZA(),o._UZ(52,"br"),o.TgZ(53,"p",26),o._uU(54),o.qZA(),o.qZA(),o.TgZ(55,"div",25),o.TgZ(56,"strong"),o._uU(57,"Email"),o.qZA(),o._UZ(58,"br"),o.TgZ(59,"p",26),o._uU(60),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.YNc(61,q,4,0,"div",27),o.YNc(62,A,8,0,"div",28),o.qZA(),o.qZA(),o.qZA(),o.TgZ(63,"mat-tab"),o.YNc(64,h,3,0,"ng-template",20),o.TgZ(65,"div",23),o.TgZ(66,"h2"),o.TgZ(67,"strong"),o._uU(68,"Security"),o.qZA(),o._uU(69," Settings"),o.qZA(),o.qZA(),o.TgZ(70,"div",24),o.TgZ(71,"form",29),o.TgZ(72,"div",30),o.TgZ(73,"mat-form-field",31),o.TgZ(74,"mat-label"),o._uU(75,"Username"),o.qZA(),o._UZ(76,"input",32),o.qZA(),o.TgZ(77,"mat-form-field",31),o.TgZ(78,"mat-label"),o._uU(79,"Current Password"),o.qZA(),o._UZ(80,"input",33),o.qZA(),o.TgZ(81,"mat-form-field",31),o.TgZ(82,"mat-label"),o._uU(83,"New Password"),o.qZA(),o._UZ(84,"input",34),o.qZA(),o.qZA(),o.TgZ(85,"button",35),o.NdJ("click",function(){return t.updateUserCredentials()}),o._uU(86,"Save"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(87,"div",23),o.TgZ(88,"h2"),o.TgZ(89,"strong"),o._uU(90,"Account"),o.qZA(),o._uU(91," Settings"),o.qZA(),o.qZA(),o.TgZ(92,"div",24),o.TgZ(93,"form",29),o.TgZ(94,"div",8),o.TgZ(95,"div",36),o.TgZ(96,"div",37),o.TgZ(97,"mat-form-field",31),o.TgZ(98,"mat-label"),o._uU(99,"Name"),o.qZA(),o._UZ(100,"input",38),o.qZA(),o.qZA(),o.qZA(),o.TgZ(101,"div",39),o.TgZ(102,"div",37),o.TgZ(103,"mat-form-field",31),o.TgZ(104,"mat-label"),o._uU(105,"Mobile No"),o.qZA(),o._UZ(106,"input",40),o.qZA(),o.qZA(),o.qZA(),o.TgZ(107,"div",39),o.TgZ(108,"div",37),o.TgZ(109,"mat-form-field",31),o.TgZ(110,"mat-label"),o._uU(111,"Email Id"),o.qZA(),o._UZ(112,"input",41),o.qZA(),o.qZA(),o.qZA(),o.TgZ(113,"div",36),o.TgZ(114,"div",37),o.TgZ(115,"mat-form-field",42),o.TgZ(116,"ngx-mat-file-input",43),o.NdJ("change",function(e){return t.onFileChangeProfile(e)}),o.qZA(),o.TgZ(117,"mat-icon",44),o._uU(118,"cloud_upload"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(119,"div",36),o.TgZ(120,"button",45),o.NdJ("click",function(){return t.updateAccountDetails()}),o._uU(121,"Save Changes"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(16),o.Oqu(t.userDetails.name),o.xp6(2),o.Oqu(t.userDetails.role),o.xp6(1),o.s9C("src",t.userDetails.img?t.userDetails.img:"assets/images/nouser.png",o.LSH),o.xp6(5),o.Oqu(t.userDetails.mobile_no),o.xp6(5),o.Oqu(t.userDetails.email_id),o.xp6(19),o.Oqu(t.userDetails.name),o.xp6(6),o.Oqu(t.userDetails.mobile_no),o.xp6(6),o.Oqu(t.userDetails.email_id),o.xp6(1),o.Q6J("ngIf","Admin"==t.userDetails.role),o.xp6(1),o.Q6J("ngIf","Admin"==t.userDetails.role),o.xp6(9),o.Q6J("formGroup",t.securityForm),o.xp6(14),o.Q6J("disabled",!t.securityForm.valid),o.xp6(8),o.Q6J("formGroup",t.accountsForm))},directives:[l.SP,l.uX,l.uD,i.O5,a._Y,a.JL,a.sg,Z.KE,Z.hX,c.Nt,a.Fj,a.JJ,a.u,g.lW,d.Yh,m.Hw,Z.R9],styles:[""]}),e})()}];let f=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[s.Bz.forChild(T)],s.Bz]}),e})();var _=r(63589),v=r(13841),U=r(97070),b=r(40994);let w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[i.ez,f,U.Tx,g.ot,m.Ps,d.Ad,a.u5,a.UX,v.LD,_.ZX,c.c,Z.lN,b.p9,l.Nh]]}),e})()}}]);