(self.webpackChunksmart=self.webpackChunksmart||[]).push([[2538],{2538:function(e,t,i){"use strict";i.r(t),i.d(t,{LicenseModule:function(){return ie}});var l=i(61116),r=i(31041),a=i(39199),s=i(5609),n=i(13070),o=i(9550),c=i(63589),d=i(84369),Z=i(77307),u=i(13841),g=i(92935),m=i(59241),p=i(37112),T=i(69024),h=i(40994),A=i(1325),L=i(57173),q=i(97070),_=i(87672),f=i(44716),I=i(51601),E=i(35729),S=i(17647),b=i(35366),v=i(42693),N=i(97425),C=i(91681),x=i(529);let w=(()=>{class e{constructor(e){this.http=e,this.isTblLoading=!0,this.dataChange=new N.X([])}get data(){return this.dataChange.value}setLicenseDetails(e){return this.http.post(`${x.N.apiUrl}/webRoutes/setLicenseDetails`,e).pipe((0,C.U)(e=>e))}getLicenseListPerClient(e){return this.http.post(`${x.N.apiUrl}/webRoutes/getLicenseListPerClient`,{client:e}).pipe((0,C.U)(e=>(this.isTblLoading=!1,this.dataChange.next(e),e)))}deleteLicenseDetails(e,t,i){return this.http.post(`${x.N.apiUrl}/webRoutes/deleteLicenseDetails`,{rowToDelete:e,authToken:t,client:i}).pipe((0,C.U)(e=>e))}getLicenseToEdit(e,t){return this.http.post(`${x.N.apiUrl}/webRoutes/getLicenseToEdit`,{licenseId:e,client:t}).pipe((0,C.U)(e=>e))}updateLicenseDetails(e){return this.http.post(`${x.N.apiUrl}/webRoutes/updateLicenseDetails`,e).pipe((0,C.U)(e=>e))}getClientCodeForFolder(e){return this.http.post(`${x.N.apiUrl}/webRoutes/getClientCodeForFolder`,{client:e}).pipe((0,C.U)(e=>e))}}return e.\u0275fac=function(t){return new(t||e)(b.LFG(v.eN))},e.\u0275prov=b.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var U=i(24486),F=i(50518),k=i(60649);function y(e,t){if(1&e&&(b.TgZ(0,"td",36),b._UZ(1,"img",37),b.qZA()),2&e){const e=t.value;b.xp6(1),b.s9C("src",e||"assets/images/nologo.png",b.LSH)}}function J(e,t){if(1&e&&(b.TgZ(0,"td",36),b._UZ(1,"img",37),b.qZA()),2&e){const e=t.value;b.xp6(1),b.s9C("src",e||"assets/images/nologo.png",b.LSH)}}function O(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"span"),b.TgZ(1,"button",38),b.NdJ("click",function(){const t=b.CHM(e),i=t.row,l=t.rowIndex;return b.oxw().editLicense(i,l)}),b.TgZ(2,"mat-icon",39),b._uU(3,"edit "),b.qZA(),b.qZA(),b.TgZ(4,"button",40),b.NdJ("click",function(){const t=b.CHM(e),i=t.row,l=t.rowIndex,r=b.oxw(),a=b.MAs(58);return r.deleteLicense(i,l,a)}),b.TgZ(5,"mat-icon",41),b._uU(6,"delete "),b.qZA(),b.qZA(),b.qZA()}}function D(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"div",42),b.TgZ(1,"h4",43),b.TgZ(2,"div",44),b.TgZ(3,"div",45),b.TgZ(4,"div",46),b._uU(5),b.ALo(6,"translate"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(7,"button",47),b.NdJ("click",function(){return b.CHM(e).$implicit.dismiss("Cross click")}),b.TgZ(8,"span",48),b.TgZ(9,"i",49),b._uU(10,"close"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(11,"div",50),b.TgZ(12,"p"),b._uU(13),b.ALo(14,"translate"),b.qZA(),b.TgZ(15,"div",51),b.TgZ(16,"div",52),b.TgZ(17,"button",53),b.NdJ("click",function(){return b.CHM(e),b.oxw().deleteLicensDetails()}),b._uU(18),b.ALo(19,"translate"),b.qZA(),b.TgZ(20,"button",54),b.NdJ("click",function(){return b.CHM(e).$implicit.close()}),b._uU(21),b.ALo(22,"translate"),b.qZA(),b.qZA(),b.qZA(),b.qZA()}2&e&&(b.xp6(5),b.hij(" ",b.lcZ(6,4,"LICENSE.DELETETITLE"),""),b.xp6(8),b.Oqu(b.lcZ(14,6,"BUTTON.CONFIRMATION")),b.xp6(5),b.Oqu(b.lcZ(19,8,"BUTTON.DEL-BTN")),b.xp6(3),b.Oqu(b.lcZ(22,10,"BUTTON.CANCEL-BTN")))}let Y=(()=>{class e{constructor(e,t,i,l,r,a,s){this.httpClient=e,this.dialog=t,this.licenseService=i,this.snackBar=l,this.router=r,this.modalService=a,this.toastrService=s,this.columns=[{name:"License Class"},{name:"Minimum Age"}],this.data=[],this.filteredData=[],this.translateVal="ml"==localStorage.lang?"malay":"english"}ngOnInit(){this.loadData()}refresh(){this.loadData()}addNewLicense(){this.router.navigate(["/admin/license/add-license"])}loadData(){this.licenseService.getLicenseListPerClient(sessionStorage.client).subscribe(e=>{this.data=e.data,this.filteredData=e.data})}filterDatatable(e){const t=e.target.value.toLowerCase(),i=this.columns.length,l=Object.keys(this.filteredData[0]);this.data=this.filteredData.filter(function(e){for(let r=0;r<i;r++)if(-1!==e[l[r]].toString().toLowerCase().indexOf(t)||!t)return!0}),this.table.offset=0}editLicense(e,t){console.log("rowww===",e),this.router.navigate(["/admin/license/edit-license",e.id])}deleteLicense(e,t,i){this.modalService.open(i,{ariaLabelledBy:"modal-basic-title"}),this.rowToDelete=e}deleteLicensDetails(){this.licenseService.deleteLicenseDetails(this.rowToDelete,sessionStorage.currentUser,sessionStorage.client).subscribe(e=>{"Success"==e.status&&(this.toastrService.success("Deleted Successfully!!!"),this.modalService.dismissAll(),this.loadData())})}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(v.eN),b.Y36(g.uw),b.Y36(w),b.Y36(c.ux),b.Y36(E.F0),b.Y36(U.FF),b.Y36(F._W))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-license-list"]],viewQuery:function(e,t){if(1&e&&b.Gf(S.nE,5),2&e){let e;b.iGM(e=b.CRH())&&(t.table=e.first)}},decls:59,vars:28,consts:[[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"col-md-12"],[1,"mt-5"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"body"],[1,"table-responsive"],[1,"materialTableHeader"],[1,"col-8"],[1,"header-buttons-left","ml-0"],[1,"dropdown"],[1,"dropdown","m-l-20"],["for","search-input"],[1,"material-icons","search-icon"],["placeholder","Search","type","text","aria-label","Search box",1,"browser-default","search-field",3,"keyup"],[1,"col-4"],[1,"header-buttons"],[1,"icon-button-demo"],["mat-mini-fab","","color","primary",3,"click"],[1,"col-white"],[1,"material",3,"rows","columns","sortType","columnMode","headerHeight","footerHeight","rowHeight","limit"],["table",""],["name","License Image","sortable","false","prop","license_image",3,"width"],["ngx-datatable-cell-template",""],["name","License Flow","sortable","false","prop","license_flow",3,"width"],["prop","license_class",3,"name","width"],["prop","minimum_age",3,"name","width"],["sortable","false",3,"name","width"],["deleteRecord",""],[1,"table-img","padding-0"],["width","40",3,"src"],["mat-icon-button","","color","accent",1,"btn-tbl-edit",3,"click"],["aria-label","Edit",1,"col-white"],["mat-icon-button","","color","accent",1,"btn-tbl-delete",3,"click"],["aria-label","Delete",1,"col-white"],[1,"modal-header","deleteRowModal"],["id","modal-basic-title",1,"modal-title"],[1,"modal-header"],[1,"modal-about"],[1,"font-weight-bold","p-t-10","font-17"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"material-icons"],[1,"modal-body"],[1,"modal-footer"],[1,"button-demo"],["mat-raised-button","","type","submit","color","primary",3,"click"],["mat-button","","type","button",3,"click"]],template:function(e,t){1&e&&(b.TgZ(0,"section",0),b.TgZ(1,"div",1),b.TgZ(2,"div",2),b.TgZ(3,"div",3),b.TgZ(4,"div",4),b.TgZ(5,"ul",5),b.TgZ(6,"li",6),b.TgZ(7,"h4",7),b._uU(8),b.ALo(9,"translate"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(10,"div",3),b.TgZ(11,"div",8),b.TgZ(12,"div",9),b.TgZ(13,"div",10),b.TgZ(14,"div",11),b.TgZ(15,"div",12),b.TgZ(16,"div",13),b.TgZ(17,"div",14),b.TgZ(18,"div",3),b.TgZ(19,"div",15),b.TgZ(20,"ul",16),b.TgZ(21,"li",17),b.TgZ(22,"h2"),b.TgZ(23,"strong"),b._uU(24),b.ALo(25,"translate"),b.qZA(),b.qZA(),b.qZA(),b.TgZ(26,"li",18),b.TgZ(27,"label",19),b.TgZ(28,"i",20),b._uU(29,"search"),b.qZA(),b.qZA(),b.TgZ(30,"input",21),b.NdJ("keyup",function(e){return t.filterDatatable(e)}),b.qZA(),b.qZA(),b._UZ(31,"li"),b.qZA(),b.qZA(),b.TgZ(32,"div",22),b.TgZ(33,"ul",23),b.TgZ(34,"li"),b.TgZ(35,"div",24),b.TgZ(36,"button",25),b.NdJ("click",function(){return t.addNewLicense()}),b.TgZ(37,"mat-icon",26),b._uU(38,"add"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(39,"li"),b.TgZ(40,"div",24),b.TgZ(41,"button",25),b.NdJ("click",function(){return t.refresh()}),b.TgZ(42,"mat-icon",26),b._uU(43,"refresh "),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(44,"ngx-datatable",27,28),b.TgZ(46,"ngx-datatable-column",29),b.YNc(47,y,2,1,"ng-template",30),b.qZA(),b.TgZ(48,"ngx-datatable-column",31),b.YNc(49,J,2,1,"ng-template",30),b.qZA(),b._UZ(50,"ngx-datatable-column",32),b.ALo(51,"translate"),b._UZ(52,"ngx-datatable-column",33),b.ALo(53,"translate"),b.TgZ(54,"ngx-datatable-column",34),b.ALo(55,"translate"),b.YNc(56,O,7,0,"ng-template",30),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.YNc(57,D,23,12,"ng-template",null,35,b.W1O)),2&e&&(b.xp6(8),b.Oqu(b.lcZ(9,18,"LICENSE.LISTTITLE")),b.xp6(16),b.Oqu(b.lcZ(25,20,"LICENSE.LISTTITLE")),b.xp6(20),b.Q6J("rows",t.data)("columns",t.columns)("sortType","multi")("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","60")("limit",10),b.xp6(2),b.Q6J("width",100),b.xp6(2),b.Q6J("width",100),b.xp6(2),b.s9C("name",b.lcZ(51,22,"LICENSE.LIST.LICENSE-CLASS")),b.Q6J("width",130),b.xp6(2),b.s9C("name",b.lcZ(53,24,"LICENSE.LIST.MIN-AGE")),b.Q6J("width",130),b.xp6(2),b.s9C("name",b.lcZ(55,26,"LICENSE.ACTIONS")),b.Q6J("width",120))},directives:[d.lW,Z.Hw,S.nE,S.UC,S.vq],pipes:[k.X$],styles:[""]}),e})();var R=i(22567),Q=i(94784),M=i(46739);function H(e,t){1&e&&(b.TgZ(0,"mat-error"),b._uU(1),b.ALo(2,"translate"),b.qZA()),2&e&&(b.xp6(1),b.hij(" ",b.lcZ(2,1,"LICENSE.LIST.LICENSE-CLASS")," is required "))}function B(e,t){1&e&&(b.TgZ(0,"mat-error"),b._uU(1),b.ALo(2,"translate"),b.qZA()),2&e&&(b.xp6(1),b.hij(" ",b.lcZ(2,1,"LICENSE.LIST.LICENSE-ENGLISH")," is required "))}function j(e,t){1&e&&(b.TgZ(0,"mat-error"),b._uU(1),b.ALo(2,"translate"),b.qZA()),2&e&&(b.xp6(1),b.hij(" ",b.lcZ(2,1,"LICENSE.LIST.LICENSE-MALAY")," is required "))}function G(e,t){1&e&&(b.TgZ(0,"mat-error"),b._uU(1),b.ALo(2,"translate"),b.qZA()),2&e&&(b.xp6(1),b.hij(" ",b.lcZ(2,1,"LICENSE.LIST.CRITERIA-ENGLISH")," is required "))}function X(e,t){1&e&&(b.TgZ(0,"mat-error"),b._uU(1),b.ALo(2,"translate"),b.qZA()),2&e&&(b.xp6(1),b.hij(" ",b.lcZ(2,1,"LICENSE.LIST.CRITERIA-MALAY")," is required "))}function $(e,t){1&e&&(b.TgZ(0,"mat-error"),b._uU(1),b.ALo(2,"translate"),b.qZA()),2&e&&(b.xp6(1),b.hij(" ",b.lcZ(2,1,"LICENSE.LIST.LICENSE-CLASS")," is required "))}function W(e,t){1&e&&(b.TgZ(0,"mat-error"),b._uU(1),b.ALo(2,"translate"),b.qZA()),2&e&&(b.xp6(1),b.hij(" ",b.lcZ(2,1,"LICENSE.LIST.LICENSE-ENGLISH")," is required "))}function z(e,t){1&e&&(b.TgZ(0,"mat-error"),b._uU(1),b.ALo(2,"translate"),b.qZA()),2&e&&(b.xp6(1),b.hij(" ",b.lcZ(2,1,"LICENSE.LIST.LICENSE-MALAY")," is required "))}function P(e,t){1&e&&(b.TgZ(0,"mat-error"),b._uU(1),b.ALo(2,"translate"),b.qZA()),2&e&&(b.xp6(1),b.hij(" ",b.lcZ(2,1,"LICENSE.LIST.CRITERIA-ENGLISH")," is required "))}function V(e,t){1&e&&(b.TgZ(0,"mat-error"),b._uU(1),b.ALo(2,"translate"),b.qZA()),2&e&&(b.xp6(1),b.hij(" ",b.lcZ(2,1,"LICENSE.LIST.CRITERIA-MALAY")," is required "))}const K=[{path:"license-list",component:Y},{path:"add-license",component:(()=>{class e{constructor(e,t,i,l,r,a,s){this.cdRef=e,this.fb=t,this.languageService=i,this.toastrService=l,this.licenseService=r,this.router=a,this.route=s,this.Editor=R}ngOnInit(){this.addLicenseForm=this.fb.group({license_class:["",r.kI.required],minimum_age:[""],license_desc_english:["",r.kI.required],license_desc_malay:["",r.kI.required],criteria_english:["",r.kI.required],criteria_malay:["",r.kI.required],license_flow:["",r.kI.required],license_flow_name:["",r.kI.required],license_image:["",r.kI.required],license_image_name:["",r.kI.required],cdl_req:[""]}),this.licenseService.getClientCodeForFolder(sessionStorage.client).subscribe(e=>{this.clientCode=e.data[0].client_code})}onFileChangeLicenseFlow(e){const t=new FileReader;if(e.target.files&&e.target.files.length){const[i]=e.target.files;t.readAsDataURL(i),t.onload=()=>{this.addLicenseForm.patchValue({license_flow:i}),console.log("this.documentForm===",this.addLicenseForm)}}}onFileChangeLicenseImage(e){const t=new FileReader;if(e.target.files&&e.target.files.length){const[i]=e.target.files;t.readAsDataURL(i),t.onload=()=>{this.addLicenseForm.patchValue({license_image:i}),console.log("this.documentForm===",this.addLicenseForm)}}}setLicenseDetails(){console.log("Editor===",this.addLicenseForm.value);const e=new FormData;e.append("baseRoot","root/"+this.clientCode+"/License/"+this.addLicenseForm.value.license_class),e.append("licenseData",JSON.stringify(this.addLicenseForm.value)),e.append("authToken",sessionStorage.currentUser),e.append("client",sessionStorage.client),e.append("licenseImage",this.addLicenseForm.value.license_image),e.append("licenseFlow",this.addLicenseForm.value.license_flow),this.licenseService.setLicenseDetails(e).subscribe(e=>{"Success"==e.status?(this.toastrService.success("Registered Successfully!!"),this.addLicenseForm.reset(),this.router.navigate(["/admin/license/license-list"])):this.toastrService.error(e.status)})}goBack(){this.router.navigate(["/admin/license/license-list"])}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(b.sBO),b.Y36(r.qu),b.Y36(Q.T),b.Y36(F._W),b.Y36(w),b.Y36(E.F0),b.Y36(E.gz))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-add-license"]],decls:88,vars:50,consts:[[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"row","clearfix"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"header"],[1,"body"],[1,"m-4",3,"formGroup"],[1,"col-xl-4","col-lg-4","col-md-12","col-sm-12","mb-2"],["appearance","outline",1,"example-full-width","mb-3"],["matInput","","formControlName","license_class","required",""],[4,"ngIf"],["matInput","","formControlName","minimum_age","maxlength","2"],["formControlName","cdl_req",1,"example-margin"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2"],["formControlName","license_desc_english",3,"editor"],["formControlName","license_desc_malay",3,"editor"],["formControlName","criteria_english",3,"editor"],["formControlName","criteria_malay",3,"editor"],["formControlName","license_image_name","required","",3,"change"],["matSuffix",""],["formControlName","license_flow_name","required","",3,"change"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],["mat-raised-button","","color","primary",1,"btn-space",3,"disabled","click"],["type","button","mat-button","",3,"click"]],template:function(e,t){1&e&&(b.TgZ(0,"section",0),b.TgZ(1,"div",1),b.TgZ(2,"div",2),b.TgZ(3,"div",3),b.TgZ(4,"div",4),b.TgZ(5,"ul",5),b.TgZ(6,"li",6),b.TgZ(7,"h4",7),b._uU(8),b.ALo(9,"translate"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(10,"div",8),b.TgZ(11,"div",9),b.TgZ(12,"div",10),b.TgZ(13,"div",11),b.TgZ(14,"h2"),b._uU(15),b.ALo(16,"translate"),b.qZA(),b.qZA(),b.TgZ(17,"div",12),b.TgZ(18,"form",13),b.TgZ(19,"div",3),b.TgZ(20,"div",14),b.TgZ(21,"mat-form-field",15),b.TgZ(22,"mat-label"),b._uU(23),b.ALo(24,"translate"),b.qZA(),b._UZ(25,"input",16),b.YNc(26,H,3,3,"mat-error",17),b.qZA(),b.qZA(),b.TgZ(27,"div",14),b.TgZ(28,"mat-form-field",15),b.TgZ(29,"mat-label"),b._uU(30),b.ALo(31,"translate"),b.qZA(),b._UZ(32,"input",18),b.qZA(),b.qZA(),b.TgZ(33,"div",14),b.TgZ(34,"mat-checkbox",19),b._uU(35),b.ALo(36,"translate"),b.qZA(),b.qZA(),b.qZA(),b.TgZ(37,"div",3),b.TgZ(38,"div",20),b.TgZ(39,"mat-label"),b._uU(40),b.ALo(41,"translate"),b.qZA(),b._UZ(42,"ckeditor",21),b.YNc(43,B,3,3,"mat-error",17),b.qZA(),b.TgZ(44,"div",20),b.TgZ(45,"mat-label"),b._uU(46),b.ALo(47,"translate"),b.qZA(),b._UZ(48,"ckeditor",22),b.YNc(49,j,3,3,"mat-error",17),b.qZA(),b.qZA(),b.TgZ(50,"div",3),b.TgZ(51,"div",20),b.TgZ(52,"mat-label"),b._uU(53),b.ALo(54,"translate"),b.qZA(),b._UZ(55,"ckeditor",23),b.YNc(56,G,3,3,"mat-error",17),b.qZA(),b.TgZ(57,"div",20),b.TgZ(58,"mat-label"),b._uU(59),b.ALo(60,"translate"),b.qZA(),b._UZ(61,"ckeditor",24),b.YNc(62,X,3,3,"mat-error",17),b.qZA(),b.qZA(),b.TgZ(63,"div",3),b.TgZ(64,"div",20),b.TgZ(65,"mat-form-field",15),b.TgZ(66,"mat-label"),b._uU(67),b.ALo(68,"translate"),b.qZA(),b.TgZ(69,"ngx-mat-file-input",25),b.NdJ("change",function(e){return t.onFileChangeLicenseImage(e)}),b.qZA(),b.TgZ(70,"mat-icon",26),b._uU(71,"cloud_upload"),b.qZA(),b.qZA(),b.qZA(),b.TgZ(72,"div",20),b.TgZ(73,"mat-form-field",15),b.TgZ(74,"mat-label"),b._uU(75),b.ALo(76,"translate"),b.qZA(),b.TgZ(77,"ngx-mat-file-input",27),b.NdJ("change",function(e){return t.onFileChangeLicenseFlow(e)}),b.qZA(),b.TgZ(78,"mat-icon",26),b._uU(79,"cloud_upload"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(80,"div",3),b.TgZ(81,"div",28),b.TgZ(82,"button",29),b.NdJ("click",function(){return t.setLicenseDetails()}),b._uU(83),b.ALo(84,"translate"),b.qZA(),b.TgZ(85,"button",30),b.NdJ("click",function(){return t.goBack()}),b._uU(86),b.ALo(87,"translate"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA()),2&e&&(b.xp6(8),b.Oqu(b.lcZ(9,24,"LICENSE.TITLE")),b.xp6(7),b.Oqu(b.lcZ(16,26,"LICENSE.TITLE")),b.xp6(3),b.Q6J("formGroup",t.addLicenseForm),b.xp6(5),b.Oqu(b.lcZ(24,28,"LICENSE.LIST.LICENSE-CLASS")),b.xp6(3),b.Q6J("ngIf",t.addLicenseForm.get("license_class").hasError("required")),b.xp6(4),b.Oqu(b.lcZ(31,30,"LICENSE.LIST.MIN-AGE")),b.xp6(5),b.Oqu(b.lcZ(36,32,"LICENSE.LIST.CDL-REQ")),b.xp6(5),b.hij("",b.lcZ(41,34,"LICENSE.LIST.LICENSE-ENGLISH"),"*"),b.xp6(2),b.Q6J("editor",t.Editor),b.xp6(1),b.Q6J("ngIf",t.addLicenseForm.get("license_desc_english").hasError("required")),b.xp6(3),b.hij("",b.lcZ(47,36,"LICENSE.LIST.LICENSE-MALAY"),"*"),b.xp6(2),b.Q6J("editor",t.Editor),b.xp6(1),b.Q6J("ngIf",t.addLicenseForm.get("license_desc_malay").hasError("required")),b.xp6(4),b.hij("",b.lcZ(54,38,"LICENSE.LIST.CRITERIA-ENGLISH"),"*"),b.xp6(2),b.Q6J("editor",t.Editor),b.xp6(1),b.Q6J("ngIf",t.addLicenseForm.get("criteria_english").hasError("required")),b.xp6(3),b.hij("",b.lcZ(60,40,"LICENSE.LIST.CRITERIA-MALAY"),"*"),b.xp6(2),b.Q6J("editor",t.Editor),b.xp6(1),b.Q6J("ngIf",t.addLicenseForm.get("criteria_malay").hasError("required")),b.xp6(5),b.Oqu(b.lcZ(68,42,"LICENSE.LIST.LICENSE-IMAGE")),b.xp6(8),b.Oqu(b.lcZ(76,44,"LICENSE.LIST.LICENSE-FLOW")),b.xp6(7),b.Q6J("disabled",!t.addLicenseForm.valid),b.xp6(1),b.Oqu(b.lcZ(84,46,"BUTTON.ADD-BTN")),b.xp6(3),b.Oqu(b.lcZ(87,48,"BUTTON.CANCEL-BTN")))},directives:[r._Y,r.JL,r.sg,n.KE,n.hX,o.Nt,r.Fj,r.JJ,r.u,r.Q7,l.O5,r.nD,h.oG,M.u,A.Yh,Z.Hw,n.R9,d.lW,n.TO],pipes:[k.X$],styles:["[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:400px}"]}),e})()},{path:"edit-license/:id",component:(()=>{class e{constructor(e,t,i,l,a,s,n){this.cdRef=e,this.fb=t,this.languageService=i,this.toastrService=l,this.licenseService=a,this.router=s,this.route=n,this.Editor=R,this.licenseId=this.route.snapshot.paramMap.get("id"),this.editLicenseForm=this.fb.group({id:[""],prev_license_class:["",r.kI.required],license_class:["",r.kI.required],minimum_age:[""],license_desc_english:["",r.kI.required],license_desc_malay:["",r.kI.required],criteria_english:["",r.kI.required],criteria_malay:["",r.kI.required],license_flow:["",r.kI.required],license_flow_name:["",r.kI.required],license_image:["",r.kI.required],license_image_name:["",r.kI.required],cdl_req:[""]})}ngOnInit(){this.licenseService.getClientCodeForFolder(sessionStorage.client).subscribe(e=>{this.clientCode=e.data[0].client_code}),this.licenseService.getLicenseToEdit(this.licenseId,sessionStorage.client).subscribe(e=>{let t=e.data[0];this.editLicenseForm.patchValue({id:t.id,prev_license_class:t.license_class,license_class:t.license_class,cdl_req:1==t.cdl_requirement,minimum_age:t.minimum_age,license_desc_english:t.license_desc_english,license_desc_malay:t.license_desc_malay,criteria_english:t.criteria_english,criteria_malay:t.criteria_malay,license_flow:t.license_flow,license_flow_name:t.license_flow,license_image:t.license_image,license_image_name:t.license_image})})}onFileChangeLicenseFlow(e){const t=new FileReader;if(e.target.files&&e.target.files.length){const[i]=e.target.files;t.readAsDataURL(i),t.onload=()=>{this.licenseFlow_preview=t.result,this.editLicenseForm.patchValue({license_flow:i}),console.log("this.documentForm===",this.editLicenseForm)}}}onFileChangeLicenseImage(e){const t=new FileReader;if(e.target.files&&e.target.files.length){const[i]=e.target.files;t.readAsDataURL(i),t.onload=()=>{this.licenseImg_preview=t.result,this.editLicenseForm.patchValue({license_image:i}),console.log("this.documentForm===",this.editLicenseForm)}}}goBack(){this.router.navigate(["/admin/license/license-list"])}updateLicenseDetails(){console.log("Editor===",this.editLicenseForm.value);const e=new FormData;e.append("baseRoot","root/"+this.clientCode+"/License/"+this.editLicenseForm.value.license_class),e.append("licenseData",JSON.stringify(this.editLicenseForm.value)),e.append("authToken",sessionStorage.currentUser),e.append("client",sessionStorage.client),e.append("licenseImage",this.editLicenseForm.value.license_image),e.append("licenseFlow",this.editLicenseForm.value.license_flow),this.licenseService.updateLicenseDetails(e).subscribe(e=>{"Success"==e.status?(this.toastrService.success("Updated Successfully!!"),this.editLicenseForm.reset(),this.router.navigate(["/admin/license/license-list"])):this.toastrService.error(e.status)})}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(b.sBO),b.Y36(r.qu),b.Y36(Q.T),b.Y36(F._W),b.Y36(w),b.Y36(E.F0),b.Y36(E.gz))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-edit-license"]],decls:96,vars:52,consts:[[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"row","clearfix"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"header"],[1,"body"],[1,"m-4",3,"formGroup"],[1,"col-xl-4","col-lg-4","col-md-12","col-sm-12","mb-2"],["appearance","outline",1,"example-full-width","mb-3"],["matInput","","formControlName","license_class","required",""],[4,"ngIf"],["matInput","","formControlName","minimum_age"],["formControlName","cdl_req",1,"example-margin"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2"],["formControlName","license_desc_english",3,"editor"],["formControlName","license_desc_malay",3,"editor"],["formControlName","criteria_english",3,"editor"],["formControlName","criteria_malay",3,"editor"],[2,"width","100%","height","50%",3,"src"],["formControlName","license_image_name","required","",3,"change"],["matSuffix",""],["formControlName","license_flow_name","required","",3,"change"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],["mat-raised-button","","color","primary",1,"btn-space",3,"disabled","click"],["type","button","mat-button","",3,"click"]],template:function(e,t){1&e&&(b.TgZ(0,"section",0),b.TgZ(1,"div",1),b.TgZ(2,"div",2),b.TgZ(3,"div",3),b.TgZ(4,"div",4),b.TgZ(5,"ul",5),b.TgZ(6,"li",6),b.TgZ(7,"h4",7),b._uU(8),b.ALo(9,"translate"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(10,"div",8),b.TgZ(11,"div",9),b.TgZ(12,"div",10),b.TgZ(13,"div",11),b.TgZ(14,"h2"),b._uU(15),b.ALo(16,"translate"),b.qZA(),b.qZA(),b.TgZ(17,"div",12),b.TgZ(18,"form",13),b.TgZ(19,"div",3),b.TgZ(20,"div",14),b.TgZ(21,"mat-form-field",15),b.TgZ(22,"mat-label"),b._uU(23),b.ALo(24,"translate"),b.qZA(),b._UZ(25,"input",16),b.YNc(26,$,3,3,"mat-error",17),b.qZA(),b.qZA(),b.TgZ(27,"div",14),b.TgZ(28,"mat-form-field",15),b.TgZ(29,"mat-label"),b._uU(30),b.ALo(31,"translate"),b.qZA(),b._UZ(32,"input",18),b.qZA(),b.qZA(),b.TgZ(33,"div",14),b.TgZ(34,"mat-checkbox",19),b._uU(35),b.ALo(36,"translate"),b.qZA(),b.qZA(),b.qZA(),b.TgZ(37,"div",3),b.TgZ(38,"div",20),b.TgZ(39,"mat-label"),b._uU(40),b.ALo(41,"translate"),b.qZA(),b._UZ(42,"ckeditor",21),b.YNc(43,W,3,3,"mat-error",17),b.qZA(),b.TgZ(44,"div",20),b.TgZ(45,"mat-label"),b._uU(46),b.ALo(47,"translate"),b.qZA(),b._UZ(48,"ckeditor",22),b.YNc(49,z,3,3,"mat-error",17),b.qZA(),b.qZA(),b.TgZ(50,"div",3),b.TgZ(51,"div",20),b.TgZ(52,"mat-label"),b._uU(53),b.ALo(54,"translate"),b.qZA(),b._UZ(55,"ckeditor",23),b.YNc(56,P,3,3,"mat-error",17),b.qZA(),b.TgZ(57,"div",20),b.TgZ(58,"mat-label"),b._uU(59),b.ALo(60,"translate"),b.qZA(),b._UZ(61,"ckeditor",24),b.YNc(62,V,3,3,"mat-error",17),b.qZA(),b.qZA(),b.TgZ(63,"div",3),b.TgZ(64,"div",20),b.TgZ(65,"div",3),b.TgZ(66,"div",20),b._UZ(67,"img",25),b.qZA(),b.TgZ(68,"div",20),b.TgZ(69,"mat-form-field",15),b.TgZ(70,"mat-label"),b._uU(71),b.ALo(72,"translate"),b.qZA(),b.TgZ(73,"ngx-mat-file-input",26),b.NdJ("change",function(e){return t.onFileChangeLicenseImage(e)}),b.qZA(),b.TgZ(74,"mat-icon",27),b._uU(75,"cloud_upload"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(76,"div",20),b.TgZ(77,"div",3),b.TgZ(78,"div",20),b._UZ(79,"img",25),b.qZA(),b.TgZ(80,"div",20),b.TgZ(81,"mat-form-field",15),b.TgZ(82,"mat-label"),b._uU(83),b.ALo(84,"translate"),b.qZA(),b.TgZ(85,"ngx-mat-file-input",28),b.NdJ("change",function(e){return t.onFileChangeLicenseFlow(e)}),b.qZA(),b.TgZ(86,"mat-icon",27),b._uU(87,"cloud_upload"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(88,"div",3),b.TgZ(89,"div",29),b.TgZ(90,"button",30),b.NdJ("click",function(){return t.updateLicenseDetails()}),b._uU(91),b.ALo(92,"translate"),b.qZA(),b.TgZ(93,"button",31),b.NdJ("click",function(){return t.goBack()}),b._uU(94),b.ALo(95,"translate"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA()),2&e&&(b.xp6(8),b.Oqu(b.lcZ(9,26,"LICENSE.EDITTITLE")),b.xp6(7),b.Oqu(b.lcZ(16,28,"LICENSE.EDITTITLE")),b.xp6(3),b.Q6J("formGroup",t.editLicenseForm),b.xp6(5),b.Oqu(b.lcZ(24,30,"LICENSE.LIST.LICENSE-CLASS")),b.xp6(3),b.Q6J("ngIf",t.editLicenseForm.get("license_class").hasError("required")),b.xp6(4),b.Oqu(b.lcZ(31,32,"LICENSE.LIST.MIN-AGE")),b.xp6(5),b.Oqu(b.lcZ(36,34,"LICENSE.LIST.CDL-REQ")),b.xp6(5),b.hij("",b.lcZ(41,36,"LICENSE.LIST.LICENSE-ENGLISH"),"*"),b.xp6(2),b.Q6J("editor",t.Editor),b.xp6(1),b.Q6J("ngIf",t.editLicenseForm.get("license_desc_english").hasError("required")),b.xp6(3),b.hij("",b.lcZ(47,38,"LICENSE.LIST.LICENSE-MALAY"),"*"),b.xp6(2),b.Q6J("editor",t.Editor),b.xp6(1),b.Q6J("ngIf",t.editLicenseForm.get("license_desc_malay").hasError("required")),b.xp6(4),b.hij("",b.lcZ(54,40,"LICENSE.LIST.CRITERIA-ENGLISH"),"*"),b.xp6(2),b.Q6J("editor",t.Editor),b.xp6(1),b.Q6J("ngIf",t.editLicenseForm.get("criteria_english").hasError("required")),b.xp6(3),b.hij("",b.lcZ(60,42,"LICENSE.LIST.CRITERIA-MALAY"),"*"),b.xp6(2),b.Q6J("editor",t.Editor),b.xp6(1),b.Q6J("ngIf",t.editLicenseForm.get("criteria_malay").hasError("required")),b.xp6(5),b.s9C("src",t.licenseImg_preview?t.licenseImg_preview:t.editLicenseForm.value.license_image,b.LSH),b.xp6(4),b.Oqu(b.lcZ(72,44,"LICENSE.LIST.LICENSE-IMAGE")),b.xp6(8),b.s9C("src",t.licenseFlow_preview?t.licenseFlow_preview:t.editLicenseForm.value.license_flow,b.LSH),b.xp6(4),b.Oqu(b.lcZ(84,46,"LICENSE.LIST.LICENSE-FLOW")),b.xp6(7),b.Q6J("disabled",!t.editLicenseForm.valid),b.xp6(1),b.Oqu(b.lcZ(92,48,"BUTTON.EDIT-BTN")),b.xp6(3),b.Oqu(b.lcZ(95,50,"BUTTON.CANCEL-BTN")))},directives:[r._Y,r.JL,r.sg,n.KE,n.hX,o.Nt,r.Fj,r.JJ,r.u,r.Q7,l.O5,h.oG,M.u,A.Yh,Z.Hw,n.R9,d.lW,n.TO],pipes:[k.X$],styles:["[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:400px}"]}),e})()}];let ee=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=b.oAB({type:e}),e.\u0275inj=b.cJS({imports:[[E.Bz.forChild(K)],E.Bz]}),e})();var te=i(79961);let ie=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=b.oAB({type:e}),e.\u0275inj=b.cJS({providers:[w],imports:[[S.xD,M.d,l.ez,r.u5,r.UX,a.p0,s.TU,n.lN,o.c,c.ZX,d.ot,Z.Ps,g.Is,m.JX,p.g0,u.LD,T.FA,h.p9,L.Nh,q.Tx,A.Ad,ee,_.Cq,f.T5,I.yI,k.aw,te.Bb]]}),e})()}}]);